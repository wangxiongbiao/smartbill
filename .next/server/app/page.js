(()=>{var a={};a.id=974,a.ids=[974],a.modules={86:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BaseExternalAccountClient=b.CLOUD_RESOURCE_MANAGER=b.EXTERNAL_ACCOUNT_TYPE=b.EXPIRATION_TIME_OFFSET=void 0;let d=c(32842),e=c(27910),f=c(37254),g=c(56963),h=c(74072),i=c(39576),j="https://www.googleapis.com/auth/cloud-platform";b.EXPIRATION_TIME_OFFSET=3e5,b.EXTERNAL_ACCOUNT_TYPE="external_account",b.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";class k extends f.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#a=null;constructor(a){super(a);let c=(0,h.originalOrCamelOptions)(a),d=c.get("type");if(d&&d!==b.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${b.EXTERNAL_ACCOUNT_TYPE}" type but received "${a.type}"`);let e=c.get("client_id"),f=c.get("client_secret");this.tokenUrl=c.get("token_url")??"https://sts.{universeDomain}/v1/token".replace("{universeDomain}",this.universeDomain);let i=c.get("subject_token_type"),k=c.get("workforce_pool_user_project"),l=c.get("service_account_impersonation_url"),m=c.get("service_account_impersonation"),n=(0,h.originalOrCamelOptions)(m).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(c.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),e&&(this.clientAuth={confidentialClientType:"basic",clientId:e,clientSecret:f}),this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=c.get("scopes")||[j],this.cachedAccessToken=null,this.audience=c.get("audience"),this.subjectTokenType=i,this.workforcePoolUserProject=k;let o=RegExp("//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+");if(this.workforcePoolUserProject&&!this.audience.match(o))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=l,this.serviceAccountImpersonationLifetime=n,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=3600),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let a=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return a?.groups?.email||null}return null}setCredentials(a){super.setCredentials(a),this.cachedAccessToken=a}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async getProjectId(){let a=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(a){let b=await this.getRequestHeaders(),c={...k.RETRY_CONFIG,headers:b,url:`${this.cloudResourceManagerURL.toString()}${a}`};f.AuthClient.setMethodName(c,"getProjectId");let d=await this.transporter.request(c);return this.projectId=d.data.projectId,this.projectId}return null}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){this.#a=this.#a||this.#b();try{return await this.#a}finally{this.#a=null}}async #b(){let a=await this.retrieveSubjectToken(),b={grantType:"urn:ietf:params:oauth:grant-type:token-exchange",audience:this.audience,requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[j]:this.getScopesArray()},c=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,d=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),e=await this.stsCredential.exchangeToken(b,d,c);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(e.access_token):e.expires_in?this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+1e3*e.expires_in,res:e.res}:this.cachedAccessToken={access_token:e.access_token,res:e.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(a){let b=a.match(/\/projects\/([^/]+)/);return b?b[1]:null}async getImpersonatedAccessToken(a){let b={...k.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${a}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};f.AuthClient.setMethodName(b,"getImpersonatedAccessToken");let c=await this.transporter.request(b),d=c.data;return{access_token:d.accessToken,expiry_date:new Date(d.expireTime).getTime(),res:c}}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}getScopesArray(){return"string"==typeof this.scopes?[this.scopes]:this.scopes||[j]}getMetricsHeaderValue(){let a=process.version.replace(/^v/,""),b=void 0!==this.serviceAccountImpersonationUrl,c=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${a} auth/${i.pkg.version} google-byoid-sdk source/${c} sa-impersonation/${b} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}b.BaseExternalAccountClient=k},181:(a,b,c)=>{"use strict";let d=c(94735),e=c(81630),{Duplex:f}=c(27910),{createHash:g}=c(55511),h=c(90133),i=c(87894),j=c(55324),k=c(40443),{CLOSE_TIMEOUT:l,GUID:m,kWebSocket:n}=c(63685),o=/^[+/0-9A-Za-z]{22}==$/;class p extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,closeTimeout:l,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){let a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(q,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(q,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{q(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",r);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void t(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void t(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!o.test(e))return void t(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void t(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void s(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){t(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],n={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),n[i.extensionName]=c)}catch(c){t(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return s(b,g||401,h,i);this.completeUpgrade(n,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return s(b,401)}this.completeUpgrade(n,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[n])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return s(e,503);let k=g("sha1").update(b+m).digest("base64"),l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],o=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(l.push(`Sec-WebSocket-Protocol: ${a}`),o._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});l.push(`Sec-WebSocket-Extensions: ${c}`),o._extensions=a}this.emit("headers",l,d),e.write(l.concat("\r\n").join("\r\n")),e.removeListener("error",r),o.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(o),o.on("close",()=>{this.clients.delete(o),this._shouldEmitClose&&!this.clients.size&&process.nextTick(q,this)})),j(o,d)}}function q(a){a._state=2,a.emit("close")}function r(){this.destroy()}function s(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function t(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,t),a.emit("wsClientError",d,c,b)}else s(c,d,e,f)}a.exports=p},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},543:(a,b)=>{"use strict";function c(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===d}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{isHangingPromiseRejectionError:function(){return c},makeDevtoolsIOAwarePromise:function(){return i},makeHangingPromise:function(){return g}});let d="HANGING_PROMISE_REJECTION";class e extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=d}}let f=new WeakMap;function g(a,b,c){if(a.aborted)return Promise.reject(new e(b,c));{let d=new Promise((d,g)=>{let h=g.bind(null,new e(b,c)),i=f.get(a);if(i)i.push(h);else{let b=[h];f.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(h),d}}function h(){}function i(a){return new Promise(b=>{setTimeout(()=>{b(a)},0)})}},1708:a=>{"use strict";a.exports=require("node:process")},2189:(a,b,c)=>{"use strict";var d=c(21712).Buffer,e=c(51706);function f(a){if(d.isBuffer(a))return a;if("string"==typeof a)return d.from(a,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function g(a,b,c){for(var d=0;b+d<c&&0===a[b+d];)++d;return a[b+d]>=128&&--d,d}a.exports={derToJose:function(a,b){a=f(a);var c=e(b),g=c+1,h=a.length,i=0;if(48!==a[i++])throw Error('Could not find expected "seq"');var j=a[i++];if(129===j&&(j=a[i++]),h-i<j)throw Error('"seq" specified length of "'+j+'", only "'+(h-i)+'" remaining');if(2!==a[i++])throw Error('Could not find expected "int" for "r"');var k=a[i++];if(h-i-2<k)throw Error('"r" specified length of "'+k+'", only "'+(h-i-2)+'" available');if(g<k)throw Error('"r" specified length of "'+k+'", max of "'+g+'" is acceptable');var l=i;if(i+=k,2!==a[i++])throw Error('Could not find expected "int" for "s"');var m=a[i++];if(h-i!==m)throw Error('"s" specified length of "'+m+'", expected "'+(h-i)+'"');if(g<m)throw Error('"s" specified length of "'+m+'", max of "'+g+'" is acceptable');var n=i;if((i+=m)!==h)throw Error('Expected to consume entire buffer, but "'+(h-i)+'" bytes remain');var o=c-k,p=c-m,q=d.allocUnsafe(o+k+p+m);for(i=0;i<o;++i)q[i]=0;a.copy(q,i,l+Math.max(-o,0),l+k),i=c;for(var r=i;i<r+p;++i)q[i]=0;return a.copy(q,i,n+Math.max(-p,0),n+m),q=(q=q.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(a,b){a=f(a);var c=e(b),h=a.length;if(h!==2*c)throw TypeError('"'+b+'" signatures must be "'+2*c+'" bytes, saw "'+h+'"');var i=g(a,0,c),j=g(a,c,a.length),k=c-i,l=c-j,m=2+k+1+1+l,n=m<128,o=d.allocUnsafe((n?2:3)+m),p=0;return o[p++]=48,n?o[p++]=m:(o[p++]=129,o[p++]=255&m),o[p++]=2,o[p++]=k,i<0?(o[p++]=0,p+=a.copy(o,p,0,c)):p+=a.copy(o,p,i,c),o[p++]=2,o[p++]=l,j<0?(o[p++]=0,a.copy(o,p,c)):a.copy(o,p,c+j),o}}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:a=>{"use strict";a.exports=require("node:buffer")},6029:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CertificateSubjectTokenSupplier=b.InvalidConfigurationError=b.CertificateSourceUnavailableError=b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;let d=c(74072),e=c(29021),f=c(55511),g=c(55591);b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class h extends Error{constructor(a){super(a),this.name="CertificateSourceUnavailableError"}}b.CertificateSourceUnavailableError=h;class i extends Error{constructor(a){super(a),this.name="InvalidConfigurationError"}}b.InvalidConfigurationError=i;class j{certificateConfigPath;trustChainPath;cert;key;constructor(a){if(!a.useDefaultCertificateConfig&&!a.certificateConfigLocation)throw new i("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(a.useDefaultCertificateConfig&&a.certificateConfigLocation)throw new i("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=a.trustChainPath,this.certificateConfigPath=a.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new i("Cannot create mTLS Agent with missing certificate or key");return new g.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#c();let{certPath:a,keyPath:b}=await this.#d();return{cert:this.cert,key:this.key}=await this.#e(a,b),await this.#f(this.cert)}async #c(){let a=this.certificateConfigPath;if(a){if(await (0,d.isValidFile)(a))return a;throw new h(`Provided certificate config path is invalid: ${a}`)}let c=process.env[b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(c){if(await (0,d.isValidFile)(c))return c;throw new h(`Path from environment variable "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${c}`)}let e=(0,d.getWellKnownCertificateConfigFileLocation)();if(await (0,d.isValidFile)(e))return e;throw new h(`Could not find certificate configuration file. Searched override path, the "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${e}).`)}async #d(){let a,b=this.certificateConfigPath;try{a=await e.promises.readFile(b,"utf8")}catch(a){throw new h(`Failed to read certificate config file at: ${b}`)}try{let c=JSON.parse(a),d=c?.cert_configs?.workload?.cert_path,e=c?.cert_configs?.workload?.key_path;if(!d||!e)throw new i(`Certificate config file (${b}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:d,keyPath:e}}catch(a){if(a instanceof i)throw a;throw new i(`Failed to parse certificate config from ${b}: ${a.message}`)}}async #e(a,b){let c,d;try{c=await e.promises.readFile(a),new f.X509Certificate(c)}catch(c){let b=c instanceof Error?c.message:String(c);throw new h(`Failed to read certificate file at ${a}: ${b}`)}try{d=await e.promises.readFile(b),(0,f.createPrivateKey)(d)}catch(c){let a=c instanceof Error?c.message:String(c);throw new h(`Failed to read private key file at ${b}: ${a}`)}return{cert:c,key:d}}async #f(a){let b=new f.X509Certificate(a);if(!this.trustChainPath)return JSON.stringify([b.raw.toString("base64")]);try{let a,c=((await e.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((a,b)=>{try{return new f.X509Certificate(a)}catch(c){let a=c instanceof Error?c.message:String(c);throw new i(`Failed to parse certificate at index ${b} in trust chain file ${this.trustChainPath}: ${a}`)}}),d=c.findIndex(a=>b.raw.equals(a.raw));if(-1===d)a=[b,...c];else if(0===d)a=c;else throw new i(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${d}).`);return JSON.stringify(a.map(a=>a.raw.toString("base64")))}catch(b){if(b instanceof i)throw b;let a=b instanceof Error?b.message:String(b);throw new h(`Failed to process certificate chain from ${this.trustChainPath}: ${a}`)}}}b.CertificateSubjectTokenSupplier=j},6085:()=>{},10368:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthHandler=b.ExecutableError=void 0;let d=c(85343),e=c(79646),f=c(29021);class g extends Error{code;constructor(a,b){super(`The executable failed with exit code: ${b} and error message: ${a}.`),this.code=b,Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableError=g;class h{commandComponents;timeoutMillis;outputFile;constructor(a){if(!a.command)throw Error("No command provided.");if(this.commandComponents=h.parseCommand(a.command),this.timeoutMillis=a.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=a.outputFile}retrieveResponseFromExecutable(a){return new Promise((b,c)=>{let f=e.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(a)}}),h="";f.stdout.on("data",a=>{h+=a}),f.stderr.on("data",a=>{h+=a});let i=setTimeout(()=>(f.removeAllListeners(),f.kill(),c(Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);f.on("close",a=>{if(clearTimeout(i),0!==a)return c(new g(h,a.toString()));try{let a=JSON.parse(h),c=new d.ExecutableResponse(a);return b(c)}catch(a){if(a instanceof d.ExecutableResponseError)return c(a);return c(new d.ExecutableResponseError(`The executable returned an invalid response: ${h}`))}})})}async retrieveCachedResponse(){let a;if(!this.outputFile||0===this.outputFile.length)return;try{a=await f.promises.realpath(this.outputFile)}catch{return}if(!(await f.promises.lstat(a)).isFile())return;let b=await f.promises.readFile(a,{encoding:"utf8"});if(""!==b)try{let a=JSON.parse(b);if(new d.ExecutableResponse(a).isValid())return new d.ExecutableResponse(a);return}catch(a){if(a instanceof d.ExecutableResponseError)throw a;throw new d.ExecutableResponseError(`The output file contained an invalid response: ${b}`)}}static parseCommand(a){let b=a.match(/(?:[^\s"]+|"[^"]*")+/g);if(!b)throw Error(`Provided command: "${a}" could not be parsed.`);for(let a=0;a<b.length;a++)'"'===b[a][0]&&'"'===b[a].slice(-1)&&(b[a]=b[a].slice(1,-1));return b}}b.PluggableAuthHandler=h},10510:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GCE_LINUX_BIOS_PATHS=void 0,b.isGoogleCloudServerless=g,b.isGoogleComputeEngineLinux=h,b.isGoogleComputeEngineMACAddress=i,b.isGoogleComputeEngine=j,b.detectGCPResidency=function(){return g()||j()};let d=c(29021),e=c(21820);b.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};let f=/^42:01/;function g(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function h(){if("linux"!==(0,e.platform)())return!1;try{(0,d.statSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let a=(0,d.readFileSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(a)}catch{return!1}}function i(){for(let a of Object.values((0,e.networkInterfaces)()))if(a){for(let{mac:b}of a)if(f.test(b))return!0}return!1}function j(){return h()||i()}},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11550:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{chainStreams:function(){return n},continueDynamicHTMLResume:function(){return E},continueDynamicPrerender:function(){return C},continueFizzStream:function(){return B},continueStaticPrerender:function(){return D},createBufferedTransformStream:function(){return s},createDocumentClosingStream:function(){return F},createRootLayoutValidatorStream:function(){return A},renderToInitialFizzStream:function(){return u},streamFromBuffer:function(){return p},streamFromString:function(){return o},streamToBuffer:function(){return q},streamToString:function(){return r}});let d=c(85908),e=c(38270),f=c(77921),g=c(46826),h=c(38324),i=c(40147),j=c(17156),k=c(98682);function l(){}let m=new TextEncoder;function n(...a){if(0===a.length)return new ReadableStream({start(a){a.close()}});if(1===a.length)return a[0];let{readable:b,writable:c}=new TransformStream,d=a[0].pipeTo(c,{preventClose:!0}),e=1;for(;e<a.length-1;e++){let b=a[e];d=d.then(()=>b.pipeTo(c,{preventClose:!0}))}let f=a[e];return(d=d.then(()=>f.pipeTo(c))).catch(l),b}function o(a){return new ReadableStream({start(b){b.enqueue(m.encode(a)),b.close()}})}function p(a){return new ReadableStream({start(b){b.enqueue(a),b.close()}})}async function q(a){let b=a.getReader(),c=[];for(;;){let{done:a,value:d}=await b.read();if(a)break;c.push(d)}return Buffer.concat(c)}async function r(a,b){let c=new TextDecoder("utf-8",{fatal:!0}),d="";for await(let e of a){if(null==b?void 0:b.aborted)return d;d+=c.decode(e,{stream:!0})}return d+c.decode()}function s(){let a,b=[],c=0;return new TransformStream({transform(d,e){b.push(d),c+=d.byteLength,(d=>{if(a)return;let e=new f.DetachedPromise;a=e,(0,g.scheduleImmediate)(()=>{try{let a=new Uint8Array(c),e=0;for(let c=0;c<b.length;c++){let d=b[c];a.set(d,e),e+=d.byteLength}b.length=0,c=0,d.enqueue(a)}catch{}finally{a=void 0,e.resolve()}})})(e)},flush(){if(a)return a.promise}})}function t(a,b){let c=!1;return new TransformStream({transform(d,e){if(a&&!c){c=!0;let a=new TextDecoder("utf-8",{fatal:!0}).decode(d,{stream:!0}),f=(0,k.insertBuildIdComment)(a,b);e.enqueue(m.encode(f));return}e.enqueue(d)}})}function u({ReactDOMServer:a,element:b,streamOptions:c}){return(0,d.getTracer)().trace(e.AppRenderSpan.renderToReadableStream,async()=>a.renderToReadableStream(b,c))}function v(a){let b=-1,c=!1;return new TransformStream({async transform(d,e){let f=-1,g=-1;if(b++,c)return void e.enqueue(d);let j=0;if(-1===f){if(-1===(f=(0,i.indexOfUint8Array)(d,h.ENCODED_TAGS.META.ICON_MARK)))return void e.enqueue(d);47===d[f+(j=h.ENCODED_TAGS.META.ICON_MARK.length)]?j+=2:j++}if(0===b){if(g=(0,i.indexOfUint8Array)(d,h.ENCODED_TAGS.CLOSED.HEAD),-1!==f){if(f<g){let a=new Uint8Array(d.length-j);a.set(d.subarray(0,f)),a.set(d.subarray(f+j),f),d=a}else{let b=await a(),c=m.encode(b),e=c.length,g=new Uint8Array(d.length-j+e);g.set(d.subarray(0,f)),g.set(c,f),g.set(d.subarray(f+j),f+e),d=g}c=!0}}else{let b=await a(),e=m.encode(b),g=e.length,h=new Uint8Array(d.length-j+g);h.set(d.subarray(0,f)),h.set(e,f),h.set(d.subarray(f+j),f+g),d=h,c=!0}e.enqueue(d)}})}function w(a){let b=!1,c=!1;return new TransformStream({async transform(d,e){c=!0;let f=await a();if(b){if(f){let a=m.encode(f);e.enqueue(a)}e.enqueue(d)}else{let a=(0,i.indexOfUint8Array)(d,h.ENCODED_TAGS.CLOSED.HEAD);if(-1!==a){if(f){let b=m.encode(f),c=new Uint8Array(d.length+b.length);c.set(d.slice(0,a)),c.set(b,a),c.set(d.slice(a),a+b.length),e.enqueue(c)}else e.enqueue(d);b=!0}else f&&e.enqueue(m.encode(f)),e.enqueue(d),b=!0}},async flush(b){if(c){let c=await a();c&&b.enqueue(m.encode(c))}}})}function x(a,b){let c=!1,d=null,e=!1;function f(a){return d||(d=h(a)),d}async function h(d){let f=a.getReader();b&&await (0,g.atLeastOneTask)();try{for(;;){let{done:a,value:h}=await f.read();if(a){e=!0;return}b||c||await (0,g.atLeastOneTask)(),d.enqueue(h)}}catch(a){d.error(a)}}return new TransformStream({start(a){b||f(a)},transform(a,c){c.enqueue(a),b&&f(c)},flush(a){if(c=!0,!e)return f(a)}})}let y="</body></html>";function z(){let a=!1;return new TransformStream({transform(b,c){if(a)return c.enqueue(b);let d=(0,i.indexOfUint8Array)(b,h.ENCODED_TAGS.CLOSED.BODY_AND_HTML);if(d>-1){if(a=!0,b.length===h.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length)return;let e=b.slice(0,d);if(c.enqueue(e),b.length>h.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length+d){let a=b.slice(d+h.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length);c.enqueue(a)}}else c.enqueue(b)},flush(a){a.enqueue(h.ENCODED_TAGS.CLOSED.BODY_AND_HTML)}})}function A(){let a=!1,b=!1;return new TransformStream({async transform(c,d){!a&&(0,i.indexOfUint8Array)(c,h.ENCODED_TAGS.OPENING.HTML)>-1&&(a=!0),!b&&(0,i.indexOfUint8Array)(c,h.ENCODED_TAGS.OPENING.BODY)>-1&&(b=!0),d.enqueue(c)},flush(c){let d=[];a||d.push("html"),b||d.push("body"),d.length&&c.enqueue(m.encode(`<html id="__next_error__">
            <template
              data-next-error-message="Missing ${d.map(a=>`<${a}>`).join(d.length>1?" and ":"")} tags in the root layout.
Read more at https://nextjs.org/docs/messages/missing-root-layout-tags"
              data-next-error-digest="${j.MISSING_ROOT_TAGS_ERROR}"
              data-next-error-stack=""
            ></template>
          `))}})}async function B(a,{suffix:b,inlinedDataStream:c,isStaticGeneration:d,isBuildTimePrerendering:e,buildId:h,getServerInsertedHTML:i,getServerInsertedMetadata:j,validateRootLayout:k}){let l,n,o=b?b.split(y,1)[0]:null;d&&await a.allReady;var p=[s(),t(e,h),v(j),null!=o&&o.length>0?(n=!1,new TransformStream({transform(a,b){if(b.enqueue(a),!n){n=!0;let a=new f.DetachedPromise;l=a,(0,g.scheduleImmediate)(()=>{try{b.enqueue(m.encode(o))}catch{}finally{l=void 0,a.resolve()}})}},flush(a){if(l)return l.promise;n||a.enqueue(m.encode(o))}})):null,c?x(c,!0):null,k?A():null,z(),w(i)];let q=a;for(let a of p)a&&(q=q.pipeThrough(a));return q}async function C(a,{getServerInsertedHTML:b,getServerInsertedMetadata:c}){return a.pipeThrough(s()).pipeThrough(new TransformStream({transform(a,b){(0,i.isEquivalentUint8Arrays)(a,h.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,i.isEquivalentUint8Arrays)(a,h.ENCODED_TAGS.CLOSED.BODY)||(0,i.isEquivalentUint8Arrays)(a,h.ENCODED_TAGS.CLOSED.HTML)||(a=(0,i.removeFromUint8Array)(a,h.ENCODED_TAGS.CLOSED.BODY),a=(0,i.removeFromUint8Array)(a,h.ENCODED_TAGS.CLOSED.HTML),b.enqueue(a))}})).pipeThrough(w(b)).pipeThrough(v(c))}async function D(a,{inlinedDataStream:b,getServerInsertedHTML:c,getServerInsertedMetadata:d,isBuildTimePrerendering:e,buildId:f}){return a.pipeThrough(s()).pipeThrough(t(e,f)).pipeThrough(w(c)).pipeThrough(v(d)).pipeThrough(x(b,!0)).pipeThrough(z())}async function E(a,{delayDataUntilFirstHtmlChunk:b,inlinedDataStream:c,getServerInsertedHTML:d,getServerInsertedMetadata:e}){return a.pipeThrough(s()).pipeThrough(w(d)).pipeThrough(v(e)).pipeThrough(x(c,b)).pipeThrough(z())}function F(){return o(y)}},11723:a=>{"use strict";a.exports=require("querystring")},12412:a=>{"use strict";a.exports=require("assert")},12471:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserRefreshClient=b.USER_REFRESH_ACCOUNT_TYPE=void 0;let d=c(46245),e=c(37254);b.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class f extends d.OAuth2Client{_refreshToken;constructor(a,b,c,d,e){let f=a&&"object"==typeof a?a:{clientId:a,clientSecret:b,refreshToken:c,eagerRefreshThresholdMillis:d,forceRefreshOnFailure:e};super(f),this._refreshToken=f.refreshToken,this.credentials.refresh_token=f.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(a){let b={...f.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:a})};return e.AuthClient.setMethodName(b,"fetchIdToken"),(await this.transporter.request(b)).data.id_token}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==a.type)throw Error('The incoming JSON object does not have the "authorized_user" type');if(!a.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!a.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!a.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=a.client_id,this._clientSecret=a.client_secret,this._refreshToken=a.refresh_token,this.credentials.refresh_token=a.refresh_token,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}async fromStreamAsync(a){return new Promise((b,c)=>{if(!a)return c(Error("Must pass in a stream containing the user refresh token."));let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);return this.fromJSON(a),b()}catch(a){return c(a)}})})}static fromJSON(a){let b=new f;return b.fromJSON(a),b}}b.UserRefreshClient=f},12997:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsRequestSigner=void 0;let d=c(32842),e=c(78053),f="AWS4-HMAC-SHA256";class g{getCredentials;region;crypto;constructor(a,b){this.getCredentials=a,this.region=b,this.crypto=(0,e.createCrypto)()}async getRequestOptions(a){if(!a.url)throw RangeError('"url" is required in "amzOptions"');let b="object"==typeof a.data?JSON.stringify(a.data):a.data,c=a.url,e=a.method||"GET",f=a.body||b,g=a.headers,h=await this.getCredentials(),i=new URL(c);if("string"!=typeof f&&void 0!==f)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${f}`);let k=await j({crypto:this.crypto,host:i.host,canonicalUri:i.pathname,canonicalQuerystring:i.search.slice(1),method:e,region:this.region,securityCredentials:h,requestPayload:f,additionalAmzHeaders:g}),l=d.Gaxios.mergeHeaders(k.amzDate?{"x-amz-date":k.amzDate}:{},{authorization:k.authorizationHeader,host:i.host},g||{});h.token&&d.Gaxios.mergeHeaders(l,{"x-amz-security-token":h.token});let m={url:c,method:e,headers:l};return void 0!==f&&(m.body=f),m}}async function h(a,b,c){return await a.signWithHmacSha256(b,c)}async function i(a,b,c,d,e){let f=await h(a,`AWS4${b}`,c),g=await h(a,f,d),i=await h(a,g,e);return await h(a,i,"aws4_request")}async function j(a){let b=d.Gaxios.mergeHeaders(a.additionalAmzHeaders),c=a.requestPayload||"",g=a.host.split(".")[0],j=new Date,k=j.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),l=j.toISOString().replace(/[-]/g,"").replace(/T.*/,"");a.securityCredentials.token&&b.set("x-amz-security-token",a.securityCredentials.token);let m=d.Gaxios.mergeHeaders({host:a.host},b.has("date")?{}:{"x-amz-date":k},b),n="",o=[...m.keys()].sort();o.forEach(a=>{n+=`${a}:${m.get(a)}
`});let p=o.join(";"),q=await a.crypto.sha256DigestHex(c),r=`${a.method.toUpperCase()}
${a.canonicalUri}
${a.canonicalQuerystring}
${n}
${p}
${q}`,s=`${l}/${a.region}/${g}/aws4_request`,t=`${f}
${k}
${s}
`+await a.crypto.sha256DigestHex(r),u=await i(a.crypto,a.securityCredentials.secretAccessKey,l,a.region,g),v=await h(a.crypto,u,t),w=`${f} Credential=${a.securityCredentials.accessKeyId}/${s}, SignedHeaders=${p}, Signature=${(0,e.fromArrayBufferToHex)(v)}`;return{amzDate:b.has("date")?void 0:k,authorizationHeader:w,canonicalQuerystring:a.canonicalQuerystring}}b.AwsRequestSigner=g},13919:a=>{"use strict";a.exports=JSON.parse('{"name":"google-auth-library","version":"10.5.0","author":"Google Inc.","description":"Google APIs Authentication Client Library for Node.js","engines":{"node":">=18"},"main":"./build/src/index.js","types":"./build/src/index.d.ts","repository":"googleapis/google-auth-library-nodejs.git","keywords":["google","api","google apis","client","client library"],"dependencies":{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","gaxios":"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0","gtoken":"^8.0.0","jws":"^4.0.0"},"devDependencies":{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0","c8":"^10.0.0","codecov":"^3.0.2","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","keypair":"^1.0.4","mocha":"^11.1.0","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.5","null-loader":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","ts-loader":"^8.0.0","typescript":"5.8.2","webpack":"^5.21.2","webpack-cli":"^4.0.0"},"files":["build/src","!build/src/**/*.map"],"scripts":{"test":"c8 mocha build/test","clean":"gts clean","prepare":"npm run compile","lint":"gts check --no-inline-config","compile":"tsc -p .","fix":"gts fix","pretest":"npm run compile -- --sourceMap","docs":"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap","webpack":"webpack","browser-test":"karma start","docs-test":"echo \'disabled until linkinator is fixed\'","predocs-test":"npm run docs","prelint":"cd samples; npm link ../; npm install"},"license":"Apache-2.0"}')},15959:(a,b,c)=>{"use strict";let{isUtf8:d}=c(79428),{hasBlob:e}=c(63685);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(a.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)a.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let b=c(96340);a.exports.isValidUTF8=function(a){return a.length<32?f(a):b(a)}}catch(a){}},16176:(a,b,c)=>{"use strict";a.exports={pkg:c(54226)}},17156:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"MISSING_ROOT_TAGS_ERROR",{enumerable:!0,get:function(){return c}});let c="NEXT_MISSING_ROOT_TAGS";("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},17613:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{decryptActionBoundArgs:function(){return s},encryptActionBoundArgs:function(){return r}}),c(31185);let d=c(29364),e=c(47163),f=c(11550),g=c(93121),h=c(63033),i=c(32934),j=function(a){return a&&a.__esModule?a:{default:a}}(c(70043)),k=new TextEncoder,l=new TextDecoder,m=void 0,n=void 0;async function o(a,b){let c=await (0,g.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=atob(b),e=d.slice(0,16),f=d.slice(16),h=l.decode(await (0,g.decrypt)(c,(0,g.stringToUint8Array)(e),(0,g.stringToUint8Array)(f)));if(!h.startsWith(a))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return h.slice(a.length)}async function p(a,b){let c=await (0,g.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=new Uint8Array(16);h.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(d));let e=(0,g.arrayBufferToString)(d.buffer),f=await (0,g.encrypt)(c,d,k.encode(a+b));return btoa(e+(0,g.arrayBufferToString)(f))}var q=function(a){return a[a.Ready=0]="Ready",a[a.Pending=1]="Pending",a[a.Complete=2]="Complete",a}(q||{});let r=j.default.cache(async function a(b,...c){let e=h.workUnitAsyncStorage.getStore(),j=e?(0,h.getCacheSignal)(e):void 0,{clientModules:k}=(0,g.getClientReferenceManifestForRsc)(),l=Error();Error.captureStackTrace(l,a);let n=!1,o=e?(0,i.createHangingInputAbortSignal)(e):void 0,q=0;function r(){0===q&&(q=1,null==j||j.beginRead())}function s(){1===q&&(null==j||j.endRead()),q=2}o&&j&&o.addEventListener("abort",r,{once:!0});let t=await (0,f.streamToString)((0,d.renderToReadableStream)(c,k,{filterStackFrame:m,signal:o,onError(a){(null==o||!o.aborted)&&(n||(n=!0,l.message=a instanceof Error?a.message:String(a)))}}),o);if(n)throw s(),l;if(!e)return p(b,t);r();let u=(0,h.getPrerenderResumeDataCache)(e),v=(0,h.getRenderResumeDataCache)(e),w=b+t,x=(null==u?void 0:u.encryptedBoundArgs.get(w))??(null==v?void 0:v.encryptedBoundArgs.get(w));if(x)return x;let y=await p(b,t);return s(),null==u||u.encryptedBoundArgs.set(w,y),y});async function s(a,b){let c,d=await b,f=h.workUnitAsyncStorage.getStore();if(f){let b=(0,h.getCacheSignal)(f),e=(0,h.getPrerenderResumeDataCache)(f),g=(0,h.getRenderResumeDataCache)(f);(c=(null==e?void 0:e.decryptedBoundArgs.get(d))??(null==g?void 0:g.decryptedBoundArgs.get(d)))||(null==b||b.beginRead(),c=await o(a,d),null==b||b.endRead(),null==e||e.decryptedBoundArgs.set(d,c))}else c=await o(a,d);let{edgeRscModuleMapping:i,rscModuleMapping:j}=(0,g.getClientReferenceManifestForRsc)();return await (0,e.createFromReadableStream)(new ReadableStream({start(a){switch(a.enqueue(k.encode(c)),null==f?void 0:f.type){case"prerender":case"prerender-runtime":f.renderSignal.aborted?a.close():f.renderSignal.addEventListener("abort",()=>a.close(),{once:!0});break;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":case void 0:return a.close()}}}),{findSourceMapURL:n,serverConsumerManifest:{moduleLoading:null,moduleMap:j,serverModuleMap:(0,g.getServerModuleMap)()}})}},18351:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(70532),b)},18837:(a,b)=>{"use strict";function c(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(b,"D",{enumerable:!0,get:function(){return c}})},18994:(a,b)=>{"use strict";function c(a){return"("===a[0]&&a.endsWith(")")}function d(a){return a.startsWith("@")&&"@children"!==a}function e(a,b){if(a.includes(f)){let a=JSON.stringify(b);return"{}"!==a?f+"?"+a:f}return a}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{DEFAULT_SEGMENT_KEY:function(){return g},PAGE_SEGMENT_KEY:function(){return f},addSearchParamsIfPageSegment:function(){return e},isGroupSegment:function(){return c},isParallelRouteSegment:function(){return d}});let f="__PAGE__",g="__DEFAULT__"},19101:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.fromArrayBufferToHex=function(a){return Array.from(new Uint8Array(a)).map(a=>a.toString(16).padStart(2,"0")).join("")}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:a=>{"use strict";a.exports=require("process")},20321:function(a,b,c){"use strict";var d,e=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.Gaxios=void 0;let f=e(c(87531)),g=c(55591),h=c(81101),i=c(68232),j=c(27910),k=c(85731),l=async()=>globalThis.crypto?.randomUUID()||(await Promise.resolve().then(c.t.bind(c,55511,23))).randomUUID();class m{agentCache=new Map;defaults;interceptors;constructor(a){this.defaults=a||{},this.interceptors={request:new k.GaxiosInterceptorManager,response:new k.GaxiosInterceptorManager}}fetch(...a){let b,c=a[0],e=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&d.mergeHeaders(f,c.headers),e&&d.mergeHeaders(f,new Headers(e.headers)),"object"!=typeof c||c instanceof URL)?this.request({...e,headers:f,url:b}):this.request({...e,...c,headers:f,url:b})}async request(a={}){let b=await this.#g(a);return b=await this.#h(b),this.#i(this._request(b))}async _defaultAdapter(a){let b=a.fetchImplementation||this.defaults.fetchImplementation||await d.#j(),c={...a};delete c.data;let e=await b(a.url,c),f=await this.getResponseData(a,e);return Object.getOwnPropertyDescriptor(e,"data")?.configurable||Object.defineProperties(e,{data:{configurable:!0,writable:!0,enumerable:!0,value:f}}),Object.assign(e,{config:a,data:f})}async _request(a){try{let b;if(b=a.adapter?await a.adapter(a,this._defaultAdapter.bind(this)):await this._defaultAdapter(a),!a.validateStatus(b.status)){if("stream"===a.responseType){let a=[];for await(let c of b.data)a.push(c);b.data=a.toString()}let c=h.GaxiosError.extractAPIErrorFromResponse(b,`Request failed with status code ${b.status}`);throw new h.GaxiosError(c?.message,a,b,c)}return b}catch(e){let b;b=e instanceof h.GaxiosError?e:e instanceof Error?new h.GaxiosError(e.message,a,void 0,e):new h.GaxiosError("Unexpected Gaxios Error",a,void 0,e);let{shouldRetry:c,config:d}=await (0,i.getRetryConfig)(b);if(c&&d)return b.config.retryConfig.currentRetryAttempt=d.retryConfig.currentRetryAttempt,a.retryConfig=b.config?.retryConfig,this.#k(a),this._request(a);throw a.errorRedactor&&a.errorRedactor(b),b}}async getResponseData(a,b){if(204===b.status)return"";if(a.maxContentLength&&b.headers.has("content-length")&&a.maxContentLength<Number.parseInt(b.headers?.get("content-length")||""))throw new h.GaxiosError("Response's `Content-Length` is over the limit.",a,Object.assign(b,{config:a}));switch(a.responseType){case"stream":return b.body;case"json":{let a=await b.text();try{return JSON.parse(a)}catch{return a}}case"arraybuffer":return b.arrayBuffer();case"blob":return b.blob();case"text":return b.text();default:return this.getResponseDataFromContentType(b)}}#l(a,b=[]){let c=new URL(a),d=[...b];for(let a of(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[])d.push(a.trim());for(let a of d)if(a instanceof RegExp){if(a.test(c.toString()))return!1}else if(a instanceof URL){if(a.origin===c.origin)return!1}else if(a.startsWith("*.")||a.startsWith(".")){let b=a.replace(/^\*\./,".");if(c.hostname.endsWith(b))return!1}else if(a===c.origin||a===c.hostname||a===c.href)return!1;return!0}async #h(a){let b=Promise.resolve(a);for(let a of this.interceptors.request.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #i(a){let b=Promise.resolve(a);for(let a of this.interceptors.response.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #g(a){let b=new Headers(this.defaults.headers);d.mergeHeaders(b,a.headers);let c=(0,f.default)(!0,{},this.defaults,a);if(!c.url)throw Error("URL is required.");if(c.baseURL&&(c.url=new URL(c.url,c.baseURL)),c.url=new URL(c.url),c.params)if(c.paramsSerializer){let a=c.paramsSerializer(c.params);a.startsWith("?")&&(a=a.slice(1));let b=c.url.toString().includes("?")?"&":"?";c.url=c.url+b+a}else{let a=c.url instanceof URL?c.url:new URL(c.url);for(let[b,d]of new URLSearchParams(c.params))a.searchParams.append(b,d);c.url=a}"number"==typeof a.maxContentLength&&(c.size=a.maxContentLength),"number"==typeof a.maxRedirects&&(c.follow=a.maxRedirects);let e="string"==typeof c.data||c.data instanceof ArrayBuffer||c.data instanceof Blob||globalThis.File&&c.data instanceof File||c.data instanceof FormData||c.data instanceof j.Readable||c.data instanceof ReadableStream||c.data instanceof String||c.data instanceof URLSearchParams||ArrayBuffer.isView(c.data)||["Blob","File","FormData"].includes(c.data?.constructor?.name||"");if(c.multipart?.length){let a=await l();b.set("content-type",`multipart/related; boundary=${a}`),c.body=j.Readable.from(this.getMultipartRequest(c.multipart,a))}else e?c.body=c.data:"object"==typeof c.data?"application/x-www-form-urlencoded"===b.get("Content-Type")?c.body=c.paramsSerializer?c.paramsSerializer(c.data):new URLSearchParams(c.data):(b.has("content-type")||b.set("content-type","application/json"),c.body=JSON.stringify(c.data)):c.data&&(c.body=c.data);c.validateStatus=c.validateStatus||this.validateStatus,c.responseType=c.responseType||"unknown",b.has("accept")||"json"!==c.responseType||b.set("accept","application/json");let i=c.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(c.agent);else if(i&&this.#l(c.url,c.noProxy)){let a=await d.#m();this.agentCache.has(i)?c.agent=this.agentCache.get(i):(c.agent=new a(i,{cert:c.cert,key:c.key}),this.agentCache.set(i,c.agent))}else c.cert&&c.key&&(this.agentCache.has(c.key)?c.agent=this.agentCache.get(c.key):(c.agent=new g.Agent({cert:c.cert,key:c.key}),this.agentCache.set(c.key,c.agent)));return"function"!=typeof c.errorRedactor&&!1!==c.errorRedactor&&(c.errorRedactor=h.defaultErrorRedactor),!c.body||"duplex"in c||(c.duplex="half"),this.#k(c),Object.assign(c,{headers:b,url:c.url instanceof URL?c.url:new URL(c.url)})}#k(a){if(a.timeout){let b=AbortSignal.timeout(a.timeout);a.signal&&!a.signal.aborted?a.signal=AbortSignal.any([a.signal,b]):a.signal=b}}validateStatus(a){return a>=200&&a<300}async getResponseDataFromContentType(a){let b=a.headers.get("Content-Type");if(null===b)return a.text();if((b=b.toLowerCase()).includes("application/json")){let b=await a.text();try{b=JSON.parse(b)}catch{}return b}return b.match(/^text\//)?a.text():a.blob()}async *getMultipartRequest(a,b){let c=`--${b}--`;for(let c of a){let a=c.headers.get("Content-Type")||"application/octet-stream",d=`--${b}\r
Content-Type: ${a}\r
\r
`;yield d,"string"==typeof c.content?yield c.content:yield*c.content,yield"\r\n"}yield c}static #n;static #o;static async #m(){return this.#n||=(await c.e(154).then(c.t.bind(c,58154,23))).HttpsProxyAgent,this.#n}static async #j(){let a="undefined"!=typeof window&&!!window;return this.#o||=a?window.fetch:(await c.e(973).then(c.bind(c,90973))).default,this.#o}static mergeHeaders(a,...b){for(let c of(a=a instanceof Headers?a:new Headers(a),b))(c instanceof Headers?c:new Headers(c)).forEach((b,c)=>{"set-cookie"===c?a.append(c,b):a.set(c,b)});return a}}b.Gaxios=m,d=m},20430:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(12973),e=c(38330),f=c(96074),g=c(491),h=c(38041),i=c(73497),j=c(99968),k=c(72065),l=c(69969),m=c(43923),n=c(72487),o=c(5808),p=c(6470),q=c(83819),r=c(261),s=c(39602),t=c(48159),u=c(26713),v=c(62499),w=c(67264),x=c(37268),y=c(18973),z=c(39755),A=c(40313),B=c(86439),C=c(14375),D=c.n(C),E=c(99571),F=c(10114),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,50828)),"/Users/admin/project/smartbill/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,83751)),"/Users/admin/project/smartbill/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,14375,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,48999,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,86114,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,73469,23)),"next/dist/client/components/builtin/unauthorized.js"]}],I=["/Users/admin/project/smartbill/app/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},21712:(a,b,c)=>{var d=c(79428),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=d:(f(d,b),b.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},21820:a=>{"use strict";a.exports=require("os")},24272:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdentityPoolClient=void 0;let d=c(86),e=c(74072),f=c(33712),g=c(86655),h=c(6029),i=c(56963),j=c(32842);class k extends d.BaseExternalAccountClient{subjectTokenSupplier;constructor(a){super(a);let b=(0,e.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("subject_token_supplier");if(!c&&!d)throw Error("A credential source or subject token supplier must be specified.");if(c&&d)throw Error("Only one of credential source or subject token supplier can be specified.");if(d)this.subjectTokenSupplier=d,this.credentialSourceType="programmatic";else{let a=(0,e.originalOrCamelOptions)(c),b=(0,e.originalOrCamelOptions)(a.get("format")),d=b.get("type")||"text",i=b.get("subject_token_field_name");if("json"!==d&&"text"!==d)throw Error(`Invalid credential_source format "${d}"`);if("json"===d&&!i)throw Error("Missing subject_token_field_name for JSON credential_source format");let j=a.get("file"),l=a.get("url"),m=a.get("certificate"),n=a.get("headers");if(j&&l||l&&m||j&&m)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(j)this.credentialSourceType="file",this.subjectTokenSupplier=new f.FileSubjectTokenSupplier({filePath:j,formatType:d,subjectTokenFieldName:i});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new g.UrlSubjectTokenSupplier({url:l,formatType:d,subjectTokenFieldName:i,headers:n,additionalGaxiosOptions:k.RETRY_CONFIG});else if(m){this.credentialSourceType="certificate";let a=new h.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:m.use_default_certificate_config,certificateConfigLocation:m.certificate_config_location,trustChainPath:m.trust_chain_path});this.subjectTokenSupplier=a}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let a=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof h.CertificateSubjectTokenSupplier){let a=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new i.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new j.Gaxios({agent:a})}),this.transporter=new j.Gaxios({...this.transporter.defaults||{},agent:a})}return a}}b.IdentityPoolClient=k},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29364:(a,b,c)=>{"use strict";a.exports=c(12973).vendored["react-rsc"].ReactServerDOMWebpackServer},29518:(a,b,c)=>{"use strict";var d=c(28354),e=c(34972),f={stream:!0},g=Object.prototype.hasOwnProperty,h=new Map;function i(a){var b=globalThis.__next_require__(a);return"function"!=typeof b.then||"fulfilled"===b.status?null:(b.then(function(a){b.status="fulfilled",b.value=a},function(a){b.status="rejected",b.reason=a}),b)}function j(){}function k(a){for(var b=a[1],d=[],e=0;e<b.length;){var f=b[e++];b[e++];var g=h.get(f);if(void 0===g){g=c.e(f),d.push(g);var k=h.set.bind(h,f,null);g.then(k,j),h.set(f,g)}else null!==g&&d.push(g)}return 4===a.length?0===d.length?i(a[0]):Promise.all(d).then(function(){return i(a[0])}):0<d.length?Promise.all(d):null}function l(a){var b=globalThis.__next_require__(a[0]);if(4===a.length&&"function"==typeof b.then)if("fulfilled"===b.status)b=b.value;else throw b.reason;return"*"===a[2]?b:""===a[2]?b.__esModule?b.default:b:g.call(b,a[2])?b[a[2]]:void 0}var m=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,n=Symbol.for("react.transitional.element"),o=Symbol.for("react.lazy"),p=Symbol.iterator,q=Symbol.asyncIterator,r=Array.isArray,s=Object.getPrototypeOf,t=Object.prototype,u=new WeakMap;function v(a,b,c,d,e){function f(a,c){c=new Blob([new Uint8Array(c.buffer,c.byteOffset,c.byteLength)]);var d=i++;return null===k&&(k=new FormData),k.append(b+d,c),"$"+a+d.toString(16)}function g(a,v){if(null===v)return null;if("object"==typeof v){switch(v.$$typeof){case n:if(void 0!==c&&-1===a.indexOf(":")){var w,x,y,z,A,B=l.get(this);if(void 0!==B)return c.set(B+":"+a,v),"$T"}throw Error("React Element cannot be passed to Server Functions from the Client without a temporary reference set. Pass a TemporaryReferenceSet to the options.");case o:B=v._payload;var C=v._init;null===k&&(k=new FormData),j++;try{var D=C(B),E=i++,F=h(D,E);return k.append(b+E,F),"$"+E.toString(16)}catch(a){if("object"==typeof a&&null!==a&&"function"==typeof a.then){j++;var G=i++;return B=function(){try{var a=h(v,G),c=k;c.append(b+G,a),j--,0===j&&d(c)}catch(a){e(a)}},a.then(B,B),"$"+G.toString(16)}return e(a),null}finally{j--}}if(B=l.get(v),"function"==typeof v.then){if(void 0!==B)if(m!==v)return B;else m=null;null===k&&(k=new FormData),j++;var H=i++;return a="$@"+H.toString(16),l.set(v,a),v.then(function(a){try{var c=l.get(a),f=void 0!==c?JSON.stringify(c):h(a,H);(a=k).append(b+H,f),j--,0===j&&d(a)}catch(a){e(a)}},e),a}if(void 0!==B)if(m!==v)return B;else m=null;else -1===a.indexOf(":")&&void 0!==(B=l.get(this))&&(a=B+":"+a,l.set(v,a),void 0!==c&&c.set(a,v));if(r(v))return v;if(v instanceof FormData){null===k&&(k=new FormData);var I=k,J=b+(a=i++)+"_";return v.forEach(function(a,b){I.append(J+b,a)}),"$K"+a.toString(16)}if(v instanceof Map)return a=i++,B=h(Array.from(v),a),null===k&&(k=new FormData),k.append(b+a,B),"$Q"+a.toString(16);if(v instanceof Set)return a=i++,B=h(Array.from(v),a),null===k&&(k=new FormData),k.append(b+a,B),"$W"+a.toString(16);if(v instanceof ArrayBuffer)return a=new Blob([v]),B=i++,null===k&&(k=new FormData),k.append(b+B,a),"$A"+B.toString(16);if(v instanceof Int8Array)return f("O",v);if(v instanceof Uint8Array)return f("o",v);if(v instanceof Uint8ClampedArray)return f("U",v);if(v instanceof Int16Array)return f("S",v);if(v instanceof Uint16Array)return f("s",v);if(v instanceof Int32Array)return f("L",v);if(v instanceof Uint32Array)return f("l",v);if(v instanceof Float32Array)return f("G",v);if(v instanceof Float64Array)return f("g",v);if(v instanceof BigInt64Array)return f("M",v);if(v instanceof BigUint64Array)return f("m",v);if(v instanceof DataView)return f("V",v);if("function"==typeof Blob&&v instanceof Blob)return null===k&&(k=new FormData),a=i++,k.append(b+a,v),"$B"+a.toString(16);if(a=null===(w=v)||"object"!=typeof w?null:"function"==typeof(w=p&&w[p]||w["@@iterator"])?w:null)return(B=a.call(v))===v?(a=i++,B=h(Array.from(B),a),null===k&&(k=new FormData),k.append(b+a,B),"$i"+a.toString(16)):Array.from(B);if("function"==typeof ReadableStream&&v instanceof ReadableStream)return function(a){try{var c,f,h,l,m,n,o,p=a.getReader({mode:"byob"})}catch(l){return c=a.getReader(),null===k&&(k=new FormData),f=k,j++,h=i++,c.read().then(function a(i){if(i.done)f.append(b+h,"C"),0==--j&&d(f);else try{var k=JSON.stringify(i.value,g);f.append(b+h,k),c.read().then(a,e)}catch(a){e(a)}},e),"$R"+h.toString(16)}return l=p,null===k&&(k=new FormData),m=k,j++,n=i++,o=[],l.read(new Uint8Array(1024)).then(function a(c){c.done?(c=i++,m.append(b+c,new Blob(o)),m.append(b+n,'"$o'+c.toString(16)+'"'),m.append(b+n,"C"),0==--j&&d(m)):(o.push(c.value),l.read(new Uint8Array(1024)).then(a,e))},e),"$r"+n.toString(16)}(v);if("function"==typeof(a=v[q]))return x=v,y=a.call(v),null===k&&(k=new FormData),z=k,j++,A=i++,x=x===y,y.next().then(function a(c){if(c.done){if(void 0===c.value)z.append(b+A,"C");else try{var f=JSON.stringify(c.value,g);z.append(b+A,"C"+f)}catch(a){e(a);return}0==--j&&d(z)}else try{var h=JSON.stringify(c.value,g);z.append(b+A,h),y.next().then(a,e)}catch(a){e(a)}},e),"$"+(x?"x":"X")+A.toString(16);if((a=s(v))!==t&&(null===a||null!==s(a))){if(void 0===c)throw Error("Only plain objects, and a few built-ins, can be passed to Server Functions. Classes or null prototypes are not supported.");return"$T"}return v}if("string"==typeof v)return"Z"===v[v.length-1]&&this[a]instanceof Date?"$D"+v:a="$"===v[0]?"$"+v:v;if("boolean"==typeof v)return v;if("number"==typeof v)return Number.isFinite(v)?0===v&&-1/0==1/v?"$-0":v:1/0===v?"$Infinity":-1/0===v?"$-Infinity":"$NaN";if(void 0===v)return"$undefined";if("function"==typeof v){if(void 0!==(B=u.get(v)))return a=JSON.stringify({id:B.id,bound:B.bound},g),null===k&&(k=new FormData),B=i++,k.set(b+B,a),"$h"+B.toString(16);if(void 0!==c&&-1===a.indexOf(":")&&void 0!==(B=l.get(this)))return c.set(B+":"+a,v),"$T";throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof v){if(void 0!==c&&-1===a.indexOf(":")&&void 0!==(B=l.get(this)))return c.set(B+":"+a,v),"$T";throw Error("Symbols cannot be passed to a Server Function without a temporary reference set. Pass a TemporaryReferenceSet to the options.")}if("bigint"==typeof v)return"$n"+v.toString(10);throw Error("Type "+typeof v+" is not supported as an argument to a Server Function.")}function h(a,b){return"object"==typeof a&&null!==a&&(b="$"+b.toString(16),l.set(a,b),void 0!==c&&c.set(b,a)),m=a,JSON.stringify(a,g)}var i=1,j=0,k=null,l=new WeakMap,m=a,v=h(a,0);return null===k?d(v):(k.set(b+"0",v),0===j&&d(k)),function(){0<j&&(j=0,null===k?d(v):d(k))}}var w=new WeakMap;function x(a){var b=u.get(this);if(!b)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var c=null;if(null!==b.bound){if((c=w.get(b))||(d={id:b.id,bound:b.bound},g=new Promise(function(a,b){e=a,f=b}),v(d,"",void 0,function(a){if("string"==typeof a){var b=new FormData;b.append("0",a),a=b}g.status="fulfilled",g.value=a,e(a)},function(a){g.status="rejected",g.reason=a,f(a)}),c=g,w.set(b,c)),"rejected"===c.status)throw c.reason;if("fulfilled"!==c.status)throw c;b=c.value;var d,e,f,g,h=new FormData;b.forEach(function(b,c){h.append("$ACTION_"+a+":"+c,b)}),c=h,b="$ACTION_REF_"+a}else b="$ACTION_ID_"+b.id;return{name:b,method:"POST",encType:"multipart/form-data",data:c}}function y(a,b){var c=u.get(this);if(!c)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(c.id!==a)return!1;var d=c.bound;if(null===d)return 0===b;switch(d.status){case"fulfilled":return d.value.length===b;case"pending":throw d;case"rejected":throw d.reason;default:throw"string"!=typeof d.status&&(d.status="pending",d.then(function(a){d.status="fulfilled",d.value=a},function(a){d.status="rejected",d.reason=a})),d}}function z(a,b,c,d){u.has(a)||(u.set(a,{id:b,originalBind:a.bind,bound:c}),Object.defineProperties(a,{$$FORM_ACTION:{value:void 0===d?x:function(){var a=u.get(this);if(!a)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var b=a.bound;return null===b&&(b=Promise.resolve([])),d(a.id,b)}},$$IS_SIGNATURE_EQUAL:{value:y},bind:{value:C}}))}var A=Function.prototype.bind,B=Array.prototype.slice;function C(){var a=u.get(this);if(!a)return A.apply(this,arguments);var b=a.originalBind.apply(this,arguments),c=B.call(arguments,1),d=null;return d=null!==a.bound?Promise.resolve(a.bound).then(function(a){return a.concat(c)}):Promise.resolve(c),u.set(b,{id:a.id,originalBind:b.bind,bound:d}),Object.defineProperties(b,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:y},bind:{value:C}}),b}function D(a,b,c){this.status=a,this.value=b,this.reason=c}function E(a){switch(a.status){case"resolved_model":P(a);break;case"resolved_module":Q(a)}switch(a.status){case"fulfilled":return a.value;case"pending":case"blocked":case"halted":throw a;default:throw a.reason}}function F(a,b){for(var c=0;c<a.length;c++){var d=a[c];"function"==typeof d?d(b):U(d,b)}}function G(a,b){for(var c=0;c<a.length;c++){var d=a[c];"function"==typeof d?d(b):V(d,b)}}function H(a,b){var c=b.handler.chunk;if(null===c)return null;if(c===a)return b.handler;if(null!==(b=c.value))for(c=0;c<b.length;c++){var d=b[c];if("function"!=typeof d&&null!==(d=H(a,d)))return d}return null}function I(a,b,c){switch(a.status){case"fulfilled":F(b,a.value);break;case"blocked":for(var d=0;d<b.length;d++){var e=b[d];if("function"!=typeof e){var f=H(a,e);if(null!==f)switch(U(e,f.value),b.splice(d,1),d--,null!==c&&-1!==(e=c.indexOf(e))&&c.splice(e,1),a.status){case"fulfilled":F(b,a.value);return;case"rejected":null!==c&&G(c,a.reason);return}}}case"pending":if(a.value)for(d=0;d<b.length;d++)a.value.push(b[d]);else a.value=b;if(a.reason){if(c)for(b=0;b<c.length;b++)a.reason.push(c[b])}else a.reason=c;break;case"rejected":c&&G(c,a.reason)}}function J(a,b,c){"pending"!==b.status&&"blocked"!==b.status?b.reason.error(c):(a=b.reason,b.status="rejected",b.reason=c,null!==a&&G(a,c))}function K(a,b,c){return new D("resolved_model",(c?'{"done":true,"value":':'{"done":false,"value":')+b+"}",a)}function L(a,b,c,d){M(a,b,(d?'{"done":true,"value":':'{"done":false,"value":')+c+"}")}function M(a,b,c){if("pending"!==b.status)b.reason.enqueueModel(c);else{var d=b.value,e=b.reason;b.status="resolved_model",b.value=c,b.reason=a,null!==d&&(P(b),I(b,d,e))}}function N(a,b,c){if("pending"===b.status||"blocked"===b.status){a=b.value;var d=b.reason;b.status="resolved_module",b.value=c,b.reason=null,null!==a&&(Q(b),I(b,a,d))}}D.prototype=Object.create(Promise.prototype),D.prototype.then=function(a,b){switch(this.status){case"resolved_model":P(this);break;case"resolved_module":Q(this)}switch(this.status){case"fulfilled":"function"==typeof a&&a(this.value);break;case"pending":case"blocked":"function"==typeof a&&(null===this.value&&(this.value=[]),this.value.push(a)),"function"==typeof b&&(null===this.reason&&(this.reason=[]),this.reason.push(b));break;case"halted":break;default:"function"==typeof b&&b(this.reason)}};var O=null;function P(a){var b=O;O=null;var c=a.value,d=a.reason;a.status="blocked",a.value=null,a.reason=null;try{var e=JSON.parse(c,d._fromJSON),f=a.value;if(null!==f&&(a.value=null,a.reason=null,F(f,e)),null!==O){if(O.errored)throw O.reason;if(0<O.deps){O.value=e,O.reason=null,O.chunk=a;return}}a.status="fulfilled",a.value=e,a.reason=null}catch(b){a.status="rejected",a.reason=b}finally{O=b}}function Q(a){try{var b=l(a.value);a.status="fulfilled",a.value=b,a.reason=null}catch(b){a.status="rejected",a.reason=b}}function R(a,b){a._closed=!0,a._closedReason=b,a._chunks.forEach(function(c){"pending"===c.status?J(a,c,b):"fulfilled"===c.status&&null!==c.reason&&c.reason.error(b)})}function S(a){return{$$typeof:o,_payload:a,_init:E}}function T(a,b){var c=a._chunks,d=c.get(b);return d||(d=a._closed?new D("rejected",null,a._closedReason):new D("pending",null,null),c.set(b,d)),d}function U(a,b){var c=a.response,d=a.handler,e=a.parentObject,f=a.key,g=a.map,h=a.path;try{for(var i=1;i<h.length;i++){for(;b.$$typeof===o;){var j=b._payload;if(j===d.chunk)b=d.value;else{switch(j.status){case"resolved_model":P(j);break;case"resolved_module":Q(j)}switch(j.status){case"fulfilled":b=j.value;continue;case"blocked":var k=H(j,a);if(null!==k){b=k.value;continue}case"pending":h.splice(0,i-1),null===j.value?j.value=[a]:j.value.push(a),null===j.reason?j.reason=[a]:j.reason.push(a);return;case"halted":return;default:V(a,j.reason);return}}}b=b[h[i]]}var l=g(c,b,e,f);if(e[f]=l,""===f&&null===d.value&&(d.value=l),e[0]===n&&"object"==typeof d.value&&null!==d.value&&d.value.$$typeof===n){var m=d.value;"3"===f&&(m.props=l)}}catch(b){V(a,b);return}d.deps--,0===d.deps&&null!==(a=d.chunk)&&"blocked"===a.status&&(b=a.value,a.status="fulfilled",a.value=d.value,a.reason=d.reason,null!==b&&F(b,d.value))}function V(a,b){var c=a.handler;a=a.response,c.errored||(c.errored=!0,c.value=null,c.reason=b,null!==(c=c.chunk)&&"blocked"===c.status&&J(a,c,b))}function W(a,b,c,d,e,f){if(O){var g=O;g.deps++}else g=O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1};return b={response:d,handler:g,parentObject:b,key:c,map:e,path:f},null===a.value?a.value=[b]:a.value.push(b),null===a.reason?a.reason=[b]:a.reason.push(b),null}function X(a,b,c,d){if(!a._serverReferenceConfig)return function(a,b,c){function d(){var a=Array.prototype.slice.call(arguments);return f?"fulfilled"===f.status?b(e,f.value.concat(a)):Promise.resolve(f).then(function(c){return b(e,c.concat(a))}):b(e,a)}var e=a.id,f=a.bound;return z(d,e,f,c),d}(b,a._callServer,a._encodeFormAction);var e=function(a,b){var c="",d=a[b];if(d)c=d.name;else{var e=b.lastIndexOf("#");if(-1!==e&&(c=b.slice(e+1),d=a[b.slice(0,e)]),!d)throw Error('Could not find the module "'+b+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return d.async?[d.id,d.chunks,c,1]:[d.id,d.chunks,c]}(a._serverReferenceConfig,b.id),f=k(e);if(f)b.bound&&(f=Promise.all([f,b.bound]));else{if(!b.bound)return z(f=l(e),b.id,b.bound,a._encodeFormAction),f;f=Promise.resolve(b.bound)}if(O){var g=O;g.deps++}else g=O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1};return f.then(function(){var f=l(e);if(b.bound){var h=b.bound.value.slice(0);h.unshift(null),f=f.bind.apply(f,h)}z(f,b.id,b.bound,a._encodeFormAction),c[d]=f,""===d&&null===g.value&&(g.value=f),c[0]===n&&"object"==typeof g.value&&null!==g.value&&g.value.$$typeof===n&&(h=g.value,"3"===d)&&(h.props=f),g.deps--,0===g.deps&&null!==(f=g.chunk)&&"blocked"===f.status&&(h=f.value,f.status="fulfilled",f.value=g.value,f.reason=null,null!==h&&F(h,g.value))},function(b){if(!g.errored){g.errored=!0,g.value=null,g.reason=b;var c=g.chunk;null!==c&&"blocked"===c.status&&J(a,c,b)}}),null}function Y(a,b,c,d,e){var f=parseInt((b=b.split(":"))[0],16);switch((f=T(a,f)).status){case"resolved_model":P(f);break;case"resolved_module":Q(f)}switch(f.status){case"fulfilled":var g=f.value;for(f=1;f<b.length;f++){for(;g.$$typeof===o;){switch((g=g._payload).status){case"resolved_model":P(g);break;case"resolved_module":Q(g)}switch(g.status){case"fulfilled":g=g.value;break;case"blocked":case"pending":return W(g,c,d,a,e,b.slice(f-1));case"halted":return O?(a=O,a.deps++):O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1},null;default:return O?(O.errored=!0,O.value=null,O.reason=g.reason):O={parent:null,chunk:null,value:null,reason:g.reason,deps:0,errored:!0},null}}g=g[b[f]]}return e(a,g,c,d);case"pending":case"blocked":return W(f,c,d,a,e,b);case"halted":return O?(a=O,a.deps++):O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1},null;default:return O?(O.errored=!0,O.value=null,O.reason=f.reason):O={parent:null,chunk:null,value:null,reason:f.reason,deps:0,errored:!0},null}}function Z(a,b){return new Map(b)}function $(a,b){return new Set(b)}function _(a,b){return new Blob(b.slice(1),{type:b[0]})}function aa(a,b){a=new FormData;for(var c=0;c<b.length;c++)a.append(b[c][0],b[c][1]);return a}function ab(a,b){return b[Symbol.iterator]()}function ac(a,b){return b}function ad(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function ae(a,b,c,e,f,g,h){var i,j=new Map;this._bundlerConfig=a,this._serverReferenceConfig=b,this._moduleLoading=c,this._callServer=void 0!==e?e:ad,this._encodeFormAction=f,this._nonce=g,this._chunks=j,this._stringDecoder=new d.TextDecoder,this._fromJSON=null,this._closed=!1,this._closedReason=null,this._tempRefs=h,this._fromJSON=(i=this,function(a,b){if("string"==typeof b){var c=i,d=this,e=a,f=b;if("$"===f[0]){if("$"===f)return null!==O&&"0"===e&&(O={parent:O,chunk:null,value:null,reason:null,deps:0,errored:!1}),n;switch(f[1]){case"$":return f.slice(1);case"L":return S(c=T(c,d=parseInt(f.slice(2),16)));case"@":return T(c,d=parseInt(f.slice(2),16));case"S":return Symbol.for(f.slice(2));case"h":return Y(c,f=f.slice(2),d,e,X);case"T":if(d="$"+f.slice(2),null==(c=c._tempRefs))throw Error("Missing a temporary reference set but the RSC response returned a temporary reference. Pass a temporaryReference option with the set that was used with the reply.");return c.get(d);case"Q":return Y(c,f=f.slice(2),d,e,Z);case"W":return Y(c,f=f.slice(2),d,e,$);case"B":return Y(c,f=f.slice(2),d,e,_);case"K":return Y(c,f=f.slice(2),d,e,aa);case"Z":return al();case"i":return Y(c,f=f.slice(2),d,e,ab);case"I":return 1/0;case"-":return"$-0"===f?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(f.slice(2)));case"n":return BigInt(f.slice(2));default:return Y(c,f=f.slice(1),d,e,ac)}}return f}if("object"==typeof b&&null!==b){if(b[0]===n){if(a={$$typeof:n,type:b[1],key:b[2],ref:null,props:b[3]},null!==O){if(O=(b=O).parent,b.errored)a=S(a=new D("rejected",null,b.reason));else if(0<b.deps){var g=new D("blocked",null,null);b.value=a,b.chunk=g,a=S(g)}}}else a=b;return a}return b})}function af(){return{_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]}}function ag(a,b,c){var d=(a=a._chunks).get(b);d&&"pending"!==d.status?d.reason.enqueueValue(c):a.set(b,new D("fulfilled",c,null))}function ah(a,b,c,d){var e=a._chunks;(a=e.get(b))?"pending"===a.status&&(b=a.value,a.status="fulfilled",a.value=c,a.reason=d,null!==b&&F(b,a.value)):e.set(b,new D("fulfilled",c,d))}function ai(a,b,c){var d=null,e=!1;c=new ReadableStream({type:c,start:function(a){d=a}});var f=null;ah(a,b,c,{enqueueValue:function(a){null===f?d.enqueue(a):f.then(function(){d.enqueue(a)})},enqueueModel:function(b){if(null===f){var c=new D("resolved_model",b,a);P(c),"fulfilled"===c.status?d.enqueue(c.value):(c.then(function(a){return d.enqueue(a)},function(a){return d.error(a)}),f=c)}else{c=f;var e=new D("pending",null,null);e.then(function(a){return d.enqueue(a)},function(a){return d.error(a)}),f=e,c.then(function(){f===e&&(f=null),M(a,e,b)})}},close:function(){if(!e)if(e=!0,null===f)d.close();else{var a=f;f=null,a.then(function(){return d.close()})}},error:function(a){if(!e)if(e=!0,null===f)d.error(a);else{var b=f;f=null,b.then(function(){return d.error(a)})}}})}function aj(){return this}function ak(a,b,c){var d=[],e=!1,f=0,g={};g[q]=function(){var a,b=0;return(a={next:a=function(a){if(void 0!==a)throw Error("Values cannot be passed to next() of AsyncIterables passed to Client Components.");if(b===d.length){if(e)return new D("fulfilled",{done:!0,value:void 0},null);d[b]=new D("pending",null,null)}return d[b++]}})[q]=aj,a},ah(a,b,c?g[q]():g,{enqueueValue:function(a){if(f===d.length)d[f]=new D("fulfilled",{done:!1,value:a},null);else{var b=d[f],c=b.value,e=b.reason;b.status="fulfilled",b.value={done:!1,value:a},b.reason=null,null!==c&&I(b,c,e)}f++},enqueueModel:function(b){f===d.length?d[f]=K(a,b,!1):L(a,d[f],b,!1),f++},close:function(b){if(!e)for(e=!0,f===d.length?d[f]=K(a,b,!0):L(a,d[f],b,!0),f++;f<d.length;)L(a,d[f++],'"$undefined"',!0)},error:function(b){if(!e)for(e=!0,f===d.length&&(d[f]=new D("pending",null,null));f<d.length;)J(a,d[f++],b)}})}function al(){var a=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.");return a.stack="Error: "+a.message,a}function am(a,b){for(var c=a.length,d=b.length,e=0;e<c;e++)d+=a[e].byteLength;d=new Uint8Array(d);for(var f=e=0;f<c;f++){var g=a[f];d.set(g,e),e+=g.byteLength}return d.set(b,e),d}function an(a,b,c,d,e,f){ag(a,b,e=new e((c=0===c.length&&0==d.byteOffset%f?d:am(c,d)).buffer,c.byteOffset,c.byteLength/f))}function ao(a,b,c,d){switch(c){case 73:var e=a,f=b,g=d,h=e._chunks,i=h.get(f);g=JSON.parse(g,e._fromJSON);var j=function(a,b){if(a){var c=a[b[0]];if(a=c&&c[b[2]])c=a.name;else{if(!(a=c&&c["*"]))throw Error('Could not find the module "'+b[0]+'" in the React Server Consumer Manifest. This is probably a bug in the React Server Components bundler.');c=b[2]}return 4===b.length?[a.id,a.chunks,c,1]:[a.id,a.chunks,c]}return b}(e._bundlerConfig,g);if(!function(a,b,c){if(null!==a)for(var d=1;d<b.length;d+=2){var e=m.d,f=e.X,g=a.prefix+b[d],h=a.crossOrigin;h="string"==typeof h?"use-credentials"===h?h:"":void 0,f.call(e,g,{crossOrigin:h,nonce:c})}}(e._moduleLoading,g[1],e._nonce),g=k(j)){if(i){var l=i;l.status="blocked"}else l=new D("blocked",null,null),h.set(f,l);g.then(function(){return N(e,l,j)},function(a){return J(e,l,a)})}else i?N(e,i,j):h.set(f,new D("resolved_module",j,null));break;case 72:switch(b=d[0],a=JSON.parse(d=d.slice(1),a._fromJSON),d=m.d,b){case"D":d.D(a);break;case"C":"string"==typeof a?d.C(a):d.C(a[0],a[1]);break;case"L":b=a[0],c=a[1],3===a.length?d.L(b,c,a[2]):d.L(b,c);break;case"m":"string"==typeof a?d.m(a):d.m(a[0],a[1]);break;case"X":"string"==typeof a?d.X(a):d.X(a[0],a[1]);break;case"S":"string"==typeof a?d.S(a):d.S(a[0],0===a[1]?void 0:a[1],3===a.length?a[2]:void 0);break;case"M":"string"==typeof a?d.M(a):d.M(a[0],a[1])}break;case 69:var n=(c=a._chunks).get(b);d=JSON.parse(d);var o=al();o.digest=d.digest,n?J(a,n,o):c.set(b,new D("rejected",null,o));break;case 84:(c=(a=a._chunks).get(b))&&"pending"!==c.status?c.reason.enqueueValue(d):a.set(b,new D("fulfilled",d,null));break;case 78:case 68:case 74:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");case 82:ai(a,b,void 0);break;case 114:ai(a,b,"bytes");break;case 88:ak(a,b,!1);break;case 120:ak(a,b,!0);break;case 67:(a=a._chunks.get(b))&&"fulfilled"===a.status&&a.reason.close(""===d?'"$undefined"':d);break;default:(n=(c=a._chunks).get(b))?M(a,n,d):c.set(b,new D("resolved_model",d,a))}}function ap(a,b,c){for(var d=0,e=b._rowState,g=b._rowID,h=b._rowTag,i=b._rowLength,j=b._buffer,k=c.length;d<k;){var l=-1;switch(e){case 0:58===(l=c[d++])?e=1:g=g<<4|(96<l?l-87:l-48);continue;case 1:84===(e=c[d])||65===e||79===e||111===e||85===e||83===e||115===e||76===e||108===e||71===e||103===e||77===e||109===e||86===e?(h=e,e=2,d++):64<e&&91>e||35===e||114===e||120===e?(h=e,e=3,d++):(h=0,e=3);continue;case 2:44===(l=c[d++])?e=4:i=i<<4|(96<l?l-87:l-48);continue;case 3:l=c.indexOf(10,d);break;case 4:(l=d+i)>c.length&&(l=-1)}var m=c.byteOffset+d;if(-1<l)(function(a,b,c,d,e){switch(c){case 65:ag(a,b,am(d,e).buffer);return;case 79:an(a,b,d,e,Int8Array,1);return;case 111:ag(a,b,0===d.length?e:am(d,e));return;case 85:an(a,b,d,e,Uint8ClampedArray,1);return;case 83:an(a,b,d,e,Int16Array,2);return;case 115:an(a,b,d,e,Uint16Array,2);return;case 76:an(a,b,d,e,Int32Array,4);return;case 108:an(a,b,d,e,Uint32Array,4);return;case 71:an(a,b,d,e,Float32Array,4);return;case 103:an(a,b,d,e,Float64Array,8);return;case 77:an(a,b,d,e,BigInt64Array,8);return;case 109:an(a,b,d,e,BigUint64Array,8);return;case 86:an(a,b,d,e,DataView,1);return}for(var g=a._stringDecoder,h="",i=0;i<d.length;i++)h+=g.decode(d[i],f);ao(a,b,c,h+=g.decode(e))})(a,g,h,j,i=new Uint8Array(c.buffer,m,l-d)),d=l,3===e&&d++,i=g=h=e=0,j.length=0;else{a=new Uint8Array(c.buffer,m,c.byteLength-d),j.push(a),i-=a.byteLength;break}}b._rowState=e,b._rowID=g,b._rowTag=h,b._rowLength=i}function aq(a){R(a,Error("Connection closed."))}function ar(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function as(a){return new ae(a.serverConsumerManifest.moduleMap,a.serverConsumerManifest.serverModuleMap,a.serverConsumerManifest.moduleLoading,ar,a.encodeFormAction,"string"==typeof a.nonce?a.nonce:void 0,a&&a.temporaryReferences?a.temporaryReferences:void 0)}function at(a,b){function c(b){R(a,b)}var d=af(),e=b.getReader();e.read().then(function b(f){var g=f.value;if(!f.done)return ap(a,d,g),e.read().then(b).catch(c);aq(a)}).catch(c)}function au(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}b.createFromFetch=function(a,b){var c=as(b);return a.then(function(a){at(c,a.body)},function(a){R(c,a)}),T(c,0)},b.createFromNodeStream=function(a,b,c){var d=new ae(b.moduleMap,b.serverModuleMap,b.moduleLoading,au,c?c.encodeFormAction:void 0,c&&"string"==typeof c.nonce?c.nonce:void 0,void 0),e=af();return a.on("data",function(a){if("string"==typeof a){for(var b=0,c=e._rowState,f=e._rowID,g=e._rowTag,h=e._rowLength,i=e._buffer,j=a.length;b<j;){var k=-1;switch(c){case 0:58===(k=a.charCodeAt(b++))?c=1:f=f<<4|(96<k?k-87:k-48);continue;case 1:84===(c=a.charCodeAt(b))||65===c||79===c||111===c||85===c||83===c||115===c||76===c||108===c||71===c||103===c||77===c||109===c||86===c?(g=c,c=2,b++):64<c&&91>c||114===c||120===c?(g=c,c=3,b++):(g=0,c=3);continue;case 2:44===(k=a.charCodeAt(b++))?c=4:h=h<<4|(96<k?k-87:k-48);continue;case 3:k=a.indexOf("\n",b);break;case 4:if(84!==g)throw Error("Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.");if(h<a.length||a.length>3*h)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.");k=a.length}if(-1<k){if(0<i.length)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.");ao(d,f,g,b=a.slice(b,k)),b=k,3===c&&b++,h=f=g=c=0,i.length=0}else if(a.length!==b)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.")}e._rowState=c,e._rowID=f,e._rowTag=g,e._rowLength=h}else ap(d,e,a)}),a.on("error",function(a){R(d,a)}),a.on("end",function(){return aq(d)}),T(d,0)},b.createFromReadableStream=function(a,b){return at(b=as(b),a),T(b,0)},b.createServerReference=function(a){function b(){var b=Array.prototype.slice.call(arguments);return ar(a,b)}return z(b,a,null,void 0),b},b.createTemporaryReferenceSet=function(){return new Map},b.encodeReply=function(a,b){return new Promise(function(c,d){var e=v(a,"",b&&b.temporaryReferences?b.temporaryReferences:void 0,c,d);if(b&&b.signal){var f=b.signal;if(f.aborted)e(f.reason);else{var g=function(){e(f.reason),f.removeEventListener("abort",g)};f.addEventListener("abort",g)}}})},b.registerServerReference=function(a,b,c){return z(a,b,null,c),a}},29742:(a,b,c)=>{"use strict";c(40443);let{Duplex:d}=c(27910);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}a.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._final(b)});null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._write(b,c,d)});a.send(b,d)},h.on("end",f),h.on("error",g),h}},30996:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IAMAuth=void 0;class c{selector;token;constructor(a,b){this.selector=a,this.token=b,this.selector=a,this.token=b}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}b.IAMAuth=c},31185:()=>{},31240:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LoginTicket=void 0;class c{envelope;payload;constructor(a,b){this.envelope=a,this.payload=b}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let a=this.getPayload();return a&&a.sub?a.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}b.LoginTicket=c},32842:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.instance=b.Gaxios=b.GaxiosError=void 0,b.request=h;let f=c(20321);Object.defineProperty(b,"Gaxios",{enumerable:!0,get:function(){return f.Gaxios}});var g=c(81101);async function h(a){return b.instance.request(a)}Object.defineProperty(b,"GaxiosError",{enumerable:!0,get:function(){return g.GaxiosError}}),e(c(85731),b),b.instance=new f.Gaxios},32934:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{Postpone:function(){return A},PreludeState:function(){return V},abortAndThrowOnSynchronousRequestDataAccess:function(){return x},abortOnSynchronousPlatformIOAccess:function(){return v},accessedDynamicData:function(){return I},annotateDynamicAccess:function(){return N},consumeDynamicAccess:function(){return J},createDynamicTrackingState:function(){return o},createDynamicValidationState:function(){return p},createHangingInputAbortSignal:function(){return M},createRenderInBrowserAbortSignal:function(){return L},delayUntilRuntimeStage:function(){return Y},formatDynamicAPIAccesses:function(){return K},getFirstDynamicReason:function(){return q},isDynamicPostpone:function(){return D},isPrerenderInterruptedError:function(){return H},logDisallowedDynamicError:function(){return W},markCurrentScopeAsDynamic:function(){return r},postponeWithTracking:function(){return B},throwIfDisallowedDynamic:function(){return X},throwToInterruptStaticGeneration:function(){return s},trackAllowedDynamicAccess:function(){return U},trackDynamicDataInDynamicRender:function(){return t},trackSynchronousPlatformIOAccessInDev:function(){return w},trackSynchronousRequestDataAccessInDev:function(){return z},useDynamicRouteParams:function(){return O},warnOnSyncDynamicError:function(){return y}});let d=function(a){return a&&a.__esModule?a:{default:a}}(c(70043)),e=c(82490),f=c(59486),g=c(63033),h=c(29294),i=c(543),j=c(99786),k=c(46826),l=c(74493),m=c(83427),n="function"==typeof d.default.unstable_postpone;function o(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function p(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function q(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function r(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return B(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new e.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function s(a,b,c){let d=Object.defineProperty(new e.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function t(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function u(a,b,c){let d=G(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function v(a,b,c,d){let e=d.dynamicTracking;u(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function w(a){a.prerenderPhase=!1}function x(a,b,c,d){if(!1===d.controller.signal.aborted){u(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw G(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function y(a){a.syncDynamicErrorWithStack&&console.error(a.syncDynamicErrorWithStack)}let z=w;function A({reason:a,route:b}){let c=g.workUnitAsyncStorage.getStore();B(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function B(a,b,c){(function(){if(!n)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),d.default.unstable_postpone(C(a,b))}function C(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function D(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&E(a.message)}function E(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===E(C("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let F="NEXT_PRERENDER_INTERRUPTED";function G(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=F,b}function H(a){return"object"==typeof a&&null!==a&&a.digest===F&&"name"in a&&"message"in a&&a instanceof Error}function I(a){return a.length>0}function J(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function K(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function L(){let a=new AbortController;return a.abort(Object.defineProperty(new l.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function M(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,g.getRuntimeStagePromise)(a);c?c.then(()=>(0,k.scheduleOnNextTick)(()=>b.abort())):(0,k.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function N(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function O(a){let b=h.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let e=c.fallbackRouteParams;e&&e.size>0&&d.default.use((0,i.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return B(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new m.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new m.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}let P=/\n\s+at Suspense \(<anonymous>\)/,Q=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${j.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),R=RegExp(`\\n\\s+at ${j.METADATA_BOUNDARY_NAME}[\\n\\s]`),S=RegExp(`\\n\\s+at ${j.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),T=RegExp(`\\n\\s+at ${j.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function U(a,b,c,d){if(!T.test(b)){if(R.test(b)){c.hasDynamicMetadata=!0;return}if(S.test(b)){c.hasDynamicViewport=!0;return}if(Q.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(P.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=function(a,b){let c=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.stack=c.name+": "+a+b,c}(`Route "${a.route}": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a "use cache" above it. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`,b);return void c.dynamicErrors.push(e)}}}var V=function(a){return a[a.Full=0]="Full",a[a.Empty=1]="Empty",a[a.Errored=2]="Errored",a}({});function W(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function X(a,b,c,d){if(0!==b){if(c.hasSuspenseAboveBody)return;if(d.syncDynamicErrorWithStack)throw W(a,d.syncDynamicErrorWithStack),new f.StaticGenBailoutError;let e=c.dynamicErrors;if(e.length>0){for(let b=0;b<e.length;b++)W(a,e[b]);throw new f.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new f.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new f.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new f.StaticGenBailoutError}function Y(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},33712:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FileSubjectTokenSupplier=void 0;let d=c(28354),e=c(29021),f=(0,d.promisify)(e.readFile??(()=>{})),g=(0,d.promisify)(e.realpath??(()=>{})),h=(0,d.promisify)(e.lstat??(()=>{}));class i{filePath;formatType;subjectTokenFieldName;constructor(a){this.filePath=a.filePath,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName}async getSubjectToken(){let a,b=this.filePath;try{if(b=await g(b),!(await h(b)).isFile())throw Error()}catch(a){throw a instanceof Error&&(a.message=`The file at ${b} does not exist, or it is not a file. ${a.message}`),a}let c=await f(b,{encoding:"utf8"});if("text"===this.formatType?a=c:"json"===this.formatType&&this.subjectTokenFieldName&&(a=JSON.parse(c)[this.subjectTokenFieldName]),!a)throw Error("Unable to parse the subject_token from the credential_source file");return a}}b.FileSubjectTokenSupplier=i},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},34947:(a,b)=>{"use strict";b.byteLength=function(a){var b=i(a),c=b[0],d=b[1];return(c+d)*3/4-d},b.toByteArray=function(a){var b,c,f=i(a),g=f[0],h=f[1],j=new e((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===h&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===h&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(function(a,b,d){for(var e,f=[],g=b;g<d;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,h=f.length;g<h;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function i(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}d[45]=62,d[95]=63},34972:(a,b,c)=>{"use strict";a.exports=c(12973).vendored["react-rsc"].ReactDOM},36968:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Colours=void 0;class c{static isEnabled(a){return a&&a.isTTY&&("function"!=typeof a.getColorDepth||a.getColorDepth()>2)}static refresh(){c.enabled=c.isEnabled(null==process?void 0:process.stderr),this.enabled?(c.reset="\x1b[0m",c.bright="\x1b[1m",c.dim="\x1b[2m",c.red="\x1b[31m",c.green="\x1b[32m",c.yellow="\x1b[33m",c.blue="\x1b[34m",c.magenta="\x1b[35m",c.cyan="\x1b[36m",c.white="\x1b[37m",c.grey="\x1b[90m"):(c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="")}}b.Colours=c,c.enabled=!1,c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="",c.refresh()},37067:a=>{"use strict";a.exports=require("node:http")},37254:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AuthClient=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=b.DEFAULT_UNIVERSE=void 0;let d=c(94735),e=c(32842),f=c(74072),g=c(18351),h=c(39576);b.DEFAULT_UNIVERSE="googleapis.com",b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class i extends d.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=b.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(a={}){super();let c=(0,f.originalOrCamelOptions)(a);this.apiKey=a.apiKey,this.projectId=c.get("project_id")??null,this.quotaProjectId=c.get("quota_project_id"),this.credentials=c.get("credentials")??{},this.universeDomain=c.get("universe_domain")??b.DEFAULT_UNIVERSE,this.transporter=a.transporter??new e.Gaxios(a.transporterOptions),!1!==c.get("useAuthRequestParameters")&&(this.transporter.interceptors.request.add(i.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(i.DEFAULT_RESPONSE_INTERCEPTOR)),a.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=a.forceRefreshOnFailure??!1}fetch(...a){let b,c=a[0],d=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&e.Gaxios.mergeHeaders(f,c.headers),d&&e.Gaxios.mergeHeaders(f,new Headers(d.headers)),"object"!=typeof c||c instanceof URL)?this.request({...d,headers:f,url:b}):this.request({...d,...c,headers:f,url:b})}setCredentials(a){this.credentials=a}addSharedMetadataHeaders(a){return!a.has("x-goog-user-project")&&this.quotaProjectId&&a.set("x-goog-user-project",this.quotaProjectId),a}addUserProjectAndAuthHeaders(a,b){let c=b.get("x-goog-user-project"),d=b.get("authorization");return c&&a.set("x-goog-user-project",c),d&&a.set("authorization",d),a}static log=(0,g.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async a=>{if(!a.headers.has("x-goog-api-client")){let b=process.version.replace(/^v/,"");a.headers.set("x-goog-api-client",`gl-node/${b}`)}let b=a.headers.get("User-Agent");b?b.includes(`${h.PRODUCT_NAME}/`)||a.headers.set("User-Agent",`${b} ${h.USER_AGENT}`):a.headers.set("User-Agent",h.USER_AGENT);try{let b=a[i.RequestMethodNameSymbol],c=`${Math.floor(1e3*Math.random())}`;a[i.RequestLogIdSymbol]=c;let d={url:a.url,headers:a.headers};b?i.log.info("%s [%s] request %j",b,c,d):i.log.info("[%s] request %j",c,d)}catch(a){}return a}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] response %j",c,d,a.data):i.log.info("[%s] response %j",d,a.data)}catch(a){}return a},rejected:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] error %j",c,d,a.response?.data):i.log.error("[%s] error %j",d,a.response?.data)}catch(a){}throw a}};static setMethodName(a,b){try{a[i.RequestMethodNameSymbol]=b}catch(a){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.AuthClient=i},37524:(a,b,c)=>{"use strict";let d,e,f,g,h;c.r(b),c.d(b,{"4067fceebfd7e2b123ff36154a916c24034c634741":()=>dB});var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al=c(96481);c(17613);var am=c(51424),an=c(29021);let ao=require("fs/promises");var ap=c(57075);let aq=require("node:stream/promises");c(29742),c(90001),c(67977);var ar=c(40443);c(181);var as=c(33873);class at{}function au(a,b){return a.replace(/\{([^}]+)\}/g,(a,c)=>{if(Object.prototype.hasOwnProperty.call(b,c)){let a=b[c];return null!=a?String(a):""}throw Error(`Key '${c}' not found in valueMap.`)})}function av(a,b,c){for(let d=0;d<b.length-1;d++){let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))if(Array.isArray(c))a[f]=Array.from({length:c.length},()=>({}));else throw Error(`Value must be a list given an array path ${e}`);if(Array.isArray(a[f])){let e=a[f];if(Array.isArray(c))for(let a=0;a<e.length;a++)av(e[a],b.slice(d+1),c[a]);else for(let a of e)av(a,b.slice(d+1),c)}return}if(e.endsWith("[0]")){let f=e.slice(0,-3);f in a||(a[f]=[{}]),av(a[f][0],b.slice(d+1),c);return}a[e]&&"object"==typeof a[e]||(a[e]={}),a=a[e]}let d=b[b.length-1],e=a[d];if(void 0!==e){if(!c||"object"==typeof c&&0===Object.keys(c).length||c===e)return;if("object"==typeof e&&"object"==typeof c&&null!==e&&null!==c)Object.assign(e,c);else throw Error(`Cannot set value for an existing key. Key: ${d}`)}else"_self"!==d||"object"!=typeof c||null===c||Array.isArray(c)?a[d]=c:Object.assign(a,c)}function aw(a,b,c){try{if(1===b.length&&"_self"===b[0])return a;for(let d=0;d<b.length;d++){if("object"!=typeof a||null===a)return c;let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))return c;{let e=a[f];if(!Array.isArray(e))return c;return e.map(a=>aw(a,b.slice(d+1),c))}}a=a[e]}return a}catch(a){if(a instanceof TypeError)return c;throw a}}function ax(a){if("string"!=typeof a)throw Error("fromImageBytes must be a string");return a}function ay(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata"]);null!=d&&av(b,["metadata"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["response"]);return null!=g&&av(b,["response"],function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["parent"]);null!=d&&av(b,["parent"],d);let e=aw(a,["documentName"]);return null!=e&&av(b,["documentName"],e),b}(g)),b}!function(a){a.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",a.OUTCOME_OK="OUTCOME_OK",a.OUTCOME_FAILED="OUTCOME_FAILED",a.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(i||(i={})),function(a){a.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",a.PYTHON="PYTHON"}(j||(j={})),function(a){a.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",a.SILENT="SILENT",a.WHEN_IDLE="WHEN_IDLE",a.INTERRUPT="INTERRUPT"}(k||(k={})),function(a){a.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",a.STRING="STRING",a.NUMBER="NUMBER",a.INTEGER="INTEGER",a.BOOLEAN="BOOLEAN",a.ARRAY="ARRAY",a.OBJECT="OBJECT",a.NULL="NULL"}(l||(l={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"}(m||(m={})),function(a){a.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",a.SIMPLE_SEARCH="SIMPLE_SEARCH",a.ELASTIC_SEARCH="ELASTIC_SEARCH"}(n||(n={})),function(a){a.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",a.NO_AUTH="NO_AUTH",a.API_KEY_AUTH="API_KEY_AUTH",a.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",a.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",a.OAUTH="OAUTH",a.OIDC_AUTH="OIDC_AUTH"}(o||(o={})),function(a){a.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",a.HTTP_IN_QUERY="HTTP_IN_QUERY",a.HTTP_IN_HEADER="HTTP_IN_HEADER",a.HTTP_IN_PATH="HTTP_IN_PATH",a.HTTP_IN_BODY="HTTP_IN_BODY",a.HTTP_IN_COOKIE="HTTP_IN_COOKIE"}(p||(p={})),function(a){a.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",a.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",a.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",a.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"}(q||(q={})),function(a){a.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH",a.MINIMAL="MINIMAL"}(r||(r={})),function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",a.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",a.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",a.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",a.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"}(s||(s={})),function(a){a.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",a.SEVERITY="SEVERITY",a.PROBABILITY="PROBABILITY"}(t||(t={})),function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE",a.OFF="OFF"}(u||(u={})),function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.IMAGE_SAFETY="IMAGE_SAFETY",a.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",a.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",a.NO_IMAGE="NO_IMAGE",a.IMAGE_RECITATION="IMAGE_RECITATION",a.IMAGE_OTHER="IMAGE_OTHER"}(v||(v={})),function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"}(w||(w={})),function(a){a.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",a.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",a.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",a.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",a.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(x||(x={})),function(a){a.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",a.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",a.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",a.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",a.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"}(y||(y={})),function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.IMAGE_SAFETY="IMAGE_SAFETY",a.MODEL_ARMOR="MODEL_ARMOR",a.JAILBREAK="JAILBREAK"}(z||(z={})),function(a){a.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",a.ON_DEMAND="ON_DEMAND",a.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(A||(A={})),function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.AUDIO="AUDIO"}(B||(B={})),function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}(C||(C={})),function(a){a.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",a.TUNING_MODE_FULL="TUNING_MODE_FULL",a.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"}(D||(D={})),function(a){a.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",a.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",a.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",a.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",a.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",a.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",a.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(E||(E={})),function(a){a.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",a.JOB_STATE_QUEUED="JOB_STATE_QUEUED",a.JOB_STATE_PENDING="JOB_STATE_PENDING",a.JOB_STATE_RUNNING="JOB_STATE_RUNNING",a.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",a.JOB_STATE_FAILED="JOB_STATE_FAILED",a.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",a.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",a.JOB_STATE_PAUSED="JOB_STATE_PAUSED",a.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",a.JOB_STATE_UPDATING="JOB_STATE_UPDATING",a.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(F||(F={})),function(a){a.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",a.TUNING_TASK_I2V="TUNING_TASK_I2V",a.TUNING_TASK_T2V="TUNING_TASK_T2V",a.TUNING_TASK_R2V="TUNING_TASK_R2V"}(G||(G={})),function(a){a.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",a.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",a.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",a.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",a.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"}(H||(H={})),function(a){a.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",a.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",a.BALANCED="BALANCED",a.PRIORITIZE_COST="PRIORITIZE_COST"}(I||(I={})),function(a){a.UNSPECIFIED="UNSPECIFIED",a.BLOCKING="BLOCKING",a.NON_BLOCKING="NON_BLOCKING"}(J||(J={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"}(K||(K={})),function(a){a.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",a.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"}(L||(L={})),function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE",a.VALIDATED="VALIDATED"}(M||(M={})),function(a){a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"}(N||(N={})),function(a){a.DONT_ALLOW="DONT_ALLOW",a.ALLOW_ADULT="ALLOW_ADULT",a.ALLOW_ALL="ALLOW_ALL"}(O||(O={})),function(a){a.auto="auto",a.en="en",a.ja="ja",a.ko="ko",a.hi="hi",a.zh="zh",a.pt="pt",a.es="es"}(P||(P={})),function(a){a.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",a.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",a.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",a.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",a.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(Q||(Q={})),function(a){a.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",a.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",a.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",a.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(R||(R={})),function(a){a.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",a.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",a.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",a.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(S||(S={})),function(a){a.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",a.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",a.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",a.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",a.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",a.EDIT_MODE_STYLE="EDIT_MODE_STYLE",a.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",a.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(T||(T={})),function(a){a.FOREGROUND="FOREGROUND",a.BACKGROUND="BACKGROUND",a.PROMPT="PROMPT",a.SEMANTIC="SEMANTIC",a.INTERACTIVE="INTERACTIVE"}(U||(U={})),function(a){a.ASSET="ASSET",a.STYLE="STYLE"}(V||(V={})),function(a){a.INSERT="INSERT",a.REMOVE="REMOVE",a.REMOVE_STATIC="REMOVE_STATIC",a.OUTPAINT="OUTPAINT"}(W||(W={})),function(a){a.OPTIMIZED="OPTIMIZED",a.LOSSLESS="LOSSLESS"}(X||(X={})),function(a){a.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",a.PREFERENCE_TUNING="PREFERENCE_TUNING"}(Y||(Y={})),function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.STATE_PENDING="STATE_PENDING",a.STATE_ACTIVE="STATE_ACTIVE",a.STATE_FAILED="STATE_FAILED"}(Z||(Z={})),function(a){a.STATE_UNSPECIFIED="STATE_UNSPECIFIED",a.PROCESSING="PROCESSING",a.ACTIVE="ACTIVE",a.FAILED="FAILED"}($||($={})),function(a){a.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",a.UPLOADED="UPLOADED",a.GENERATED="GENERATED"}(_||(_={})),function(a){a.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.RESPONSE_REJECTED="RESPONSE_REJECTED",a.NEED_MORE_INPUT="NEED_MORE_INPUT"}(aa||(aa={})),function(a){a.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",a.TEXT="TEXT",a.IMAGE="IMAGE",a.VIDEO="VIDEO",a.AUDIO="AUDIO",a.DOCUMENT="DOCUMENT"}(ab||(ab={})),function(a){a.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",a.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",a.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"}(ac||(ac={})),function(a){a.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",a.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",a.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(ad||(ad={})),function(a){a.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",a.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",a.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(ae||(ae={})),function(a){a.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",a.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",a.NO_INTERRUPTION="NO_INTERRUPTION"}(af||(af={})),function(a){a.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",a.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",a.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(ag||(ag={})),function(a){a.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",a.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",a.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",a.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",a.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",a.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",a.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",a.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",a.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",a.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",a.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",a.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",a.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(ah||(ah={})),function(a){a.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",a.QUALITY="QUALITY",a.DIVERSITY="DIVERSITY",a.VOCALIZATION="VOCALIZATION"}(ai||(ai={})),function(a){a.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",a.PLAY="PLAY",a.PAUSE="PAUSE",a.STOP="STOP",a.RESET_CONTEXT="RESET_CONTEXT"}(aj||(aj={}));class az{constructor(a){let b={};for(let c of a.headers.entries())b[c[0]]=c[1];this.headers=b,this.responseInternal=a}json(){return this.responseInternal.json()}}class aA{get text(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let i="",j=!1,k=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"text"!==b&&"thought"!==b&&"thoughtSignature"!==b&&(null!==c||void 0!==c)&&k.push(b);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;j=!0,i+=a.text}}return k.length>0&&console.warn(`there are non-text parts ${k} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),j?i:void 0}get data(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let i="",j=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"inlineData"!==b&&(null!==c||void 0!==c)&&j.push(b);a.inlineData&&"string"==typeof a.inlineData.data&&(i+=atob(a.inlineData.data))}return j.length>0&&console.warn(`there are non-data parts ${j} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}get functionCalls(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let i=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.functionCall).map(a=>a.functionCall).filter(a=>void 0!==a);if((null==i?void 0:i.length)!==0)return i}get executableCode(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.executableCode).map(a=>a.executableCode).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.code}get codeExecutionResult(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.codeExecutionResult).map(a=>a.codeExecutionResult).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.output}}class aB{}class aC{}class aD{}class aE{}class aF{}class aG{}class aH{}class aI{}class aJ{}class aK{}class aL{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new aL;return Object.assign(c,b?function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata"]);null!=d&&av(b,["metadata"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["response"]);return null!=g&&av(b,["response"],function(a){let b={},c=aw(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["_self"]);return null!=c&&av(b,["video"],function(a){let b={},c=aw(a,["gcsUri"]);null!=c&&av(b,["uri"],c);let d=aw(a,["bytesBase64Encoded"]);null!=d&&av(b,["videoBytes"],ax(d));let e=aw(a,["mimeType"]);return null!=e&&av(b,["mimeType"],e),b}(c)),b})(a))),av(b,["generatedVideos"],a)}let d=aw(a,["raiMediaFilteredCount"]);null!=d&&av(b,["raiMediaFilteredCount"],d);let e=aw(a,["raiMediaFilteredReasons"]);return null!=e&&av(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a):function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata"]);null!=d&&av(b,["metadata"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["response","generateVideoResponse"]);return null!=g&&av(b,["response"],function(a){let b={},c=aw(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["video"]);return null!=c&&av(b,["video"],function(a){let b={},c=aw(a,["uri"]);null!=c&&av(b,["uri"],c);let d=aw(a,["encodedVideo"]);null!=d&&av(b,["videoBytes"],ax(d));let e=aw(a,["encoding"]);return null!=e&&av(b,["mimeType"],e),b}(c)),b})(a))),av(b,["generatedVideos"],a)}let d=aw(a,["raiMediaFilteredCount"]);null!=d&&av(b,["raiMediaFilteredCount"],d);let e=aw(a,["raiMediaFilteredReasons"]);return null!=e&&av(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a)),c}}class aM{}class aN{}class aO{}class aP{}class aQ{}class aR{}class aS{}class aT{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new aT;return Object.assign(c,function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata"]);null!=d&&av(b,["metadata"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["response"]);return null!=g&&av(b,["response"],function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["parent"]);null!=d&&av(b,["parent"],d);let e=aw(a,["documentName"]);return null!=e&&av(b,["documentName"],e),b}(g)),b}(a)),c}}class aU{}class aV{}class aW{}class aX{}class aY{get text(){var a,b,c;let d="",e=!1,f=[];for(let g of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(g))"text"!==a&&"thought"!==a&&null!==b&&f.push(a);if("string"==typeof g.text){if("boolean"==typeof g.thought&&g.thought)continue;e=!0,d+=g.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),e?d:void 0}get data(){var a,b,c;let d="",e=[];for(let f of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(f))"inlineData"!==a&&null!==b&&e.push(a);f.inlineData&&"string"==typeof f.inlineData.data&&(d+=atob(f.inlineData.data))}return e.length>0&&console.warn(`there are non-data parts ${e} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}}class aZ{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class a${_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new a$;return Object.assign(c,ay(a)),c}}function a_(a,b){if(!b||"string"!=typeof b)throw Error("model is required and must be a string");if(b.includes("..")||b.includes("?")||b.includes("&"))throw Error("invalid model parameter");if(a.isVertexAI())if(b.startsWith("publishers/")||b.startsWith("projects/")||b.startsWith("models/"))return b;else{if(!(b.indexOf("/")>=0))return`publishers/google/models/${b}`;let a=b.split("/",2);return`publishers/${a[0]}/models/${a[1]}`}return b.startsWith("models/")||b.startsWith("tunedModels/")?b:`models/${b}`}function a0(a,b){let c=a_(a,b);return c?c.startsWith("publishers/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/${c}`:c.startsWith("models/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/publishers/google/${c}`:c:""}function a1(a){return Array.isArray(a)?a.map(a=>a2(a)):[a2(a)]}function a2(a){if("object"==typeof a&&null!==a)return a;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof a}`)}function a3(a){let b=a2(a);if(b.mimeType&&b.mimeType.startsWith("image/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function a4(a){let b=a2(a);if(b.mimeType&&b.mimeType.startsWith("audio/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function a5(a){if(null==a)throw Error("PartUnion is required");if("object"==typeof a)return a;if("string"==typeof a)return{text:a};throw Error(`Unsupported part type: ${typeof a}`)}function a6(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("PartListUnion is required");return Array.isArray(a)?a.map(a=>a5(a)):[a5(a)]}function a7(a){return null!=a&&"object"==typeof a&&"parts"in a&&Array.isArray(a.parts)}function a8(a){return null!=a&&"object"==typeof a&&"functionCall"in a}function a9(a){return null!=a&&"object"==typeof a&&"functionResponse"in a}function ba(a){if(null==a)throw Error("ContentUnion is required");return a7(a)?a:{role:"user",parts:a6(a)}}function bb(a,b){if(!b)return[];if(a.isVertexAI()&&Array.isArray(b))return b.flatMap(a=>{let b=ba(a);return b.parts&&b.parts.length>0&&void 0!==b.parts[0].text?[b.parts[0].text]:[]});if(a.isVertexAI()){let a=ba(b);return a.parts&&a.parts.length>0&&void 0!==a.parts[0].text?[a.parts[0].text]:[]}return Array.isArray(b)?b.map(a=>ba(a)):[ba(b)]}function bc(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("contents are required");if(!Array.isArray(a)){if(a8(a)||a9(a))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ba(a)]}let b=[],c=[],d=a7(a[0]);for(let e of a){let a=a7(e);if(a!=d)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)b.push(e);else if(a8(e)||a9(e))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else c.push(e)}return d||b.push({role:"user",parts:a6(c)}),b}function bd(a){let b={},c=["items"],d=["anyOf"],e=["properties"];if(a.type&&a.anyOf)throw Error("type and anyOf cannot be both populated.");let f=a.anyOf;for(let[g,h]of(null!=f&&2==f.length&&("null"===f[0].type?(b.nullable=!0,a=f[1]):"null"===f[1].type&&(b.nullable=!0,a=f[0])),a.type instanceof Array&&function(a,b){a.includes("null")&&(b.nullable=!0);let c=a.filter(a=>"null"!==a);if(1===c.length)b.type=Object.values(l).includes(c[0].toUpperCase())?c[0].toUpperCase():l.TYPE_UNSPECIFIED;else for(let a of(b.anyOf=[],c))b.anyOf.push({type:Object.values(l).includes(a.toUpperCase())?a.toUpperCase():l.TYPE_UNSPECIFIED})}(a.type,b),Object.entries(a)))if(null!=h)if("type"==g){if("null"===h)throw Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;b.type=Object.values(l).includes(h.toUpperCase())?h.toUpperCase():l.TYPE_UNSPECIFIED}else if(c.includes(g))b[g]=bd(h);else if(d.includes(g)){let a=[];for(let c of h){if("null"==c.type){b.nullable=!0;continue}a.push(bd(c))}b[g]=a}else if(e.includes(g)){let a={};for(let[b,c]of Object.entries(h))a[b]=bd(c);b[g]=a}else{if("additionalProperties"===g)continue;b[g]=h}return b}function be(a){if("object"==typeof a)return a;if("string"==typeof a)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:a}}};throw Error(`Unsupported speechConfig type: ${typeof a}`)}function bf(a){if("multiSpeakerVoiceConfig"in a)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return a}function bg(a){if(a.functionDeclarations)for(let b of a.functionDeclarations)b.parameters&&(Object.keys(b.parameters).includes("$schema")?b.parametersJsonSchema||(b.parametersJsonSchema=b.parameters,delete b.parameters):b.parameters=bd(b.parameters)),b.response&&(Object.keys(b.response).includes("$schema")?b.responseJsonSchema||(b.responseJsonSchema=b.response,delete b.response):b.response=bd(b.response));return a}function bh(a){if(null==a)throw Error("tools is required");if(!Array.isArray(a))throw Error("tools is required and must be an array of Tools");let b=[];for(let c of a)b.push(c);return b}function bi(a,b){if("string"!=typeof b)throw Error("name must be a string");return function(a,b,c,d=1){let e=!b.startsWith(`${c}/`)&&b.split("/").length===d;if(a.isVertexAI())if(b.startsWith("projects/"))return b;else if(b.startsWith("locations/"))return`projects/${a.getProject()}/${b}`;else if(b.startsWith(`${c}/`))return`projects/${a.getProject()}/locations/${a.getLocation()}/${b}`;else if(e)return`projects/${a.getProject()}/locations/${a.getLocation()}/${c}/${b}`;else return b;return e?`${c}/${b}`:b}(a,b,"cachedContents")}function bj(a){switch(a){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return a}}function bk(a){return null!=a&&"object"==typeof a&&"video"in a}function bl(a){return null!=a&&"object"==typeof a&&"uri"in a}function bm(a){var b;let c;if(null!=a&&"object"==typeof a&&"name"in a&&(c=a.name),!bl(a)||void 0!==(c=a.uri)){if(!bk(a)||void 0!==(c=null==(b=a.video)?void 0:b.uri)){if("string"==typeof a&&(c=a),void 0===c)throw Error("Could not extract file name from the provided input.");if(c.startsWith("https://")){let a=c.split("files/")[1].match(/[a-z0-9]+/);if(null===a)throw Error(`Could not extract file name from URI ${c}`);c=a[0]}else c.startsWith("files/")&&(c=c.split("files/")[1]);return c}}}function bn(a,b){return a.isVertexAI()?b?"publishers/google/models":"models":b?"models":"tunedModels"}function bo(a){for(let d of["models","tunedModels","publisherModels"]){var b,c;if(b=a,c=d,null!==b&&"object"==typeof b&&c in b)return a[d]}return[]}function bp(a,b){let c;if("string"==typeof b)if(a.isVertexAI())if(b.startsWith("gs://"))c={format:"jsonl",gcsUri:[b]};else if(b.startsWith("bq://"))c={format:"bigquery",bigqueryUri:b};else throw Error(`Unsupported string source for Vertex AI: ${b}`);else if(b.startsWith("files/"))c={fileName:b};else throw Error(`Unsupported string source for Gemini API: ${b}`);else if(Array.isArray(b)){if(a.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");c={inlinedRequests:b}}else c=b;let d=[c.gcsUri,c.bigqueryUri].filter(Boolean).length,e=[c.inlinedRequests,c.fileName].filter(Boolean).length;if(a.isVertexAI()){if(e>0||1!==d)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(d>0||1!==e)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return c}function bq(a){if("object"!=typeof a||null===a)return{};let b=a.inlinedResponses;if("object"!=typeof b||null===b)return a;let c=b.inlinedResponses;if(!Array.isArray(c)||0===c.length)return a;let d=!1;for(let a of c){if("object"!=typeof a||null===a)continue;let b=a.response;if("object"==typeof b&&null!==b&&void 0!==b.embedding){d=!0;break}}return d&&(a.inlinedEmbedContentResponses=a.inlinedResponses,delete a.inlinedResponses),a}function br(a,b){if(!a.isVertexAI()){if(/batches\/[^/]+$/.test(b))return b.split("/").pop();throw Error(`Invalid batch job name: ${b}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(b))return b.split("/").pop();if(/^\d+$/.test(b))return b;throw Error(`Invalid batch job name: ${b}.`)}function bs(a){if("BATCH_STATE_UNSPECIFIED"===a)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===a)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===a)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===a)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===a)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===a)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===a)return"JOB_STATE_EXPIRED";else return a}function bt(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata","displayName"]);null!=d&&av(b,["displayName"],d);let e=aw(a,["metadata","state"]);null!=e&&av(b,["state"],bs(e));let f=aw(a,["metadata","createTime"]);null!=f&&av(b,["createTime"],f);let g=aw(a,["metadata","endTime"]);null!=g&&av(b,["endTime"],g);let h=aw(a,["metadata","updateTime"]);null!=h&&av(b,["updateTime"],h);let i=aw(a,["metadata","model"]);null!=i&&av(b,["model"],i);let j=aw(a,["metadata","output"]);return null!=j&&av(b,["dest"],function(a){let b={},c=aw(a,["responsesFile"]);null!=c&&av(b,["fileName"],c);let d=aw(a,["inlinedResponses","inlinedResponses"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["response"]);null!=c&&av(b,["response"],function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["content"]);null!=c&&av(b,["content"],c);let d=aw(a,["citationMetadata"]);null!=d&&av(b,["citationMetadata"],function(a){let b={},c=aw(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["citations"],a)}return b}(d));let e=aw(a,["tokenCount"]);null!=e&&av(b,["tokenCount"],e);let f=aw(a,["finishReason"]);null!=f&&av(b,["finishReason"],f);let g=aw(a,["avgLogprobs"]);null!=g&&av(b,["avgLogprobs"],g);let h=aw(a,["groundingMetadata"]);null!=h&&av(b,["groundingMetadata"],h);let i=aw(a,["index"]);null!=i&&av(b,["index"],i);let j=aw(a,["logprobsResult"]);null!=j&&av(b,["logprobsResult"],j);let k=aw(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["safetyRatings"],a)}let l=aw(a,["urlContextMetadata"]);return null!=l&&av(b,["urlContextMetadata"],l),b})(a))),av(b,["candidates"],a)}let e=aw(a,["modelVersion"]);null!=e&&av(b,["modelVersion"],e);let f=aw(a,["promptFeedback"]);null!=f&&av(b,["promptFeedback"],f);let g=aw(a,["responseId"]);null!=g&&av(b,["responseId"],g);let h=aw(a,["usageMetadata"]);return null!=h&&av(b,["usageMetadata"],h),b}(c));let d=aw(a,["error"]);return null!=d&&av(b,["error"],d),b})(a))),av(b,["inlinedResponses"],a)}let e=aw(a,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["inlinedEmbedContentResponses"],a)}return b}(bq(j))),b}function bu(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["displayName"]);null!=d&&av(b,["displayName"],d);let e=aw(a,["state"]);null!=e&&av(b,["state"],bs(e));let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["createTime"]);null!=g&&av(b,["createTime"],g);let h=aw(a,["startTime"]);null!=h&&av(b,["startTime"],h);let i=aw(a,["endTime"]);null!=i&&av(b,["endTime"],i);let j=aw(a,["updateTime"]);null!=j&&av(b,["updateTime"],j);let k=aw(a,["model"]);null!=k&&av(b,["model"],k);let l=aw(a,["inputConfig"]);null!=l&&av(b,["src"],function(a){let b={},c=aw(a,["instancesFormat"]);null!=c&&av(b,["format"],c);let d=aw(a,["gcsSource","uris"]);null!=d&&av(b,["gcsUri"],d);let e=aw(a,["bigquerySource","inputUri"]);return null!=e&&av(b,["bigqueryUri"],e),b}(l));let m=aw(a,["outputConfig"]);null!=m&&av(b,["dest"],function(a){let b={},c=aw(a,["predictionsFormat"]);null!=c&&av(b,["format"],c);let d=aw(a,["gcsDestination","outputUriPrefix"]);null!=d&&av(b,["gcsUri"],d);let e=aw(a,["bigqueryDestination","outputUri"]);return null!=e&&av(b,["bigqueryUri"],e),b}(bq(m)));let n=aw(a,["completionStats"]);return null!=n&&av(b,["completionStats"],n),b}function bv(a){let b={},c=aw(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["mediaResolution"]);null!=c&&av(b,["mediaResolution"],c);let d=aw(a,["codeExecutionResult"]);null!=d&&av(b,["codeExecutionResult"],d);let e=aw(a,["executableCode"]);null!=e&&av(b,["executableCode"],e);let f=aw(a,["fileData"]);null!=f&&av(b,["fileData"],function(a){let b={};if(void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=aw(a,["fileUri"]);null!=c&&av(b,["fileUri"],c);let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(f));let g=aw(a,["functionCall"]);null!=g&&av(b,["functionCall"],function(a){let b={},c=aw(a,["id"]);null!=c&&av(b,["id"],c);let d=aw(a,["args"]);null!=d&&av(b,["args"],d);let e=aw(a,["name"]);if(null!=e&&av(b,["name"],e),void 0!==aw(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==aw(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=aw(a,["functionResponse"]);null!=h&&av(b,["functionResponse"],h);let i=aw(a,["inlineData"]);null!=i&&av(b,["inlineData"],function(a){let b={},c=aw(a,["data"]);if(null!=c&&av(b,["data"],c),void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(i));let j=aw(a,["text"]);null!=j&&av(b,["text"],j);let k=aw(a,["thought"]);null!=k&&av(b,["thought"],k);let l=aw(a,["thoughtSignature"]);null!=l&&av(b,["thoughtSignature"],l);let m=aw(a,["videoMetadata"]);return null!=m&&av(b,["videoMetadata"],m),b})(a))),av(b,["parts"],a)}let d=aw(a,["role"]);return null!=d&&av(b,["role"],d),b}function bw(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["src"]);null!=e&&av(c,["batch","inputConfig"],function(a,b){let c={};if(void 0!==aw(b,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==aw(b,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==aw(b,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let d=aw(b,["fileName"]);null!=d&&av(c,["fileName"],d);let e=aw(b,["inlinedRequests"]);if(null!=e){let b=e;Array.isArray(b)&&(b=b.map(b=>(function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["request","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let a=bc(e);Array.isArray(a)&&(a=a.map(a=>bv(a))),av(c,["request","contents"],a)}let f=aw(b,["metadata"]);null!=f&&av(c,["metadata"],f);let g=aw(b,["config"]);return null!=g&&av(c,["request","generationConfig"],function(a,b,c){let d={},e=aw(b,["systemInstruction"]);void 0!==c&&null!=e&&av(c,["systemInstruction"],bv(ba(e)));let f=aw(b,["temperature"]);null!=f&&av(d,["temperature"],f);let g=aw(b,["topP"]);null!=g&&av(d,["topP"],g);let h=aw(b,["topK"]);null!=h&&av(d,["topK"],h);let i=aw(b,["candidateCount"]);null!=i&&av(d,["candidateCount"],i);let j=aw(b,["maxOutputTokens"]);null!=j&&av(d,["maxOutputTokens"],j);let k=aw(b,["stopSequences"]);null!=k&&av(d,["stopSequences"],k);let l=aw(b,["responseLogprobs"]);null!=l&&av(d,["responseLogprobs"],l);let m=aw(b,["logprobs"]);null!=m&&av(d,["logprobs"],m);let n=aw(b,["presencePenalty"]);null!=n&&av(d,["presencePenalty"],n);let o=aw(b,["frequencyPenalty"]);null!=o&&av(d,["frequencyPenalty"],o);let p=aw(b,["seed"]);null!=p&&av(d,["seed"],p);let q=aw(b,["responseMimeType"]);null!=q&&av(d,["responseMimeType"],q);let r=aw(b,["responseSchema"]);null!=r&&av(d,["responseSchema"],bd(r));let s=aw(b,["responseJsonSchema"]);if(null!=s&&av(d,["responseJsonSchema"],s),void 0!==aw(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==aw(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=aw(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["category"]);if(null!=c&&av(b,["category"],c),void 0!==aw(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=aw(a,["threshold"]);return null!=d&&av(b,["threshold"],d),b})(a))),av(c,["safetySettings"],a)}let u=aw(b,["tools"]);if(void 0!==c&&null!=u){let a=bh(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["functionDeclarations"],a)}if(void 0!==aw(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=aw(a,["googleSearchRetrieval"]);null!=d&&av(b,["googleSearchRetrieval"],d);let e=aw(a,["computerUse"]);null!=e&&av(b,["computerUse"],e);let f=aw(a,["fileSearch"]);null!=f&&av(b,["fileSearch"],f);let g=aw(a,["codeExecution"]);if(null!=g&&av(b,["codeExecution"],g),void 0!==aw(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=aw(a,["googleMaps"]);null!=h&&av(b,["googleMaps"],function(a){let b={};if(void 0!==aw(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=aw(a,["enableWidget"]);return null!=c&&av(b,["enableWidget"],c),b}(h));let i=aw(a,["googleSearch"]);null!=i&&av(b,["googleSearch"],function(a){let b={};if(void 0!==aw(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==aw(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=aw(a,["timeRangeFilter"]);return null!=c&&av(b,["timeRangeFilter"],c),b}(i));let j=aw(a,["urlContext"]);return null!=j&&av(b,["urlContext"],j),b})(bg(a)))),av(c,["tools"],a)}let v=aw(b,["toolConfig"]);if(void 0!==c&&null!=v&&av(c,["toolConfig"],function(a){let b={},c=aw(a,["functionCallingConfig"]);null!=c&&av(b,["functionCallingConfig"],function(a){let b={},c=aw(a,["mode"]);null!=c&&av(b,["mode"],c);let d=aw(a,["allowedFunctionNames"]);if(null!=d&&av(b,["allowedFunctionNames"],d),void 0!==aw(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(c));let d=aw(a,["retrievalConfig"]);return null!=d&&av(b,["retrievalConfig"],d),b}(v)),void 0!==aw(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=aw(b,["cachedContent"]);void 0!==c&&null!=w&&av(c,["cachedContent"],bi(a,w));let x=aw(b,["responseModalities"]);null!=x&&av(d,["responseModalities"],x);let y=aw(b,["mediaResolution"]);null!=y&&av(d,["mediaResolution"],y);let z=aw(b,["speechConfig"]);if(null!=z&&av(d,["speechConfig"],be(z)),void 0!==aw(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let A=aw(b,["thinkingConfig"]);null!=A&&av(d,["thinkingConfig"],A);let B=aw(b,["imageConfig"]);null!=B&&av(d,["imageConfig"],function(a){let b={},c=aw(a,["aspectRatio"]);null!=c&&av(b,["aspectRatio"],c);let d=aw(a,["imageSize"]);if(null!=d&&av(b,["imageSize"],d),void 0!==aw(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==aw(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(B));let C=aw(b,["enableEnhancedCivicAnswers"]);return null!=C&&av(d,["enableEnhancedCivicAnswers"],C),d}(a,g,aw(c,["request"],{}))),c})(a,b))),av(c,["requests","requests"],b)}return c}(a,bp(a,e)));let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["displayName"]);if(void 0!==b&&null!=c&&av(b,["batch","displayName"],c),void 0!==aw(a,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(f,c),c}!function(a){a.PAGED_ITEM_BATCH_JOBS="batchJobs",a.PAGED_ITEM_MODELS="models",a.PAGED_ITEM_TUNING_JOBS="tuningJobs",a.PAGED_ITEM_FILES="files",a.PAGED_ITEM_CACHED_CONTENTS="cachedContents",a.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",a.PAGED_ITEM_DOCUMENTS="documents"}(ak||(ak={}));class bx{constructor(a,b,c,d){this.pageInternal=[],this.paramsInternal={},this.requestInternal=b,this.init(a,c,d)}init(a,b,c){var d,e;this.nameInternal=a,this.pageInternal=b[this.nameInternal]||[],this.sdkHttpResponseInternal=null==b?void 0:b.sdkHttpResponse,this.idxInternal=0;let f={config:{}};(f=c&&0!==Object.keys(c).length?"object"==typeof c?Object.assign({},c):c:{config:{}}).config&&(f.config.pageToken=b.nextPageToken),this.paramsInternal=f,this.pageInternalSize=null!=(e=null==(d=f.config)?void 0:d.pageSize)?e:this.pageInternal.length}initNextPage(a){this.init(this.nameInternal,a,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(a){return this.pageInternal[a]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let a=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:a,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let a=await this.requestInternal(this.params);return this.initNextPage(a),this.page}hasNextPage(){var a;return(null==(a=this.params.config)?void 0:a.pageToken)!==void 0}}class by extends at{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new bx(ak.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.create=async a=>(this.apiClient.isVertexAI()&&(a.config=this.formatDestination(a.src,a.config)),this.createInternal(a)),this.createEmbeddings=async a=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(a)}}createInlinedGenerateContentRequest(a){let b=bw(this.apiClient,a),c=au("{model}:batchGenerateContent",b._url),d=b.batch.inputConfig.requests,e=d.requests,f=[];for(let a of e){let b=Object.assign({},a);if(b.systemInstruction){let a=b.systemInstruction;delete b.systemInstruction;let c=b.request;c.systemInstruction=a,b.request=c}f.push(b)}return d.requests=f,delete b.config,delete b._url,delete b._query,{path:c,body:b}}getGcsUri(a){return"string"==typeof a?a.startsWith("gs://")?a:void 0:!Array.isArray(a)&&a.gcsUri&&a.gcsUri.length>0?a.gcsUri[0]:void 0}getBigqueryUri(a){return"string"==typeof a?a.startsWith("bq://")?a:void 0:Array.isArray(a)?void 0:a.bigqueryUri}formatDestination(a,b){let c=b?Object.assign({},b):{},d=Date.now().toString();if(c.displayName||(c.displayName=`genaiBatchJob_${d}`),void 0===c.dest){let b=this.getGcsUri(a),e=this.getBigqueryUri(a);if(b)b.endsWith(".jsonl")?c.dest=`${b.slice(0,-6)}/dest`:c.dest=`${b}_dest_${d}`;else if(e)c.dest=`${e}_dest_${d}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return c}async createInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["model"],a_(a,d));let e=aw(b,["src"]);null!=e&&av(c,["inputConfig"],function(a){let b={},c=aw(a,["format"]);null!=c&&av(b,["instancesFormat"],c);let d=aw(a,["gcsUri"]);null!=d&&av(b,["gcsSource","uris"],d);let e=aw(a,["bigqueryUri"]);if(null!=e&&av(b,["bigquerySource","inputUri"],e),void 0!==aw(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==aw(a,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return b}(bp(a,e)));let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["displayName"]);void 0!==b&&null!=c&&av(b,["displayName"],c);let d=aw(a,["dest"]);void 0!==b&&null!=d&&av(b,["outputConfig"],function(a){let b={},c=aw(a,["format"]);null!=c&&av(b,["predictionsFormat"],c);let d=aw(a,["gcsUri"]);null!=d&&av(b,["gcsDestination","outputUriPrefix"],d);let e=aw(a,["bigqueryUri"]);if(null!=e&&av(b,["bigqueryDestination","outputUri"],e),void 0!==aw(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==aw(a,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==aw(a,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return b}(function(a){if("string"!=typeof a)return a;if(a.startsWith("gs://"))return{format:"jsonl",gcsUri:a};if(a.startsWith("bq://"))return{format:"bigquery",bigqueryUri:a};throw Error(`Unsupported destination: ${a}`)}(d)))}(f,c),c}(this.apiClient,a);return f=au("batchPredictionJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>bu(a))}{let b=bw(this.apiClient,a);return f=au("{model}:batchGenerateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>bt(a))}}async createEmbeddingsInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["src"]);null!=e&&av(c,["batch","inputConfig"],function(a,b){let c={},d=aw(b,["fileName"]);null!=d&&av(c,["file_name"],d);let e=aw(b,["inlinedRequests"]);return null!=e&&av(c,["requests"],function(a,b){let c={},d=aw(b,["contents"]);if(null!=d){let b=bb(a,d);Array.isArray(b)&&(b=b.map(a=>a)),av(c,["requests[]","request","content"],b)}let e=aw(b,["config"]);return null!=e&&(av(c,["_self"],function(a,b){let c=aw(a,["taskType"]);void 0!==b&&null!=c&&av(b,["requests[]","taskType"],c);let d=aw(a,["title"]);void 0!==b&&null!=d&&av(b,["requests[]","title"],d);let e=aw(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&av(b,["requests[]","outputDimensionality"],e),void 0!==aw(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==aw(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(e,c)),!function(a,b){for(let[c,d]of Object.entries(b)){let b=c.split("."),e=d.split("."),f=new Set,g=-1;for(let a=0;a<b.length;a++)if("*"===b[a]){g=a;break}if(-1!==g&&e.length>g)for(let a=g;a<e.length;a++){let b=e[a];"*"===b||b.endsWith("[]")||b.endsWith("[0]")||f.add(b)}!function a(b,c,d,e,f){if(e>=c.length||"object"!=typeof b||null===b)return;let g=c[e];if(g.endsWith("[]")){let h=g.slice(0,-2);if(h in b&&Array.isArray(b[h]))for(let g of b[h])a(g,c,d,e+1,f)}else if("*"===g){if("object"==typeof b&&null!==b&&!Array.isArray(b)){let a=Object.keys(b).filter(a=>!a.startsWith("_")&&!f.has(a)),c={};for(let d of a)c[d]=b[d];for(let[a,f]of Object.entries(c)){let c=[];for(let b of d.slice(e))"*"===b?c.push(a):c.push(b);av(b,c,f)}for(let c of a)delete b[c]}}else g in b&&a(b[g],c,d,e+1,f)}(a,b,e,0,f)}}(c,{"requests[].*":"requests[].request.*"})),c}(a,e)),c}(a,e));let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["displayName"]);void 0!==b&&null!=c&&av(b,["batch","displayName"],c)}(f,c),c}(this.apiClient,a);return d=au("{model}:asyncBatchEmbedContent",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>bt(a))}}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],br(a,d)),c}(this.apiClient,a);return f=au("batchPredictionJobs/{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>bu(a))}{let b=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],br(a,d)),c}(this.apiClient,a);return f=au("batches/{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>bt(a))}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],br(a,d)),c}(this.apiClient,a);f=au("batchPredictionJobs/{name}:cancel",d._url),g=d._query,delete d._url,delete d._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}else{let b=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],br(a,d)),c}(this.apiClient,a);f=au("batches/{name}:cancel",b._url),g=b._query,delete b._url,delete b._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal})}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=aw(a,["config"]);return null!=c&&function(a,b){let c=aw(a,["pageSize"]);void 0!==b&&null!=c&&av(b,["_query","pageSize"],c);let d=aw(a,["pageToken"]);void 0!==b&&null!=d&&av(b,["_query","pageToken"],d);let e=aw(a,["filter"]);void 0!==b&&null!=e&&av(b,["_query","filter"],e)}(c,b),b}(a);return f=au("batchPredictionJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["batchPredictionJobs"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>bu(a))),av(b,["batchJobs"],a)}return b}(a),c=new aX;return Object.assign(c,b),c})}{let b=function(a){let b={},c=aw(a,["config"]);return null!=c&&function(a,b){let c=aw(a,["pageSize"]);void 0!==b&&null!=c&&av(b,["_query","pageSize"],c);let d=aw(a,["pageToken"]);if(void 0!==b&&null!=d&&av(b,["_query","pageToken"],d),void 0!==aw(a,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(c,b),b}(a);return f=au("batches",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["operations"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>bt(a))),av(b,["batchJobs"],a)}return b}(a),c=new aX;return Object.assign(c,b),c})}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],br(a,d)),c}(this.apiClient,a);return f=au("batchPredictionJobs/{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["name"]);null!=d&&av(b,["name"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);return null!=f&&av(b,["error"],f),b})(a))}{let b=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],br(a,d)),c}(this.apiClient,a);return f=au("batches/{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["name"]);null!=d&&av(b,["name"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);return null!=f&&av(b,["error"],f),b})(a))}}}function bz(a){let b={},c=aw(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["mediaResolution"]);null!=c&&av(b,["mediaResolution"],c);let d=aw(a,["codeExecutionResult"]);null!=d&&av(b,["codeExecutionResult"],d);let e=aw(a,["executableCode"]);null!=e&&av(b,["executableCode"],e);let f=aw(a,["fileData"]);null!=f&&av(b,["fileData"],function(a){let b={};if(void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=aw(a,["fileUri"]);null!=c&&av(b,["fileUri"],c);let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(f));let g=aw(a,["functionCall"]);null!=g&&av(b,["functionCall"],function(a){let b={},c=aw(a,["id"]);null!=c&&av(b,["id"],c);let d=aw(a,["args"]);null!=d&&av(b,["args"],d);let e=aw(a,["name"]);if(null!=e&&av(b,["name"],e),void 0!==aw(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==aw(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=aw(a,["functionResponse"]);null!=h&&av(b,["functionResponse"],h);let i=aw(a,["inlineData"]);null!=i&&av(b,["inlineData"],function(a){let b={},c=aw(a,["data"]);if(null!=c&&av(b,["data"],c),void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(i));let j=aw(a,["text"]);null!=j&&av(b,["text"],j);let k=aw(a,["thought"]);null!=k&&av(b,["thought"],k);let l=aw(a,["thoughtSignature"]);null!=l&&av(b,["thoughtSignature"],l);let m=aw(a,["videoMetadata"]);return null!=m&&av(b,["videoMetadata"],m),b})(a))),av(b,["parts"],a)}let d=aw(a,["role"]);return null!=d&&av(b,["role"],d),b}class bA extends at{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new bx(ak.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(a),a)}async create(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["model"],a0(a,d));let e=aw(b,["config"]);return null!=e&&function(a,b){let c=aw(a,["ttl"]);void 0!==b&&null!=c&&av(b,["ttl"],c);let d=aw(a,["expireTime"]);void 0!==b&&null!=d&&av(b,["expireTime"],d);let e=aw(a,["displayName"]);void 0!==b&&null!=e&&av(b,["displayName"],e);let f=aw(a,["contents"]);if(void 0!==b&&null!=f){let a=bc(f);Array.isArray(a)&&(a=a.map(a=>a)),av(b,["contents"],a)}let g=aw(a,["systemInstruction"]);void 0!==b&&null!=g&&av(b,["systemInstruction"],ba(g));let h=aw(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==aw(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=aw(a,["description"]);null!=c&&av(b,["description"],c);let d=aw(a,["name"]);null!=d&&av(b,["name"],d);let e=aw(a,["parameters"]);null!=e&&av(b,["parameters"],e);let f=aw(a,["parametersJsonSchema"]);null!=f&&av(b,["parametersJsonSchema"],f);let g=aw(a,["response"]);null!=g&&av(b,["response"],g);let h=aw(a,["responseJsonSchema"]);return null!=h&&av(b,["responseJsonSchema"],h),b})(a))),av(b,["functionDeclarations"],a)}let d=aw(a,["retrieval"]);null!=d&&av(b,["retrieval"],d);let e=aw(a,["googleSearchRetrieval"]);null!=e&&av(b,["googleSearchRetrieval"],e);let f=aw(a,["computerUse"]);if(null!=f&&av(b,["computerUse"],f),void 0!==aw(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=aw(a,["codeExecution"]);null!=g&&av(b,["codeExecution"],g);let h=aw(a,["enterpriseWebSearch"]);null!=h&&av(b,["enterpriseWebSearch"],h);let i=aw(a,["googleMaps"]);null!=i&&av(b,["googleMaps"],i);let j=aw(a,["googleSearch"]);null!=j&&av(b,["googleSearch"],j);let k=aw(a,["urlContext"]);return null!=k&&av(b,["urlContext"],k),b})(a))),av(b,["tools"],a)}let i=aw(a,["toolConfig"]);void 0!==b&&null!=i&&av(b,["toolConfig"],i);let j=aw(a,["kmsKeyName"]);void 0!==b&&null!=j&&av(b,["encryption_spec","kmsKeyName"],j)}(e,c),c}(this.apiClient,a);return f=au("cachedContents",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["model"],a0(a,d));let e=aw(b,["config"]);return null!=e&&function(a,b){let c=aw(a,["ttl"]);void 0!==b&&null!=c&&av(b,["ttl"],c);let d=aw(a,["expireTime"]);void 0!==b&&null!=d&&av(b,["expireTime"],d);let e=aw(a,["displayName"]);void 0!==b&&null!=e&&av(b,["displayName"],e);let f=aw(a,["contents"]);if(void 0!==b&&null!=f){let a=bc(f);Array.isArray(a)&&(a=a.map(a=>bz(a))),av(b,["contents"],a)}let g=aw(a,["systemInstruction"]);void 0!==b&&null!=g&&av(b,["systemInstruction"],bz(ba(g)));let h=aw(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["functionDeclarations"],a)}if(void 0!==aw(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=aw(a,["googleSearchRetrieval"]);null!=d&&av(b,["googleSearchRetrieval"],d);let e=aw(a,["computerUse"]);null!=e&&av(b,["computerUse"],e);let f=aw(a,["fileSearch"]);null!=f&&av(b,["fileSearch"],f);let g=aw(a,["codeExecution"]);if(null!=g&&av(b,["codeExecution"],g),void 0!==aw(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=aw(a,["googleMaps"]);null!=h&&av(b,["googleMaps"],function(a){let b={};if(void 0!==aw(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=aw(a,["enableWidget"]);return null!=c&&av(b,["enableWidget"],c),b}(h));let i=aw(a,["googleSearch"]);null!=i&&av(b,["googleSearch"],function(a){let b={};if(void 0!==aw(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==aw(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=aw(a,["timeRangeFilter"]);return null!=c&&av(b,["timeRangeFilter"],c),b}(i));let j=aw(a,["urlContext"]);return null!=j&&av(b,["urlContext"],j),b})(a))),av(b,["tools"],a)}let i=aw(a,["toolConfig"]);if(void 0!==b&&null!=i&&av(b,["toolConfig"],function(a){let b={},c=aw(a,["functionCallingConfig"]);null!=c&&av(b,["functionCallingConfig"],function(a){let b={},c=aw(a,["mode"]);null!=c&&av(b,["mode"],c);let d=aw(a,["allowedFunctionNames"]);if(null!=d&&av(b,["allowedFunctionNames"],d),void 0!==aw(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(c));let d=aw(a,["retrievalConfig"]);return null!=d&&av(b,["retrievalConfig"],d),b}(i)),void 0!==aw(a,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(e,c),c}(this.apiClient,a);return f=au("cachedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],bi(a,d)),c}(this.apiClient,a);return f=au("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],bi(a,d)),c}(this.apiClient,a);return f=au("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],bi(a,d)),c}(this.apiClient,a);return f=au("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);return null!=c&&av(b,["sdkHttpResponse"],c),b}(a),c=new aO;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(b,["name"]);return null!=d&&av(c,["_url","name"],bi(a,d)),c}(this.apiClient,a);return f=au("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);return null!=c&&av(b,["sdkHttpResponse"],c),b}(a),c=new aO;return Object.assign(c,b),c})}}async update(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["name"]);null!=d&&av(c,["_url","name"],bi(a,d));let e=aw(b,["config"]);return null!=e&&function(a,b){let c=aw(a,["ttl"]);void 0!==b&&null!=c&&av(b,["ttl"],c);let d=aw(a,["expireTime"]);void 0!==b&&null!=d&&av(b,["expireTime"],d)}(e,c),c}(this.apiClient,a);return f=au("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b=function(a,b){let c={},d=aw(b,["name"]);null!=d&&av(c,["_url","name"],bi(a,d));let e=aw(b,["config"]);return null!=e&&function(a,b){let c=aw(a,["ttl"]);void 0!==b&&null!=c&&av(b,["ttl"],c);let d=aw(a,["expireTime"]);void 0!==b&&null!=d&&av(b,["expireTime"],d)}(e,c),c}(this.apiClient,a);return f=au("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=aw(a,["config"]);return null!=c&&function(a,b){let c=aw(a,["pageSize"]);void 0!==b&&null!=c&&av(b,["_query","pageSize"],c);let d=aw(a,["pageToken"]);void 0!==b&&null!=d&&av(b,["_query","pageToken"],d)}(c,b),b}(a);return f=au("cachedContents",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["cachedContents"],a)}return b}(a),c=new aP;return Object.assign(c,b),c})}{let b=function(a){let b={},c=aw(a,["config"]);return null!=c&&function(a,b){let c=aw(a,["pageSize"]);void 0!==b&&null!=c&&av(b,["_query","pageSize"],c);let d=aw(a,["pageToken"]);void 0!==b&&null!=d&&av(b,["_query","pageToken"],d)}(c,b),b}(a);return f=au("cachedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["cachedContents"],a)}return b}(a),c=new aP;return Object.assign(c,b),c})}}}function bB(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function bC(a){return this instanceof bC?(this.v=a,this):new bC(a)}function bD(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof bC?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function bE(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function bF(a){if(void 0===a.parts||0===a.parts.length)return!1;for(let b of a.parts)if(void 0===b||0===Object.keys(b).length)return!1;return!0}function bG(a){if(void 0===a||0===a.length)return[];let b=[],c=a.length,d=0;for(;d<c;)if("user"===a[d].role)b.push(a[d]),d++;else{let e=[],f=!0;for(;d<c&&"model"===a[d].role;)e.push(a[d]),f&&!bF(a[d])&&(f=!1),d++;f?b.push(...e):b.pop()}return b}"function"==typeof SuppressedError&&SuppressedError;class bH{constructor(a,b){this.modelsModule=a,this.apiClient=b}create(a){return new bI(this.apiClient,this.modelsModule,a.model,a.config,structuredClone(a.history))}}class bI{constructor(a,b,c,d={},e=[]){this.apiClient=a,this.modelsModule=b,this.model=c,this.config=d,this.history=e,this.sendPromise=Promise.resolve(),function(a){if(0!==a.length){for(let b of a)if("user"!==b.role&&"model"!==b.role)throw Error(`Role must be user or model, but got ${b.role}.`)}}(e)}async sendMessage(a){var b;await this.sendPromise;let c=ba(a.message),d=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});return this.sendPromise=(async()=>{var a,b,e;let f=await d,g=null==(b=null==(a=f.candidates)?void 0:a[0])?void 0:b.content,h=f.automaticFunctionCallingHistory,i=this.getHistory(!0).length,j=[];null!=h&&(j=null!=(e=h.slice(i))?e:[]),this.recordHistory(c,g?[g]:[],j)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),d}async sendMessageStream(a){var b;await this.sendPromise;let c=ba(a.message),d=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});this.sendPromise=d.then(()=>void 0).catch(()=>void 0);let e=await d;return this.processStreamResponse(e,c)}getHistory(a=!1){return structuredClone(a?bG(this.history):this.history)}processStreamResponse(a,b){return bD(this,arguments,function*(){let c=[];try{for(var d,e,f,g,h,i,j,k=!0,l=bE(a);!(d=(j=yield bC(l.next())).done);k=!0){if(g=j.value,k=!1,function(a){var b;if(void 0==a.candidates||0===a.candidates.length)return!1;let c=null==(b=a.candidates[0])?void 0:b.content;return void 0!==c&&bF(c)}(g)){let a=null==(i=null==(h=g.candidates)?void 0:h[0])?void 0:i.content;void 0!==a&&c.push(a)}yield yield bC(g)}}catch(a){e={error:a}}finally{try{!k&&!d&&(f=l.return)&&(yield bC(f.call(l)))}finally{if(e)throw e.error}}this.recordHistory(b,c)})}recordHistory(a,b,c){let d=[];b.length>0&&b.every(a=>void 0!==a.role)?d=b:d.push({role:"model",parts:[]}),c&&c.length>0?this.history.push(...bG(c)):this.history.push(a),this.history.push(...d)}}class bJ extends Error{constructor(a){super(a.message),this.name="ApiError",this.status=a.status,Object.setPrototypeOf(this,bJ.prototype)}}class bK extends at{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new bx(ak.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(a),a)}async upload(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(a.file,a.config).then(a=>a)}async download(a){await this.apiClient.downloadFile(a)}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["config"]);return null!=c&&function(a,b){let c=aw(a,["pageSize"]);void 0!==b&&null!=c&&av(b,["_query","pageSize"],c);let d=aw(a,["pageToken"]);void 0!==b&&null!=d&&av(b,["_query","pageToken"],d)}(c,b),b}(a);return d=au("files",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["files"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["files"],a)}return b}(a),c=new aU;return Object.assign(c,b),c})}}async createInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["file"]);return null!=c&&av(b,["file"],c),b}(a);return d=au("upload/v1beta/files",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);return null!=c&&av(b,["sdkHttpResponse"],c),b}(a),c=new aV;return Object.assign(c,b),c})}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["name"]);return null!=c&&av(b,["_url","file"],bm(c)),b}(a);return d=au("files/{file}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["name"]);return null!=c&&av(b,["_url","file"],bm(c)),b}(a);return d=au("files/{file}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);return null!=c&&av(b,["sdkHttpResponse"],c),b}(a),c=new aW;return Object.assign(c,b),c})}}}function bL(a){let b={},c=aw(a,["data"]);if(null!=c&&av(b,["data"],c),void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}function bM(a){let b={},c=aw(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["mediaResolution"]);null!=c&&av(b,["mediaResolution"],c);let d=aw(a,["codeExecutionResult"]);null!=d&&av(b,["codeExecutionResult"],d);let e=aw(a,["executableCode"]);null!=e&&av(b,["executableCode"],e);let f=aw(a,["fileData"]);null!=f&&av(b,["fileData"],function(a){let b={};if(void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=aw(a,["fileUri"]);null!=c&&av(b,["fileUri"],c);let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(f));let g=aw(a,["functionCall"]);null!=g&&av(b,["functionCall"],function(a){let b={},c=aw(a,["id"]);null!=c&&av(b,["id"],c);let d=aw(a,["args"]);null!=d&&av(b,["args"],d);let e=aw(a,["name"]);if(null!=e&&av(b,["name"],e),void 0!==aw(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==aw(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=aw(a,["functionResponse"]);null!=h&&av(b,["functionResponse"],h);let i=aw(a,["inlineData"]);null!=i&&av(b,["inlineData"],function(a){let b={},c=aw(a,["data"]);if(null!=c&&av(b,["data"],c),void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(i));let j=aw(a,["text"]);null!=j&&av(b,["text"],j);let k=aw(a,["thought"]);null!=k&&av(b,["thought"],k);let l=aw(a,["thoughtSignature"]);null!=l&&av(b,["thoughtSignature"],l);let m=aw(a,["videoMetadata"]);return null!=m&&av(b,["videoMetadata"],m),b})(a))),av(b,["parts"],a)}let d=aw(a,["role"]);return null!=d&&av(b,["role"],d),b}function bN(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let a=bc(e);Array.isArray(a)&&(a=a.map(a=>bM(a))),av(c,["contents"],a)}let f=aw(b,["config"]);return null!=f&&av(c,["generationConfig"],function(a,b,c){let d={},e=aw(b,["systemInstruction"]);void 0!==c&&null!=e&&av(c,["systemInstruction"],bM(ba(e)));let f=aw(b,["temperature"]);null!=f&&av(d,["temperature"],f);let g=aw(b,["topP"]);null!=g&&av(d,["topP"],g);let h=aw(b,["topK"]);null!=h&&av(d,["topK"],h);let i=aw(b,["candidateCount"]);null!=i&&av(d,["candidateCount"],i);let j=aw(b,["maxOutputTokens"]);null!=j&&av(d,["maxOutputTokens"],j);let k=aw(b,["stopSequences"]);null!=k&&av(d,["stopSequences"],k);let l=aw(b,["responseLogprobs"]);null!=l&&av(d,["responseLogprobs"],l);let m=aw(b,["logprobs"]);null!=m&&av(d,["logprobs"],m);let n=aw(b,["presencePenalty"]);null!=n&&av(d,["presencePenalty"],n);let o=aw(b,["frequencyPenalty"]);null!=o&&av(d,["frequencyPenalty"],o);let p=aw(b,["seed"]);null!=p&&av(d,["seed"],p);let q=aw(b,["responseMimeType"]);null!=q&&av(d,["responseMimeType"],q);let r=aw(b,["responseSchema"]);null!=r&&av(d,["responseSchema"],bd(r));let s=aw(b,["responseJsonSchema"]);if(null!=s&&av(d,["responseJsonSchema"],s),void 0!==aw(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==aw(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let t=aw(b,["safetySettings"]);if(void 0!==c&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["category"]);if(null!=c&&av(b,["category"],c),void 0!==aw(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=aw(a,["threshold"]);return null!=d&&av(b,["threshold"],d),b})(a))),av(c,["safetySettings"],a)}let u=aw(b,["tools"]);if(void 0!==c&&null!=u){let a=bh(u);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["functionDeclarations"],a)}if(void 0!==aw(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=aw(a,["googleSearchRetrieval"]);null!=d&&av(b,["googleSearchRetrieval"],d);let e=aw(a,["computerUse"]);null!=e&&av(b,["computerUse"],e);let f=aw(a,["fileSearch"]);null!=f&&av(b,["fileSearch"],f);let g=aw(a,["codeExecution"]);if(null!=g&&av(b,["codeExecution"],g),void 0!==aw(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=aw(a,["googleMaps"]);null!=h&&av(b,["googleMaps"],function(a){let b={};if(void 0!==aw(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=aw(a,["enableWidget"]);return null!=c&&av(b,["enableWidget"],c),b}(h));let i=aw(a,["googleSearch"]);null!=i&&av(b,["googleSearch"],function(a){let b={};if(void 0!==aw(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==aw(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=aw(a,["timeRangeFilter"]);return null!=c&&av(b,["timeRangeFilter"],c),b}(i));let j=aw(a,["urlContext"]);return null!=j&&av(b,["urlContext"],j),b})(bg(a)))),av(c,["tools"],a)}let v=aw(b,["toolConfig"]);if(void 0!==c&&null!=v&&av(c,["toolConfig"],function(a){let b={},c=aw(a,["functionCallingConfig"]);null!=c&&av(b,["functionCallingConfig"],function(a){let b={},c=aw(a,["mode"]);null!=c&&av(b,["mode"],c);let d=aw(a,["allowedFunctionNames"]);if(null!=d&&av(b,["allowedFunctionNames"],d),void 0!==aw(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(c));let d=aw(a,["retrievalConfig"]);return null!=d&&av(b,["retrievalConfig"],d),b}(v)),void 0!==aw(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let w=aw(b,["cachedContent"]);void 0!==c&&null!=w&&av(c,["cachedContent"],bi(a,w));let x=aw(b,["responseModalities"]);null!=x&&av(d,["responseModalities"],x);let y=aw(b,["mediaResolution"]);null!=y&&av(d,["mediaResolution"],y);let z=aw(b,["speechConfig"]);if(null!=z&&av(d,["speechConfig"],be(z)),void 0!==aw(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let A=aw(b,["thinkingConfig"]);null!=A&&av(d,["thinkingConfig"],A);let B=aw(b,["imageConfig"]);null!=B&&av(d,["imageConfig"],function(a){let b={},c=aw(a,["aspectRatio"]);null!=c&&av(b,["aspectRatio"],c);let d=aw(a,["imageSize"]);if(null!=d&&av(b,["imageSize"],d),void 0!==aw(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==aw(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(B));let C=aw(b,["enableEnhancedCivicAnswers"]);return null!=C&&av(d,["enableEnhancedCivicAnswers"],C),d}(a,f,c)),c}function bO(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let a=bc(e);Array.isArray(a)&&(a=a.map(a=>a)),av(c,["contents"],a)}let f=aw(b,["config"]);return null!=f&&av(c,["generationConfig"],function(a,b,c){let d={},e=aw(b,["systemInstruction"]);void 0!==c&&null!=e&&av(c,["systemInstruction"],ba(e));let f=aw(b,["temperature"]);null!=f&&av(d,["temperature"],f);let g=aw(b,["topP"]);null!=g&&av(d,["topP"],g);let h=aw(b,["topK"]);null!=h&&av(d,["topK"],h);let i=aw(b,["candidateCount"]);null!=i&&av(d,["candidateCount"],i);let j=aw(b,["maxOutputTokens"]);null!=j&&av(d,["maxOutputTokens"],j);let k=aw(b,["stopSequences"]);null!=k&&av(d,["stopSequences"],k);let l=aw(b,["responseLogprobs"]);null!=l&&av(d,["responseLogprobs"],l);let m=aw(b,["logprobs"]);null!=m&&av(d,["logprobs"],m);let n=aw(b,["presencePenalty"]);null!=n&&av(d,["presencePenalty"],n);let o=aw(b,["frequencyPenalty"]);null!=o&&av(d,["frequencyPenalty"],o);let p=aw(b,["seed"]);null!=p&&av(d,["seed"],p);let q=aw(b,["responseMimeType"]);null!=q&&av(d,["responseMimeType"],q);let r=aw(b,["responseSchema"]);null!=r&&av(d,["responseSchema"],bd(r));let s=aw(b,["responseJsonSchema"]);null!=s&&av(d,["responseJsonSchema"],s);let t=aw(b,["routingConfig"]);null!=t&&av(d,["routingConfig"],t);let u=aw(b,["modelSelectionConfig"]);null!=u&&av(d,["modelConfig"],u);let v=aw(b,["safetySettings"]);if(void 0!==c&&null!=v){let a=v;Array.isArray(a)&&(a=a.map(a=>a)),av(c,["safetySettings"],a)}let w=aw(b,["tools"]);if(void 0!==c&&null!=w){let a=bh(w);Array.isArray(a)&&(a=a.map(a=>bZ(bg(a)))),av(c,["tools"],a)}let x=aw(b,["toolConfig"]);void 0!==c&&null!=x&&av(c,["toolConfig"],x);let y=aw(b,["labels"]);void 0!==c&&null!=y&&av(c,["labels"],y);let z=aw(b,["cachedContent"]);void 0!==c&&null!=z&&av(c,["cachedContent"],bi(a,z));let A=aw(b,["responseModalities"]);null!=A&&av(d,["responseModalities"],A);let B=aw(b,["mediaResolution"]);null!=B&&av(d,["mediaResolution"],B);let C=aw(b,["speechConfig"]);null!=C&&av(d,["speechConfig"],be(C));let D=aw(b,["audioTimestamp"]);null!=D&&av(d,["audioTimestamp"],D);let E=aw(b,["thinkingConfig"]);null!=E&&av(d,["thinkingConfig"],E);let F=aw(b,["imageConfig"]);if(null!=F&&av(d,["imageConfig"],function(a){let b={},c=aw(a,["aspectRatio"]);null!=c&&av(b,["aspectRatio"],c);let d=aw(a,["imageSize"]);null!=d&&av(b,["imageSize"],d);let e=aw(a,["outputMimeType"]);null!=e&&av(b,["imageOutputOptions","mimeType"],e);let f=aw(a,["outputCompressionQuality"]);return null!=f&&av(b,["imageOutputOptions","compressionQuality"],f),b}(F)),void 0!==aw(b,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return d}(a,f,c)),c}function bP(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["content"]);null!=c&&av(b,["content"],c);let d=aw(a,["citationMetadata"]);null!=d&&av(b,["citationMetadata"],function(a){let b={},c=aw(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["citations"],a)}return b}(d));let e=aw(a,["tokenCount"]);null!=e&&av(b,["tokenCount"],e);let f=aw(a,["finishReason"]);null!=f&&av(b,["finishReason"],f);let g=aw(a,["avgLogprobs"]);null!=g&&av(b,["avgLogprobs"],g);let h=aw(a,["groundingMetadata"]);null!=h&&av(b,["groundingMetadata"],h);let i=aw(a,["index"]);null!=i&&av(b,["index"],i);let j=aw(a,["logprobsResult"]);null!=j&&av(b,["logprobsResult"],j);let k=aw(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["safetyRatings"],a)}let l=aw(a,["urlContextMetadata"]);return null!=l&&av(b,["urlContextMetadata"],l),b})(a))),av(b,["candidates"],a)}let e=aw(a,["modelVersion"]);null!=e&&av(b,["modelVersion"],e);let f=aw(a,["promptFeedback"]);null!=f&&av(b,["promptFeedback"],f);let g=aw(a,["responseId"]);null!=g&&av(b,["responseId"],g);let h=aw(a,["usageMetadata"]);return null!=h&&av(b,["usageMetadata"],h),b}function bQ(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["candidates"],a)}let e=aw(a,["createTime"]);null!=e&&av(b,["createTime"],e);let f=aw(a,["modelVersion"]);null!=f&&av(b,["modelVersion"],f);let g=aw(a,["promptFeedback"]);null!=g&&av(b,["promptFeedback"],g);let h=aw(a,["responseId"]);null!=h&&av(b,["responseId"],h);let i=aw(a,["usageMetadata"]);return null!=i&&av(b,["usageMetadata"],i),b}function bR(a){let b={},c=aw(a,["_self"]);null!=c&&av(b,["image"],bS(c));let d=aw(a,["raiFilteredReason"]);null!=d&&av(b,["raiFilteredReason"],d);let e=aw(a,["_self"]);null!=e&&av(b,["safetyAttributes"],bY(e));let f=aw(a,["prompt"]);return null!=f&&av(b,["enhancedPrompt"],f),b}function bS(a){let b={},c=aw(a,["gcsUri"]);null!=c&&av(b,["gcsUri"],c);let d=aw(a,["bytesBase64Encoded"]);null!=d&&av(b,["imageBytes"],ax(d));let e=aw(a,["mimeType"]);return null!=e&&av(b,["mimeType"],e),b}function bT(a){let b={};if(void 0!==aw(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let c=aw(a,["imageBytes"]);null!=c&&av(b,["bytesBase64Encoded"],ax(c));let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}function bU(a){let b={},c=aw(a,["gcsUri"]);null!=c&&av(b,["gcsUri"],c);let d=aw(a,["imageBytes"]);null!=d&&av(b,["bytesBase64Encoded"],ax(d));let e=aw(a,["mimeType"]);return null!=e&&av(b,["mimeType"],e),b}function bV(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["displayName"]);null!=d&&av(b,["displayName"],d);let e=aw(a,["description"]);null!=e&&av(b,["description"],e);let f=aw(a,["version"]);null!=f&&av(b,["version"],f);let g=aw(a,["_self"]);null!=g&&av(b,["tunedModelInfo"],function(a){let b={},c=aw(a,["baseModel"]);null!=c&&av(b,["baseModel"],c);let d=aw(a,["createTime"]);null!=d&&av(b,["createTime"],d);let e=aw(a,["updateTime"]);return null!=e&&av(b,["updateTime"],e),b}(g));let h=aw(a,["inputTokenLimit"]);null!=h&&av(b,["inputTokenLimit"],h);let i=aw(a,["outputTokenLimit"]);null!=i&&av(b,["outputTokenLimit"],i);let j=aw(a,["supportedGenerationMethods"]);null!=j&&av(b,["supportedActions"],j);let k=aw(a,["temperature"]);null!=k&&av(b,["temperature"],k);let l=aw(a,["maxTemperature"]);null!=l&&av(b,["maxTemperature"],l);let m=aw(a,["topP"]);null!=m&&av(b,["topP"],m);let n=aw(a,["topK"]);null!=n&&av(b,["topK"],n);let o=aw(a,["thinking"]);return null!=o&&av(b,["thinking"],o),b}function bW(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["displayName"]);null!=d&&av(b,["displayName"],d);let e=aw(a,["description"]);null!=e&&av(b,["description"],e);let f=aw(a,["versionId"]);null!=f&&av(b,["version"],f);let g=aw(a,["deployedModels"]);if(null!=g){let a=g;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["endpoint"]);null!=c&&av(b,["name"],c);let d=aw(a,["deployedModelId"]);return null!=d&&av(b,["deployedModelId"],d),b})(a))),av(b,["endpoints"],a)}let h=aw(a,["labels"]);null!=h&&av(b,["labels"],h);let i=aw(a,["_self"]);null!=i&&av(b,["tunedModelInfo"],function(a){let b={},c=aw(a,["labels","google-vertex-llm-tuning-base-model-id"]);null!=c&&av(b,["baseModel"],c);let d=aw(a,["createTime"]);null!=d&&av(b,["createTime"],d);let e=aw(a,["updateTime"]);return null!=e&&av(b,["updateTime"],e),b}(i));let j=aw(a,["defaultCheckpointId"]);null!=j&&av(b,["defaultCheckpointId"],j);let k=aw(a,["checkpoints"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["checkpoints"],a)}return b}function bX(a){let b={},c=aw(a,["safetyAttributes","categories"]);null!=c&&av(b,["categories"],c);let d=aw(a,["safetyAttributes","scores"]);null!=d&&av(b,["scores"],d);let e=aw(a,["contentType"]);return null!=e&&av(b,["contentType"],e),b}function bY(a){let b={},c=aw(a,["safetyAttributes","categories"]);null!=c&&av(b,["categories"],c);let d=aw(a,["safetyAttributes","scores"]);null!=d&&av(b,["scores"],d);let e=aw(a,["contentType"]);return null!=e&&av(b,["contentType"],e),b}function bZ(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==aw(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=aw(a,["description"]);null!=c&&av(b,["description"],c);let d=aw(a,["name"]);null!=d&&av(b,["name"],d);let e=aw(a,["parameters"]);null!=e&&av(b,["parameters"],e);let f=aw(a,["parametersJsonSchema"]);null!=f&&av(b,["parametersJsonSchema"],f);let g=aw(a,["response"]);null!=g&&av(b,["response"],g);let h=aw(a,["responseJsonSchema"]);return null!=h&&av(b,["responseJsonSchema"],h),b})(a))),av(b,["functionDeclarations"],a)}let d=aw(a,["retrieval"]);null!=d&&av(b,["retrieval"],d);let e=aw(a,["googleSearchRetrieval"]);null!=e&&av(b,["googleSearchRetrieval"],e);let f=aw(a,["computerUse"]);if(null!=f&&av(b,["computerUse"],f),void 0!==aw(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=aw(a,["codeExecution"]);null!=g&&av(b,["codeExecution"],g);let h=aw(a,["enterpriseWebSearch"]);null!=h&&av(b,["enterpriseWebSearch"],h);let i=aw(a,["googleMaps"]);null!=i&&av(b,["googleMaps"],i);let j=aw(a,["googleSearch"]);null!=j&&av(b,["googleSearch"],j);let k=aw(a,["urlContext"]);return null!=k&&av(b,["urlContext"],k),b}function b$(a){let b={},c=aw(a,["uri"]);null!=c&&av(b,["uri"],c);let d=aw(a,["videoBytes"]);null!=d&&av(b,["encodedVideo"],ax(d));let e=aw(a,["mimeType"]);return null!=e&&av(b,["encoding"],e),b}function b_(a){let b={},c=aw(a,["uri"]);null!=c&&av(b,["gcsUri"],c);let d=aw(a,["videoBytes"]);null!=d&&av(b,["bytesBase64Encoded"],ax(d));let e=aw(a,["mimeType"]);return null!=e&&av(b,["mimeType"],e),b}function b0(a,b){let c=aw(a,["mimeType"]);void 0!==b&&null!=c&&av(b,["mimeType"],c);let d=aw(a,["displayName"]);void 0!==b&&null!=d&&av(b,["displayName"],d);let e=aw(a,["customMetadata"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["customMetadata"],a)}let f=aw(a,["chunkingConfig"]);return void 0!==b&&null!=f&&av(b,["chunkingConfig"],f),{}}let b1="x-goog-api-client";class b2{constructor(a){var b,c;this.clientOptions=Object.assign(Object.assign({},a),{project:a.project,location:a.location,apiKey:a.apiKey,vertexai:a.vertexai});let d={};this.clientOptions.vertexai?(d.apiVersion=null!=(b=this.clientOptions.apiVersion)?b:"v1beta1",d.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(d.apiVersion=null!=(c=this.clientOptions.apiVersion)?c:"v1beta",d.baseUrl="https://generativelanguage.googleapis.com/"),d.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=d,a.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(d,a.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var a;return null!=(a=this.clientOptions.vertexai)&&a}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let a=new Headers;return await this.clientOptions.auth.addAuthHeaders(a),a}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(a){if(!a||void 0===a.baseUrl||void 0===a.apiVersion)throw Error("HTTP options are not correctly set.");let b=[a.baseUrl.endsWith("/")?a.baseUrl.slice(0,-1):a.baseUrl];return a.apiVersion&&""!==a.apiVersion&&b.push(a.apiVersion),b.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let a=new URL(this.getBaseUrl());return a.protocol="http:"==a.protocol?"ws":"wss",a.toString()}setBaseUrl(a){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=a;else throw Error("HTTP options are not correctly set.")}constructUrl(a,b,c){let d=[this.getRequestUrlInternal(b)];return c&&d.push(this.getBaseResourcePath()),""!==a&&d.push(a),new URL(`${d.join("/")}`)}shouldPrependVertexProjectPath(a){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||a.path.startsWith("projects/")||"GET"===a.httpMethod&&a.path.startsWith("publishers/google/models"))}async request(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);if(a.queryParams)for(let[b,c]of Object.entries(a.queryParams))d.searchParams.append(b,String(c));let e={};if("GET"===a.httpMethod){if(a.body&&"{}"!==a.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else e.body=a.body;return e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.unaryApiCall(d,e,a.httpMethod)}patchHttpOptions(a,b){let c=JSON.parse(JSON.stringify(a));for(let[a,d]of Object.entries(b))"object"==typeof d?c[a]=Object.assign(Object.assign({},c[a]),d):void 0!==d&&(c[a]=d);return c}async requestStream(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);d.searchParams.has("alt")&&"sse"===d.searchParams.get("alt")||d.searchParams.set("alt","sse");let e={};return e.body=a.body,e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.streamApiCall(d,e,a.httpMethod)}async includeExtraHttpOptionsToRequestInit(a,b,c,d){if(b&&b.timeout||d){let c=new AbortController,e=c.signal;if(b.timeout&&(null==b?void 0:b.timeout)>0){let a=setTimeout(()=>c.abort(),b.timeout);a&&"function"==typeof a.unref&&a.unref()}d&&d.addEventListener("abort",()=>{c.abort()}),a.signal=e}return b&&null!==b.extraBody&&function(a,b){if(!b||0===Object.keys(b).length)return;if(a.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let c={};if("string"==typeof a.body&&a.body.length>0)try{let b=JSON.parse(a.body);if("object"!=typeof b||null===b||Array.isArray(b))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");c=b}catch(a){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}a.body=JSON.stringify(function a(b,c){let d=Object.assign({},b);for(let b in c)if(Object.prototype.hasOwnProperty.call(c,b)){let e=c[b],f=d[b];e&&"object"==typeof e&&!Array.isArray(e)&&f&&"object"==typeof f&&!Array.isArray(f)?d[b]=a(f,e):(f&&e&&typeof f!=typeof e&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${b}". Original type: ${typeof f}, New type: ${typeof e}. Overwriting.`),d[b]=e)}return d}(c,b))}(a,b.extraBody),a.headers=await this.getHeadersInternal(b,c),a}async unaryApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await b3(a),new az(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}async streamApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await b3(a),this.processStreamResponse(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}processStreamResponse(a){return bD(this,arguments,function*(){var b;let c=null==(b=null==a?void 0:a.body)?void 0:b.getReader(),d=new TextDecoder("utf-8");if(!c)throw Error("Response body is empty");try{let b="",e="data:",f=["\n\n","\r\r","\r\n\r\n"];for(;;){let{done:g,value:h}=yield bC(c.read());if(g){if(b.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let i=d.decode(h,{stream:!0});try{let a=JSON.parse(i);if("error"in a){let b=JSON.parse(JSON.stringify(a.error)),c=b.status,d=b.code,e=`got status: ${c}. ${JSON.stringify(a)}`;if(d>=400&&d<600)throw new bJ({message:e,status:d})}}catch(a){if("ApiError"===a.name)throw a}b+=i;let j=-1,k=0;for(;;){for(let a of(j=-1,k=0,f)){let c=b.indexOf(a);-1!==c&&(-1===j||c<j)&&(j=c,k=a.length)}if(-1===j)break;let c=b.substring(0,j);b=b.substring(j+k);let d=c.trim();if(d.startsWith(e)){let b=d.substring(e.length).trim();try{let c=new Response(b,{headers:null==a?void 0:a.headers,status:null==a?void 0:a.status,statusText:null==a?void 0:a.statusText});yield yield bC(new az(c))}catch(a){throw Error(`exception parsing stream chunk ${b}. ${a}`)}}}}}finally{c.releaseLock()}})}async apiCall(a,b){return fetch(a,b).catch(a=>{throw Error(`exception ${a} sending request`)})}getDefaultHeaders(){let a={},b="google-genai-sdk/1.34.0 "+this.clientOptions.userAgentExtra;return a["User-Agent"]=b,a[b1]=b,a["Content-Type"]="application/json",a}async getHeadersInternal(a,b){let c=new Headers;if(a&&a.headers){for(let[b,d]of Object.entries(a.headers))c.append(b,d);a.timeout&&a.timeout>0&&c.append("X-Server-Timeout",String(Math.ceil(a.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(c,b),c}getFileName(a){var b;let c="";return"string"==typeof a&&(c=null!=(b=(c=a.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?b:""),c}async uploadFile(a,b){var c;let d={};null!=b&&(d.mimeType=b.mimeType,d.name=b.name,d.displayName=b.displayName),d.name&&!d.name.startsWith("files/")&&(d.name=`files/${d.name}`);let e=this.clientOptions.uploader,f=await e.stat(a);d.sizeBytes=String(f.size);let g=null!=(c=null==b?void 0:b.mimeType)?c:f.type;if(void 0===g||""===g)throw Error("Can not determine mimeType. Please provide mimeType in the config.");d.mimeType=g;let h={file:d},i=this.getFileName(a),j=au("upload/v1beta/files",h._url),k=await this.fetchUploadUrl(j,d.sizeBytes,d.mimeType,i,h,null==b?void 0:b.httpOptions);return e.upload(a,k,this)}async uploadFileToFileSearchStore(a,b,c){var d;let e=this.clientOptions.uploader,f=await e.stat(b),g=String(f.size),h=null!=(d=null==c?void 0:c.mimeType)?d:f.type;if(void 0===h||""===h)throw Error("Can not determine mimeType. Please provide mimeType in the config.");let i=`upload/v1beta/${a}:uploadToFileSearchStore`,j=this.getFileName(b),k={};null!=c&&b0(c,k);let l=await this.fetchUploadUrl(i,g,h,j,k,null==c?void 0:c.httpOptions);return e.uploadToFileSearchStore(b,l,this)}async downloadFile(a){let b=this.clientOptions.downloader;await b.download(a,this)}async fetchUploadUrl(a,b,c,d,e,f){var g;let h={};h=f||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${b}`,"X-Goog-Upload-Header-Content-Type":`${c}`},d?{"X-Goog-Upload-File-Name":d}:{})};let i=await this.request({path:a,body:JSON.stringify(e),httpMethod:"POST",httpOptions:h});if(!i||!(null==i?void 0:i.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let j=null==(g=null==i?void 0:i.headers)?void 0:g["x-goog-upload-url"];if(void 0===j)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return j}}async function b3(a){var b;if(void 0===a)throw Error("response is undefined");if(!a.ok){let c=a.status,d=JSON.stringify((null==(b=a.headers.get("content-type"))?void 0:b.includes("application/json"))?await a.json():{error:{message:await a.text(),code:a.status,status:a.statusText}});if(c>=400&&c<600)throw new bJ({message:d,status:c});throw Error(d)}}function b4(a){for(let c of a){var b;if(null!==(b=c)&&"object"==typeof b&&b instanceof b6||"object"==typeof c&&"inputSchema"in c)return!0}return!1}function b5(a){var b;let c=null!=(b=a[b1])?b:"";a[b1]=(c+" mcp_used/unknown").trimStart()}class b6{constructor(a=[],b){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=a,this.config=b}static create(a,b){return new b6(a,b)}async initialize(){var a,b,c,d;if(this.mcpTools.length>0)return;let e={},f=[];for(let j of this.mcpClients)try{for(var g,h=!0,i=(b=void 0,bE(function(a){return bD(this,arguments,function*(a,b=100){let c,d=0;for(;d<b;){let b=yield bC(a.listTools({cursor:c}));for(let a of b.tools)yield yield bC(a),d++;if(!b.nextCursor)break;c=b.nextCursor}})}(j)));!(a=(g=await i.next()).done);h=!0){d=g.value,h=!1,f.push(d);let a=d.name;if(e[a])throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);e[a]=j}}catch(a){b={error:a}}finally{try{!h&&!a&&(c=i.return)&&await c.call(i)}finally{if(b)throw b.error}}this.mcpTools=f,this.functionNameToMcpClient=e}async tool(){return await this.initialize(),function(a,b={}){let c=[],d=new Set;for(let e of a){let a=e.name;if(d.has(a))throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);d.add(a);let f=function(a,b={}){let c={name:a.name,description:a.description,parametersJsonSchema:a.inputSchema};return a.outputSchema&&(c.responseJsonSchema=a.outputSchema),b.behavior&&(c.behavior=b.behavior),{functionDeclarations:[c]}}(e,b);f.functionDeclarations&&c.push(...f.functionDeclarations)}return{functionDeclarations:c}}(this.mcpTools,this.config)}async callTool(a){await this.initialize();let b=[];for(let c of a)if(c.name in this.functionNameToMcpClient){let a,d=this.functionNameToMcpClient[c.name];this.config.timeout&&(a={timeout:this.config.timeout});let e=await d.callTool({name:c.name,arguments:c.args},void 0,a);b.push({functionResponse:{name:c.name,response:e.isError?{error:e}:e}})}return b}}async function b7(a,b,c){let d=new aZ;Object.assign(d,c.data instanceof Blob?JSON.parse(await c.data.text()):JSON.parse(c.data)),b(d)}class b8{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c}async connect(a){var b,c;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let d=this.apiClient.getWebsocketBaseUrl(),e=this.apiClient.getApiVersion(),f=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),h=`${d}/ws/google.ai.generativelanguage.${e}.GenerativeService.BidiGenerateMusic?key=${g}`,i=()=>{},j=new Promise(a=>{i=a}),k=a.callbacks,l=this.apiClient,m={onopen:function(){i({})},onmessage:a=>{b7(l,k.onmessage,a)},onerror:null!=(b=null==k?void 0:k.onerror)?b:function(a){},onclose:null!=(c=null==k?void 0:k.onclose)?c:function(a){}},n=this.webSocketFactory.create(h,function(a){let b={};return a.forEach((a,c)=>{b[c]=a}),b}(f),m);n.connect(),await j;let o=a_(this.apiClient,a.model);return n.send(JSON.stringify({setup:{model:o}})),new b9(n,this.apiClient)}}class b9{constructor(a,b){this.conn=a,this.apiClient=b}async setWeightedPrompts(a){if(!a.weightedPrompts||0===Object.keys(a.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let b=function(a){let b={},c=aw(a,["weightedPrompts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["weightedPrompts"],a)}return b}(a);this.conn.send(JSON.stringify({clientContent:b}))}async setMusicGenerationConfig(a){a.musicGenerationConfig||(a.musicGenerationConfig={});let b=function(a){let b={},c=aw(a,["musicGenerationConfig"]);return null!=c&&av(b,["musicGenerationConfig"],c),b}(a);this.conn.send(JSON.stringify(b))}sendPlaybackControl(a){this.conn.send(JSON.stringify({playbackControl:a}))}play(){this.sendPlaybackControl(aj.PLAY)}pause(){this.sendPlaybackControl(aj.PAUSE)}stop(){this.sendPlaybackControl(aj.STOP)}resetContext(){this.sendPlaybackControl(aj.RESET_CONTEXT)}close(){this.conn.close()}}async function ca(a,b,c){let d=new aY,e=JSON.parse(c.data instanceof Blob?await c.data.text():c.data instanceof ArrayBuffer?new TextDecoder().decode(c.data):c.data);a.isVertexAI()?Object.assign(d,function(a){let b={},c=aw(a,["setupComplete"]);null!=c&&av(b,["setupComplete"],c);let d=aw(a,["serverContent"]);null!=d&&av(b,["serverContent"],d);let e=aw(a,["toolCall"]);null!=e&&av(b,["toolCall"],e);let f=aw(a,["toolCallCancellation"]);null!=f&&av(b,["toolCallCancellation"],f);let g=aw(a,["usageMetadata"]);null!=g&&av(b,["usageMetadata"],function(a){let b={},c=aw(a,["promptTokenCount"]);null!=c&&av(b,["promptTokenCount"],c);let d=aw(a,["cachedContentTokenCount"]);null!=d&&av(b,["cachedContentTokenCount"],d);let e=aw(a,["candidatesTokenCount"]);null!=e&&av(b,["responseTokenCount"],e);let f=aw(a,["toolUsePromptTokenCount"]);null!=f&&av(b,["toolUsePromptTokenCount"],f);let g=aw(a,["thoughtsTokenCount"]);null!=g&&av(b,["thoughtsTokenCount"],g);let h=aw(a,["totalTokenCount"]);null!=h&&av(b,["totalTokenCount"],h);let i=aw(a,["promptTokensDetails"]);if(null!=i){let a=i;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["promptTokensDetails"],a)}let j=aw(a,["cacheTokensDetails"]);if(null!=j){let a=j;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["cacheTokensDetails"],a)}let k=aw(a,["candidatesTokensDetails"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["responseTokensDetails"],a)}let l=aw(a,["toolUsePromptTokensDetails"]);if(null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["toolUsePromptTokensDetails"],a)}let m=aw(a,["trafficType"]);return null!=m&&av(b,["trafficType"],m),b}(g));let h=aw(a,["goAway"]);null!=h&&av(b,["goAway"],h);let i=aw(a,["sessionResumptionUpdate"]);null!=i&&av(b,["sessionResumptionUpdate"],i);let j=aw(a,["voiceActivityDetectionSignal"]);return null!=j&&av(b,["voiceActivityDetectionSignal"],j),b}(e)):Object.assign(d,e),b(d)}class cb{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c,this.music=new b8(this.apiClient,this.auth,this.webSocketFactory)}async connect(a){var b,c,d,e,f,g;let h;if(a.config&&a.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let i=this.apiClient.getWebsocketBaseUrl(),j=this.apiClient.getApiVersion(),k=this.apiClient.getHeaders();a.config&&a.config.tools&&b4(a.config.tools)&&b5(k);let l=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(k);if(this.apiClient.isVertexAI())h=`${i}/ws/google.cloud.aiplatform.${j}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(l,h);else{let a=this.apiClient.getApiKey(),b="BidiGenerateContent",c="key";(null==a?void 0:a.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==j&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",c="access_token"),h=`${i}/ws/google.ai.generativelanguage.${j}.GenerativeService.${b}?${c}=${a}`}let m=()=>{},n=new Promise(a=>{m=a}),o=a.callbacks,p=this.apiClient,q={onopen:function(){var a;null==(a=null==o?void 0:o.onopen)||a.call(o),m({})},onmessage:a=>{ca(p,o.onmessage,a)},onerror:null!=(b=null==o?void 0:o.onerror)?b:function(a){},onclose:null!=(c=null==o?void 0:o.onclose)?c:function(a){}},r=this.webSocketFactory.create(h,function(a){let b={};return a.forEach((a,c)=>{b[c]=a}),b}(l),q);r.connect(),await n;let s=a_(this.apiClient,a.model);if(this.apiClient.isVertexAI()&&s.startsWith("publishers/")){let a=this.apiClient.getProject(),b=this.apiClient.getLocation();s=`projects/${a}/locations/${b}/`+s}let t={};this.apiClient.isVertexAI()&&(null==(d=a.config)?void 0:d.responseModalities)===void 0&&(void 0===a.config?a.config={responseModalities:[B.AUDIO]}:a.config.responseModalities=[B.AUDIO]),(null==(e=a.config)?void 0:e.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let u=null!=(g=null==(f=a.config)?void 0:f.tools)?g:[],v=[];for(let a of u)this.isCallableTool(a)?v.push(await a.tool()):v.push(a);v.length>0&&(a.config.tools=v);let w={model:s,config:a.config,callbacks:a.callbacks};return t=this.apiClient.isVertexAI()?function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["setup","model"],a_(a,d));let e=aw(b,["config"]);return null!=e&&av(c,["config"],function(a,b){let c=aw(a,["generationConfig"]);void 0!==b&&null!=c&&av(b,["setup","generationConfig"],function(a){let b={},c=aw(a,["modelSelectionConfig"]);null!=c&&av(b,["modelConfig"],c);let d=aw(a,["responseJsonSchema"]);null!=d&&av(b,["responseJsonSchema"],d);let e=aw(a,["audioTimestamp"]);null!=e&&av(b,["audioTimestamp"],e);let f=aw(a,["candidateCount"]);null!=f&&av(b,["candidateCount"],f);let g=aw(a,["enableAffectiveDialog"]);null!=g&&av(b,["enableAffectiveDialog"],g);let h=aw(a,["frequencyPenalty"]);null!=h&&av(b,["frequencyPenalty"],h);let i=aw(a,["logprobs"]);null!=i&&av(b,["logprobs"],i);let j=aw(a,["maxOutputTokens"]);null!=j&&av(b,["maxOutputTokens"],j);let k=aw(a,["mediaResolution"]);null!=k&&av(b,["mediaResolution"],k);let l=aw(a,["presencePenalty"]);null!=l&&av(b,["presencePenalty"],l);let m=aw(a,["responseLogprobs"]);null!=m&&av(b,["responseLogprobs"],m);let n=aw(a,["responseMimeType"]);null!=n&&av(b,["responseMimeType"],n);let o=aw(a,["responseModalities"]);null!=o&&av(b,["responseModalities"],o);let p=aw(a,["responseSchema"]);null!=p&&av(b,["responseSchema"],p);let q=aw(a,["routingConfig"]);null!=q&&av(b,["routingConfig"],q);let r=aw(a,["seed"]);null!=r&&av(b,["seed"],r);let s=aw(a,["speechConfig"]);null!=s&&av(b,["speechConfig"],s);let t=aw(a,["stopSequences"]);null!=t&&av(b,["stopSequences"],t);let u=aw(a,["temperature"]);null!=u&&av(b,["temperature"],u);let v=aw(a,["thinkingConfig"]);null!=v&&av(b,["thinkingConfig"],v);let w=aw(a,["topK"]);null!=w&&av(b,["topK"],w);let x=aw(a,["topP"]);if(null!=x&&av(b,["topP"],x),void 0!==aw(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(c));let d=aw(a,["responseModalities"]);void 0!==b&&null!=d&&av(b,["setup","generationConfig","responseModalities"],d);let e=aw(a,["temperature"]);void 0!==b&&null!=e&&av(b,["setup","generationConfig","temperature"],e);let f=aw(a,["topP"]);void 0!==b&&null!=f&&av(b,["setup","generationConfig","topP"],f);let g=aw(a,["topK"]);void 0!==b&&null!=g&&av(b,["setup","generationConfig","topK"],g);let h=aw(a,["maxOutputTokens"]);void 0!==b&&null!=h&&av(b,["setup","generationConfig","maxOutputTokens"],h);let i=aw(a,["mediaResolution"]);void 0!==b&&null!=i&&av(b,["setup","generationConfig","mediaResolution"],i);let j=aw(a,["seed"]);void 0!==b&&null!=j&&av(b,["setup","generationConfig","seed"],j);let k=aw(a,["speechConfig"]);void 0!==b&&null!=k&&av(b,["setup","generationConfig","speechConfig"],bf(k));let l=aw(a,["thinkingConfig"]);void 0!==b&&null!=l&&av(b,["setup","generationConfig","thinkingConfig"],l);let m=aw(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&av(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=aw(a,["systemInstruction"]);void 0!==b&&null!=n&&av(b,["setup","systemInstruction"],ba(n));let o=aw(a,["tools"]);if(void 0!==b&&null!=o){let a=bh(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==aw(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=aw(a,["description"]);null!=c&&av(b,["description"],c);let d=aw(a,["name"]);null!=d&&av(b,["name"],d);let e=aw(a,["parameters"]);null!=e&&av(b,["parameters"],e);let f=aw(a,["parametersJsonSchema"]);null!=f&&av(b,["parametersJsonSchema"],f);let g=aw(a,["response"]);null!=g&&av(b,["response"],g);let h=aw(a,["responseJsonSchema"]);return null!=h&&av(b,["responseJsonSchema"],h),b})(a))),av(b,["functionDeclarations"],a)}let d=aw(a,["retrieval"]);null!=d&&av(b,["retrieval"],d);let e=aw(a,["googleSearchRetrieval"]);null!=e&&av(b,["googleSearchRetrieval"],e);let f=aw(a,["computerUse"]);if(null!=f&&av(b,["computerUse"],f),void 0!==aw(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=aw(a,["codeExecution"]);null!=g&&av(b,["codeExecution"],g);let h=aw(a,["enterpriseWebSearch"]);null!=h&&av(b,["enterpriseWebSearch"],h);let i=aw(a,["googleMaps"]);null!=i&&av(b,["googleMaps"],i);let j=aw(a,["googleSearch"]);null!=j&&av(b,["googleSearch"],j);let k=aw(a,["urlContext"]);return null!=k&&av(b,["urlContext"],k),b})(bg(a)))),av(b,["setup","tools"],a)}let p=aw(a,["sessionResumption"]);void 0!==b&&null!=p&&av(b,["setup","sessionResumption"],p);let q=aw(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&av(b,["setup","inputAudioTranscription"],q);let r=aw(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&av(b,["setup","outputAudioTranscription"],r);let s=aw(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&av(b,["setup","realtimeInputConfig"],s);let t=aw(a,["contextWindowCompression"]);void 0!==b&&null!=t&&av(b,["setup","contextWindowCompression"],t);let u=aw(a,["proactivity"]);void 0!==b&&null!=u&&av(b,["setup","proactivity"],u);let v=aw(a,["explicitVadSignal"]);return void 0!==b&&null!=v&&av(b,["setup","explicitVadSignal"],v),{}}(e,c)),c}(this.apiClient,w):function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["setup","model"],a_(a,d));let e=aw(b,["config"]);return null!=e&&av(c,["config"],function(a,b){let c=aw(a,["generationConfig"]);void 0!==b&&null!=c&&av(b,["setup","generationConfig"],c);let d=aw(a,["responseModalities"]);void 0!==b&&null!=d&&av(b,["setup","generationConfig","responseModalities"],d);let e=aw(a,["temperature"]);void 0!==b&&null!=e&&av(b,["setup","generationConfig","temperature"],e);let f=aw(a,["topP"]);void 0!==b&&null!=f&&av(b,["setup","generationConfig","topP"],f);let g=aw(a,["topK"]);void 0!==b&&null!=g&&av(b,["setup","generationConfig","topK"],g);let h=aw(a,["maxOutputTokens"]);void 0!==b&&null!=h&&av(b,["setup","generationConfig","maxOutputTokens"],h);let i=aw(a,["mediaResolution"]);void 0!==b&&null!=i&&av(b,["setup","generationConfig","mediaResolution"],i);let j=aw(a,["seed"]);void 0!==b&&null!=j&&av(b,["setup","generationConfig","seed"],j);let k=aw(a,["speechConfig"]);void 0!==b&&null!=k&&av(b,["setup","generationConfig","speechConfig"],bf(k));let l=aw(a,["thinkingConfig"]);void 0!==b&&null!=l&&av(b,["setup","generationConfig","thinkingConfig"],l);let m=aw(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&av(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=aw(a,["systemInstruction"]);void 0!==b&&null!=n&&av(b,["setup","systemInstruction"],function(a){let b={},c=aw(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["mediaResolution"]);null!=c&&av(b,["mediaResolution"],c);let d=aw(a,["codeExecutionResult"]);null!=d&&av(b,["codeExecutionResult"],d);let e=aw(a,["executableCode"]);null!=e&&av(b,["executableCode"],e);let f=aw(a,["fileData"]);null!=f&&av(b,["fileData"],function(a){let b={};if(void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=aw(a,["fileUri"]);null!=c&&av(b,["fileUri"],c);let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(f));let g=aw(a,["functionCall"]);null!=g&&av(b,["functionCall"],function(a){let b={},c=aw(a,["id"]);null!=c&&av(b,["id"],c);let d=aw(a,["args"]);null!=d&&av(b,["args"],d);let e=aw(a,["name"]);if(null!=e&&av(b,["name"],e),void 0!==aw(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==aw(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=aw(a,["functionResponse"]);null!=h&&av(b,["functionResponse"],h);let i=aw(a,["inlineData"]);null!=i&&av(b,["inlineData"],bL(i));let j=aw(a,["text"]);null!=j&&av(b,["text"],j);let k=aw(a,["thought"]);null!=k&&av(b,["thought"],k);let l=aw(a,["thoughtSignature"]);null!=l&&av(b,["thoughtSignature"],l);let m=aw(a,["videoMetadata"]);return null!=m&&av(b,["videoMetadata"],m),b})(a))),av(b,["parts"],a)}let d=aw(a,["role"]);return null!=d&&av(b,["role"],d),b}(ba(n)));let o=aw(a,["tools"]);if(void 0!==b&&null!=o){let a=bh(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["functionDeclarations"],a)}if(void 0!==aw(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=aw(a,["googleSearchRetrieval"]);null!=d&&av(b,["googleSearchRetrieval"],d);let e=aw(a,["computerUse"]);null!=e&&av(b,["computerUse"],e);let f=aw(a,["fileSearch"]);null!=f&&av(b,["fileSearch"],f);let g=aw(a,["codeExecution"]);if(null!=g&&av(b,["codeExecution"],g),void 0!==aw(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=aw(a,["googleMaps"]);null!=h&&av(b,["googleMaps"],function(a){let b={};if(void 0!==aw(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=aw(a,["enableWidget"]);return null!=c&&av(b,["enableWidget"],c),b}(h));let i=aw(a,["googleSearch"]);null!=i&&av(b,["googleSearch"],function(a){let b={};if(void 0!==aw(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==aw(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=aw(a,["timeRangeFilter"]);return null!=c&&av(b,["timeRangeFilter"],c),b}(i));let j=aw(a,["urlContext"]);return null!=j&&av(b,["urlContext"],j),b})(bg(a)))),av(b,["setup","tools"],a)}let p=aw(a,["sessionResumption"]);void 0!==b&&null!=p&&av(b,["setup","sessionResumption"],function(a){let b={},c=aw(a,["handle"]);if(null!=c&&av(b,["handle"],c),void 0!==aw(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=aw(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&av(b,["setup","inputAudioTranscription"],q);let r=aw(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&av(b,["setup","outputAudioTranscription"],r);let s=aw(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&av(b,["setup","realtimeInputConfig"],s);let t=aw(a,["contextWindowCompression"]);void 0!==b&&null!=t&&av(b,["setup","contextWindowCompression"],t);let u=aw(a,["proactivity"]);if(void 0!==b&&null!=u&&av(b,["setup","proactivity"],u),void 0!==aw(a,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(e,c)),c}(this.apiClient,w),delete t.config,r.send(JSON.stringify(t)),new cd(r,this.apiClient)}isCallableTool(a){return"callTool"in a&&"function"==typeof a.callTool}}let cc={turnComplete:!0};class cd{constructor(a,b){this.conn=a,this.apiClient=b}tLiveClientContent(a,b){if(null!==b.turns&&void 0!==b.turns){let c=[];try{c=bc(b.turns),a.isVertexAI()||(c=c.map(a=>bM(a)))}catch(a){throw Error(`Failed to parse client content "turns", type: '${typeof b.turns}'`)}return{clientContent:{turns:c,turnComplete:b.turnComplete}}}return{clientContent:{turnComplete:b.turnComplete}}}tLiveClienttToolResponse(a,b){let c=[];if(null==b.functionResponses||0===(c=Array.isArray(b.functionResponses)?b.functionResponses:[b.functionResponses]).length)throw Error("functionResponses is required.");for(let b of c){if("object"!=typeof b||null===b||!("name"in b)||!("response"in b))throw Error(`Could not parse function response, type '${typeof b}'.`);if(!a.isVertexAI()&&!("id"in b))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:c}}}sendClientContent(a){a=Object.assign(Object.assign({},cc),a);let b=this.tLiveClientContent(this.apiClient,a);this.conn.send(JSON.stringify(b))}sendRealtimeInput(a){let b={};b=this.apiClient.isVertexAI()?{realtimeInput:function(a){let b={},c=aw(a,["media"]);if(null!=c){let a=a1(c);Array.isArray(a)&&(a=a.map(a=>a)),av(b,["mediaChunks"],a)}let d=aw(a,["audio"]);null!=d&&av(b,["audio"],a4(d));let e=aw(a,["audioStreamEnd"]);null!=e&&av(b,["audioStreamEnd"],e);let f=aw(a,["video"]);null!=f&&av(b,["video"],a3(f));let g=aw(a,["text"]);null!=g&&av(b,["text"],g);let h=aw(a,["activityStart"]);null!=h&&av(b,["activityStart"],h);let i=aw(a,["activityEnd"]);return null!=i&&av(b,["activityEnd"],i),b}(a)}:{realtimeInput:function(a){let b={},c=aw(a,["media"]);if(null!=c){let a=a1(c);Array.isArray(a)&&(a=a.map(a=>bL(a))),av(b,["mediaChunks"],a)}let d=aw(a,["audio"]);null!=d&&av(b,["audio"],bL(a4(d)));let e=aw(a,["audioStreamEnd"]);null!=e&&av(b,["audioStreamEnd"],e);let f=aw(a,["video"]);null!=f&&av(b,["video"],bL(a3(f)));let g=aw(a,["text"]);null!=g&&av(b,["text"],g);let h=aw(a,["activityStart"]);null!=h&&av(b,["activityStart"],h);let i=aw(a,["activityEnd"]);return null!=i&&av(b,["activityEnd"],i),b}(a)},this.conn.send(JSON.stringify(b))}sendToolResponse(a){if(null==a.functionResponses)throw Error("Tool response parameters are required.");let b=this.tLiveClienttToolResponse(this.apiClient,a);this.conn.send(JSON.stringify(b))}close(){this.conn.close()}}function ce(a){var b,c,d;if(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.disable)return!0;let e=!1;for(let b of null!=(c=null==a?void 0:a.tools)?c:[])if(cf(b)){e=!0;break}if(!e)return!0;let f=null==(d=null==a?void 0:a.automaticFunctionCalling)?void 0:d.maximumRemoteCalls;return(!(!f||!(f<0)&&Number.isInteger(f))||0==f)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0)}function cf(a){return"callTool"in a&&"function"==typeof a.callTool}function cg(a){var b;let c=[];return(null==(b=null==a?void 0:a.config)?void 0:b.tools)&&a.config.tools.forEach((a,b)=>{!cf(a)&&a.functionDeclarations&&a.functionDeclarations.length>0&&c.push(b)}),c}function ch(a){var b;return!(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.ignoreCallHistory)}class ci extends at{constructor(a){super(),this.apiClient=a,this.generateContent=async a=>{var b,c,d,e,f;let g,h,i=await this.processParamsMaybeAddMcpUsage(a);if(this.maybeMoveToResponseJsonSchem(a),!function(a){var b,c,d;return null!=(d=null==(c=null==(b=a.config)?void 0:b.tools)?void 0:c.some(a=>cf(a)))&&d}(a)||ce(a.config))return await this.generateContentInternal(i);let j=cg(a);if(j.length>0){let a=j.map(a=>`tools[${a}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${a}.`)}let k=bc(i.contents),l=null!=(d=null==(c=null==(b=i.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,m=0;for(;m<l&&(g=await this.generateContentInternal(i)).functionCalls&&0!==g.functionCalls.length;){let b=g.candidates[0].content,c=[];for(let b of null!=(f=null==(e=a.config)?void 0:e.tools)?f:[])if(cf(b)){let a=await b.callTool(g.functionCalls);c.push(...a)}m++,h={role:"user",parts:c},i.contents=bc(i.contents),i.contents.push(b),i.contents.push(h),ch(i.config)&&(k.push(b),k.push(h))}return ch(i.config)&&(g.automaticFunctionCallingHistory=k),g},this.generateContentStream=async a=>{var b,c,d,e,f;if(this.maybeMoveToResponseJsonSchem(a),ce(a.config)){let b=await this.processParamsMaybeAddMcpUsage(a);return await this.generateContentStreamInternal(b)}let g=cg(a);if(g.length>0){let a=g.map(a=>`tools[${a}]`).join(", ");throw Error(`Incompatible tools found at ${a}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let h=null==(d=null==(c=null==(b=null==a?void 0:a.config)?void 0:b.toolConfig)?void 0:c.functionCallingConfig)?void 0:d.streamFunctionCallArguments,i=null==(f=null==(e=null==a?void 0:a.config)?void 0:e.automaticFunctionCalling)?void 0:f.disable;if(h&&!i)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(a)},this.generateImages=async a=>await this.generateImagesInternal(a).then(a=>{var b;let c,d=[];if(null==a?void 0:a.generatedImages)for(let e of a.generatedImages)e&&(null==e?void 0:e.safetyAttributes)&&(null==(b=null==e?void 0:e.safetyAttributes)?void 0:b.contentType)==="Positive Prompt"?c=null==e?void 0:e.safetyAttributes:d.push(e);return c?{generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:a.sdkHttpResponse}:{generatedImages:d,sdkHttpResponse:a.sdkHttpResponse}}),this.list=async a=>{var b;let c={config:Object.assign(Object.assign({},{queryBase:!0}),null==a?void 0:a.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase)if(null==(b=c.config)?void 0:b.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else c.config.filter="labels.tune-type:*";return new bx(ak.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(c),c)},this.editImage=async a=>{let b={model:a.model,prompt:a.prompt,referenceImages:[],config:a.config};return a.referenceImages&&a.referenceImages&&(b.referenceImages=a.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(b)},this.upscaleImage=async a=>{let b={numberOfImages:1,mode:"upscale"};a.config&&(b=Object.assign(Object.assign({},b),a.config));let c={model:a.model,image:a.image,upscaleFactor:a.upscaleFactor,config:b};return await this.upscaleImageInternal(c)},this.generateVideos=async a=>{var b,c,d,e,f,g;if((a.prompt||a.image||a.video)&&a.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(b=a.video)?void 0:b.uri)&&(null==(c=a.video)?void 0:c.videoBytes)?a.video={uri:a.video.uri,mimeType:a.video.mimeType}:(null==(e=null==(d=a.source)?void 0:d.video)?void 0:e.uri)&&(null==(g=null==(f=a.source)?void 0:f.video)?void 0:g.videoBytes)&&(a.source.video={uri:a.source.video.uri,mimeType:a.source.video.mimeType})),await this.generateVideosInternal(a)}}maybeMoveToResponseJsonSchem(a){a.config&&a.config.responseSchema&&!a.config.responseJsonSchema&&Object.keys(a.config.responseSchema).includes("$schema")&&(a.config.responseJsonSchema=a.config.responseSchema,delete a.config.responseSchema)}async processParamsMaybeAddMcpUsage(a){var b,c,d;let e=null==(b=a.config)?void 0:b.tools;if(!e)return a;let f=await Promise.all(e.map(async a=>cf(a)?await a.tool():a)),g={model:a.model,contents:a.contents,config:Object.assign(Object.assign({},a.config),{tools:f})};if(g.config.tools=f,a.config&&a.config.tools&&b4(a.config.tools)){let b=Object.assign({},null!=(d=null==(c=a.config.httpOptions)?void 0:c.headers)?d:{});0===Object.keys(b).length&&(b=this.apiClient.getDefaultHeaders()),b5(b),g.config.httpOptions=Object.assign(Object.assign({},a.config.httpOptions),{headers:b})}return g}async initAfcToolsMap(a){var b,c,d;let e=new Map;for(let f of null!=(c=null==(b=a.config)?void 0:b.tools)?c:[])if(cf(f))for(let a of null!=(d=(await f.tool()).functionDeclarations)?d:[]){if(!a.name)throw Error("Function declaration name is required.");if(e.has(a.name))throw Error(`Duplicate tool declaration name: ${a.name}`);e.set(a.name,f)}return e}async processAfcStream(a){var b,c,d;let e=null!=(d=null==(c=null==(b=a.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,f=!1,g=0;return function(a,b,c){return bD(this,arguments,function*(){for(;g<e;){f&&(g++,f=!1);let p=yield bC(a.processParamsMaybeAddMcpUsage(c)),q=yield bC(a.generateContentStreamInternal(p)),r=[],s=[];try{for(var d,h,i,j,k,l,m,n=!0,o=(h=void 0,bE(q));!(d=(m=yield bC(o.next())).done);n=!0)if(j=m.value,n=!1,yield yield bC(j),j.candidates&&(null==(k=j.candidates[0])?void 0:k.content)){for(let a of(s.push(j.candidates[0].content),null!=(l=j.candidates[0].content.parts)?l:[]))if(g<e&&a.functionCall){if(!a.functionCall.name)throw Error("Function call name was not returned by the model.");if(b.has(a.functionCall.name)){let c=yield bC(b.get(a.functionCall.name).callTool([a.functionCall]));r.push(...c)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${a.functionCall.name}`)}}}catch(a){h={error:a}}finally{try{!n&&!d&&(i=o.return)&&(yield bC(i.call(o)))}finally{if(h)throw h.error}}if(r.length>0){f=!0;let a=new aA;a.candidates=[{content:{role:"user",parts:r}}],yield yield bC(a);let b=[];b.push(...s),b.push({role:"user",parts:r});let d=bc(c.contents).concat(b);c.contents=d}else break}})}(this,await this.initAfcToolsMap(a),a)}async generateContentInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=bO(this.apiClient,a);return f=au("{model}:generateContent",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=bQ(a),c=new aA;return Object.assign(c,b),c})}{let b=bN(this.apiClient,a);return f=au("{model}:generateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=bP(a),c=new aA;return Object.assign(c,b),c})}}async generateContentStreamInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=bO(this.apiClient,a);return f=au("{model}:streamGenerateContent?alt=sse",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(function(a){return bD(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=bE(a);!(b=(f=yield bC(h.next())).done);g=!0){e=f.value,g=!1;let a=bQ((yield bC(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new aA;Object.assign(b,a),yield yield bC(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield bC(d.call(h)))}finally{if(c)throw c.error}}})})}{let b=bN(this.apiClient,a);return f=au("{model}:streamGenerateContent?alt=sse",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(function(a){return bD(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=bE(a);!(b=(f=yield bC(h.next())).done);g=!0){e=f.value,g=!1;let a=bP((yield bC(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new aA;Object.assign(b,a),yield yield bC(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield bC(d.call(h)))}finally{if(c)throw c.error}}})})}}async embedContent(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let b=bb(a,e);Array.isArray(b)&&(b=b.map(a=>a)),av(c,["instances[]","content"],b)}let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["taskType"]);void 0!==b&&null!=c&&av(b,["instances[]","task_type"],c);let d=aw(a,["title"]);void 0!==b&&null!=d&&av(b,["instances[]","title"],d);let e=aw(a,["outputDimensionality"]);void 0!==b&&null!=e&&av(b,["parameters","outputDimensionality"],e);let f=aw(a,["mimeType"]);void 0!==b&&null!=f&&av(b,["instances[]","mimeType"],f);let g=aw(a,["autoTruncate"]);void 0!==b&&null!=g&&av(b,["parameters","autoTruncate"],g)}(f,c),c}(this.apiClient,a);return f=au("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["predictions[]","embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["values"]);null!=c&&av(b,["values"],c);let d=aw(a,["statistics"]);return null!=d&&av(b,["statistics"],function(a){let b={},c=aw(a,["truncated"]);null!=c&&av(b,["truncated"],c);let d=aw(a,["token_count"]);return null!=d&&av(b,["tokenCount"],d),b}(d)),b})(a))),av(b,["embeddings"],a)}let e=aw(a,["metadata"]);return null!=e&&av(b,["metadata"],e),b}(a),c=new aB;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let b=bb(a,e);Array.isArray(b)&&(b=b.map(a=>a)),av(c,["requests[]","content"],b)}let f=aw(b,["config"]);null!=f&&function(a,b){let c=aw(a,["taskType"]);void 0!==b&&null!=c&&av(b,["requests[]","taskType"],c);let d=aw(a,["title"]);void 0!==b&&null!=d&&av(b,["requests[]","title"],d);let e=aw(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&av(b,["requests[]","outputDimensionality"],e),void 0!==aw(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==aw(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(f,c);let g=aw(b,["model"]);return void 0!==g&&av(c,["requests[]","model"],a_(a,g)),c}(this.apiClient,a);return f=au("{model}:batchEmbedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["embeddings"],a)}let e=aw(a,["metadata"]);return null!=e&&av(b,["metadata"],e),b}(a),c=new aB;return Object.assign(c,b),c})}}async generateImagesInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["prompt"]);null!=e&&av(c,["instances[0]","prompt"],e);let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["outputGcsUri"]);void 0!==b&&null!=c&&av(b,["parameters","storageUri"],c);let d=aw(a,["negativePrompt"]);void 0!==b&&null!=d&&av(b,["parameters","negativePrompt"],d);let e=aw(a,["numberOfImages"]);void 0!==b&&null!=e&&av(b,["parameters","sampleCount"],e);let f=aw(a,["aspectRatio"]);void 0!==b&&null!=f&&av(b,["parameters","aspectRatio"],f);let g=aw(a,["guidanceScale"]);void 0!==b&&null!=g&&av(b,["parameters","guidanceScale"],g);let h=aw(a,["seed"]);void 0!==b&&null!=h&&av(b,["parameters","seed"],h);let i=aw(a,["safetyFilterLevel"]);void 0!==b&&null!=i&&av(b,["parameters","safetySetting"],i);let j=aw(a,["personGeneration"]);void 0!==b&&null!=j&&av(b,["parameters","personGeneration"],j);let k=aw(a,["includeSafetyAttributes"]);void 0!==b&&null!=k&&av(b,["parameters","includeSafetyAttributes"],k);let l=aw(a,["includeRaiReason"]);void 0!==b&&null!=l&&av(b,["parameters","includeRaiReason"],l);let m=aw(a,["language"]);void 0!==b&&null!=m&&av(b,["parameters","language"],m);let n=aw(a,["outputMimeType"]);void 0!==b&&null!=n&&av(b,["parameters","outputOptions","mimeType"],n);let o=aw(a,["outputCompressionQuality"]);void 0!==b&&null!=o&&av(b,["parameters","outputOptions","compressionQuality"],o);let p=aw(a,["addWatermark"]);void 0!==b&&null!=p&&av(b,["parameters","addWatermark"],p);let q=aw(a,["labels"]);void 0!==b&&null!=q&&av(b,["labels"],q);let r=aw(a,["imageSize"]);void 0!==b&&null!=r&&av(b,["parameters","sampleImageSize"],r);let s=aw(a,["enhancePrompt"]);void 0!==b&&null!=s&&av(b,["parameters","enhancePrompt"],s)}(f,c),c}(this.apiClient,a);return f=au("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>bR(a))),av(b,["generatedImages"],a)}let e=aw(a,["positivePromptSafetyAttributes"]);return null!=e&&av(b,["positivePromptSafetyAttributes"],bY(e)),b}(a),c=new aC;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["prompt"]);null!=e&&av(c,["instances[0]","prompt"],e);let f=aw(b,["config"]);return null!=f&&function(a,b){if(void 0!==aw(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==aw(a,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let c=aw(a,["numberOfImages"]);void 0!==b&&null!=c&&av(b,["parameters","sampleCount"],c);let d=aw(a,["aspectRatio"]);void 0!==b&&null!=d&&av(b,["parameters","aspectRatio"],d);let e=aw(a,["guidanceScale"]);if(void 0!==b&&null!=e&&av(b,["parameters","guidanceScale"],e),void 0!==aw(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let f=aw(a,["safetyFilterLevel"]);void 0!==b&&null!=f&&av(b,["parameters","safetySetting"],f);let g=aw(a,["personGeneration"]);void 0!==b&&null!=g&&av(b,["parameters","personGeneration"],g);let h=aw(a,["includeSafetyAttributes"]);void 0!==b&&null!=h&&av(b,["parameters","includeSafetyAttributes"],h);let i=aw(a,["includeRaiReason"]);void 0!==b&&null!=i&&av(b,["parameters","includeRaiReason"],i);let j=aw(a,["language"]);void 0!==b&&null!=j&&av(b,["parameters","language"],j);let k=aw(a,["outputMimeType"]);void 0!==b&&null!=k&&av(b,["parameters","outputOptions","mimeType"],k);let l=aw(a,["outputCompressionQuality"]);if(void 0!==b&&null!=l&&av(b,["parameters","outputOptions","compressionQuality"],l),void 0!==aw(a,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==aw(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let m=aw(a,["imageSize"]);if(void 0!==b&&null!=m&&av(b,["parameters","sampleImageSize"],m),void 0!==aw(a,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(f,c),c}(this.apiClient,a);return f=au("{model}:predict",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["_self"]);null!=c&&av(b,["image"],function(a){let b={},c=aw(a,["bytesBase64Encoded"]);null!=c&&av(b,["imageBytes"],ax(c));let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(c));let d=aw(a,["raiFilteredReason"]);null!=d&&av(b,["raiFilteredReason"],d);let e=aw(a,["_self"]);return null!=e&&av(b,["safetyAttributes"],bX(e)),b})(a))),av(b,["generatedImages"],a)}let e=aw(a,["positivePromptSafetyAttributes"]);return null!=e&&av(b,["positivePromptSafetyAttributes"],bX(e)),b}(a),c=new aC;return Object.assign(c,b),c})}}async editImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["prompt"]);null!=e&&av(c,["instances[0]","prompt"],e);let f=aw(b,["referenceImages"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["referenceImage"]);null!=c&&av(b,["referenceImage"],bU(c));let d=aw(a,["referenceId"]);null!=d&&av(b,["referenceId"],d);let e=aw(a,["referenceType"]);null!=e&&av(b,["referenceType"],e);let f=aw(a,["maskImageConfig"]);null!=f&&av(b,["maskImageConfig"],function(a){let b={},c=aw(a,["maskMode"]);null!=c&&av(b,["maskMode"],c);let d=aw(a,["segmentationClasses"]);null!=d&&av(b,["maskClasses"],d);let e=aw(a,["maskDilation"]);return null!=e&&av(b,["dilation"],e),b}(f));let g=aw(a,["controlImageConfig"]);null!=g&&av(b,["controlImageConfig"],function(a){let b={},c=aw(a,["controlType"]);null!=c&&av(b,["controlType"],c);let d=aw(a,["enableControlImageComputation"]);return null!=d&&av(b,["computeControl"],d),b}(g));let h=aw(a,["styleImageConfig"]);null!=h&&av(b,["styleImageConfig"],h);let i=aw(a,["subjectImageConfig"]);return null!=i&&av(b,["subjectImageConfig"],i),b})(a))),av(c,["instances[0]","referenceImages"],a)}let g=aw(b,["config"]);return null!=g&&function(a,b){let c=aw(a,["outputGcsUri"]);void 0!==b&&null!=c&&av(b,["parameters","storageUri"],c);let d=aw(a,["negativePrompt"]);void 0!==b&&null!=d&&av(b,["parameters","negativePrompt"],d);let e=aw(a,["numberOfImages"]);void 0!==b&&null!=e&&av(b,["parameters","sampleCount"],e);let f=aw(a,["aspectRatio"]);void 0!==b&&null!=f&&av(b,["parameters","aspectRatio"],f);let g=aw(a,["guidanceScale"]);void 0!==b&&null!=g&&av(b,["parameters","guidanceScale"],g);let h=aw(a,["seed"]);void 0!==b&&null!=h&&av(b,["parameters","seed"],h);let i=aw(a,["safetyFilterLevel"]);void 0!==b&&null!=i&&av(b,["parameters","safetySetting"],i);let j=aw(a,["personGeneration"]);void 0!==b&&null!=j&&av(b,["parameters","personGeneration"],j);let k=aw(a,["includeSafetyAttributes"]);void 0!==b&&null!=k&&av(b,["parameters","includeSafetyAttributes"],k);let l=aw(a,["includeRaiReason"]);void 0!==b&&null!=l&&av(b,["parameters","includeRaiReason"],l);let m=aw(a,["language"]);void 0!==b&&null!=m&&av(b,["parameters","language"],m);let n=aw(a,["outputMimeType"]);void 0!==b&&null!=n&&av(b,["parameters","outputOptions","mimeType"],n);let o=aw(a,["outputCompressionQuality"]);void 0!==b&&null!=o&&av(b,["parameters","outputOptions","compressionQuality"],o);let p=aw(a,["addWatermark"]);void 0!==b&&null!=p&&av(b,["parameters","addWatermark"],p);let q=aw(a,["labels"]);void 0!==b&&null!=q&&av(b,["labels"],q);let r=aw(a,["editMode"]);void 0!==b&&null!=r&&av(b,["parameters","editMode"],r);let s=aw(a,["baseSteps"]);void 0!==b&&null!=s&&av(b,["parameters","editConfig","baseSteps"],s)}(g,c),c}(this.apiClient,a);return d=au("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>bR(a))),av(b,["generatedImages"],a)}return b}(a),c=new aD;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["image"]);null!=e&&av(c,["instances[0]","image"],bU(e));let f=aw(b,["upscaleFactor"]);null!=f&&av(c,["parameters","upscaleConfig","upscaleFactor"],f);let g=aw(b,["config"]);return null!=g&&function(a,b){let c=aw(a,["outputGcsUri"]);void 0!==b&&null!=c&&av(b,["parameters","storageUri"],c);let d=aw(a,["safetyFilterLevel"]);void 0!==b&&null!=d&&av(b,["parameters","safetySetting"],d);let e=aw(a,["personGeneration"]);void 0!==b&&null!=e&&av(b,["parameters","personGeneration"],e);let f=aw(a,["includeRaiReason"]);void 0!==b&&null!=f&&av(b,["parameters","includeRaiReason"],f);let g=aw(a,["outputMimeType"]);void 0!==b&&null!=g&&av(b,["parameters","outputOptions","mimeType"],g);let h=aw(a,["outputCompressionQuality"]);void 0!==b&&null!=h&&av(b,["parameters","outputOptions","compressionQuality"],h);let i=aw(a,["enhanceInputImage"]);void 0!==b&&null!=i&&av(b,["parameters","upscaleConfig","enhanceInputImage"],i);let j=aw(a,["imagePreservationFactor"]);void 0!==b&&null!=j&&av(b,["parameters","upscaleConfig","imagePreservationFactor"],j);let k=aw(a,["labels"]);void 0!==b&&null!=k&&av(b,["labels"],k);let l=aw(a,["numberOfImages"]);void 0!==b&&null!=l&&av(b,["parameters","sampleCount"],l);let m=aw(a,["mode"]);void 0!==b&&null!=m&&av(b,["parameters","mode"],m)}(g,c),c}(this.apiClient,a);return d=au("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>bR(a))),av(b,["generatedImages"],a)}return b}(a),c=new aE;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["source"]);null!=e&&function(a,b){let c=aw(a,["prompt"]);void 0!==b&&null!=c&&av(b,["instances[0]","prompt"],c);let d=aw(a,["personImage"]);void 0!==b&&null!=d&&av(b,["instances[0]","personImage","image"],bU(d));let e=aw(a,["productImages"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["productImage"]);return null!=c&&av(b,["image"],bU(c)),b})(a))),av(b,["instances[0]","productImages"],a)}}(e,c);let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["numberOfImages"]);void 0!==b&&null!=c&&av(b,["parameters","sampleCount"],c);let d=aw(a,["baseSteps"]);void 0!==b&&null!=d&&av(b,["parameters","baseSteps"],d);let e=aw(a,["outputGcsUri"]);void 0!==b&&null!=e&&av(b,["parameters","storageUri"],e);let f=aw(a,["seed"]);void 0!==b&&null!=f&&av(b,["parameters","seed"],f);let g=aw(a,["safetyFilterLevel"]);void 0!==b&&null!=g&&av(b,["parameters","safetySetting"],g);let h=aw(a,["personGeneration"]);void 0!==b&&null!=h&&av(b,["parameters","personGeneration"],h);let i=aw(a,["addWatermark"]);void 0!==b&&null!=i&&av(b,["parameters","addWatermark"],i);let j=aw(a,["outputMimeType"]);void 0!==b&&null!=j&&av(b,["parameters","outputOptions","mimeType"],j);let k=aw(a,["outputCompressionQuality"]);void 0!==b&&null!=k&&av(b,["parameters","outputOptions","compressionQuality"],k);let l=aw(a,["enhancePrompt"]);void 0!==b&&null!=l&&av(b,["parameters","enhancePrompt"],l);let m=aw(a,["labels"]);void 0!==b&&null!=m&&av(b,["labels"],m)}(f,c),c}(this.apiClient,a);return d=au("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>bR(a))),av(b,["generatedImages"],a)}return b}(a),c=new aF;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["source"]);null!=e&&function(a,b){let c=aw(a,["prompt"]);void 0!==b&&null!=c&&av(b,["instances[0]","prompt"],c);let d=aw(a,["image"]);void 0!==b&&null!=d&&av(b,["instances[0]","image"],bU(d));let e=aw(a,["scribbleImage"]);void 0!==b&&null!=e&&av(b,["instances[0]","scribble"],function(a){let b={},c=aw(a,["image"]);return null!=c&&av(b,["image"],bU(c)),b}(e))}(e,c);let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["mode"]);void 0!==b&&null!=c&&av(b,["parameters","mode"],c);let d=aw(a,["maxPredictions"]);void 0!==b&&null!=d&&av(b,["parameters","maxPredictions"],d);let e=aw(a,["confidenceThreshold"]);void 0!==b&&null!=e&&av(b,["parameters","confidenceThreshold"],e);let f=aw(a,["maskDilation"]);void 0!==b&&null!=f&&av(b,["parameters","maskDilation"],f);let g=aw(a,["binaryColorThreshold"]);void 0!==b&&null!=g&&av(b,["parameters","binaryColorThreshold"],g);let h=aw(a,["labels"]);void 0!==b&&null!=h&&av(b,["labels"],h)}(f,c),c}(this.apiClient,a);return d=au("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["_self"]);null!=c&&av(b,["mask"],bS(c));let d=aw(a,["labels"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["labels"],a)}return b})(a))),av(b,["generatedMasks"],a)}return b}(a),c=new aG;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async get(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);return null!=d&&av(c,["_url","name"],a_(a,d)),c}(this.apiClient,a);return f=au("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>bW(a))}{let b=function(a,b){let c={},d=aw(b,["model"]);return null!=d&&av(c,["_url","name"],a_(a,d)),c}(this.apiClient,a);return f=au("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>bV(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["config"]);return null!=d&&function(a,b,c){let d=aw(b,["pageSize"]);void 0!==c&&null!=d&&av(c,["_query","pageSize"],d);let e=aw(b,["pageToken"]);void 0!==c&&null!=e&&av(c,["_query","pageToken"],e);let f=aw(b,["filter"]);void 0!==c&&null!=f&&av(c,["_query","filter"],f);let g=aw(b,["queryBase"]);void 0!==c&&null!=g&&av(c,["_url","models_url"],bn(a,g))}(a,d,c),c}(this.apiClient,a);return f=au("{models_url}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["_self"]);if(null!=e){let a=bo(e);Array.isArray(a)&&(a=a.map(a=>bW(a))),av(b,["models"],a)}return b}(a),c=new aH;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(b,["config"]);return null!=d&&function(a,b,c){let d=aw(b,["pageSize"]);void 0!==c&&null!=d&&av(c,["_query","pageSize"],d);let e=aw(b,["pageToken"]);void 0!==c&&null!=e&&av(c,["_query","pageToken"],e);let f=aw(b,["filter"]);void 0!==c&&null!=f&&av(c,["_query","filter"],f);let g=aw(b,["queryBase"]);void 0!==c&&null!=g&&av(c,["_url","models_url"],bn(a,g))}(a,d,c),c}(this.apiClient,a);return f=au("{models_url}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["_self"]);if(null!=e){let a=bo(e);Array.isArray(a)&&(a=a.map(a=>bV(a))),av(b,["models"],a)}return b}(a),c=new aH;return Object.assign(c,b),c})}}async update(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["config"]);return null!=e&&function(a,b){let c=aw(a,["displayName"]);void 0!==b&&null!=c&&av(b,["displayName"],c);let d=aw(a,["description"]);void 0!==b&&null!=d&&av(b,["description"],d);let e=aw(a,["defaultCheckpointId"]);void 0!==b&&null!=e&&av(b,["defaultCheckpointId"],e)}(e,c),c}(this.apiClient,a);return f=au("{model}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>bW(a))}{let b=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","name"],a_(a,d));let e=aw(b,["config"]);return null!=e&&function(a,b){let c=aw(a,["displayName"]);void 0!==b&&null!=c&&av(b,["displayName"],c);let d=aw(a,["description"]);void 0!==b&&null!=d&&av(b,["description"],d);let e=aw(a,["defaultCheckpointId"]);void 0!==b&&null!=e&&av(b,["defaultCheckpointId"],e)}(e,c),c}(this.apiClient,a);return f=au("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>bV(a))}}async delete(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);return null!=d&&av(c,["_url","name"],a_(a,d)),c}(this.apiClient,a);return f=au("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);return null!=c&&av(b,["sdkHttpResponse"],c),b}(a),c=new aI;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(b,["model"]);return null!=d&&av(c,["_url","name"],a_(a,d)),c}(this.apiClient,a);return f=au("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);return null!=c&&av(b,["sdkHttpResponse"],c),b}(a),c=new aI;return Object.assign(c,b),c})}}async countTokens(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let a=bc(e);Array.isArray(a)&&(a=a.map(a=>a)),av(c,["contents"],a)}let f=aw(b,["config"]);return null!=f&&function(a,b){let c=aw(a,["systemInstruction"]);void 0!==b&&null!=c&&av(b,["systemInstruction"],ba(c));let d=aw(a,["tools"]);if(void 0!==b&&null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>bZ(a))),av(b,["tools"],a)}let e=aw(a,["generationConfig"]);void 0!==b&&null!=e&&av(b,["generationConfig"],function(a){let b={},c=aw(a,["modelSelectionConfig"]);null!=c&&av(b,["modelConfig"],c);let d=aw(a,["responseJsonSchema"]);null!=d&&av(b,["responseJsonSchema"],d);let e=aw(a,["audioTimestamp"]);null!=e&&av(b,["audioTimestamp"],e);let f=aw(a,["candidateCount"]);null!=f&&av(b,["candidateCount"],f);let g=aw(a,["enableAffectiveDialog"]);null!=g&&av(b,["enableAffectiveDialog"],g);let h=aw(a,["frequencyPenalty"]);null!=h&&av(b,["frequencyPenalty"],h);let i=aw(a,["logprobs"]);null!=i&&av(b,["logprobs"],i);let j=aw(a,["maxOutputTokens"]);null!=j&&av(b,["maxOutputTokens"],j);let k=aw(a,["mediaResolution"]);null!=k&&av(b,["mediaResolution"],k);let l=aw(a,["presencePenalty"]);null!=l&&av(b,["presencePenalty"],l);let m=aw(a,["responseLogprobs"]);null!=m&&av(b,["responseLogprobs"],m);let n=aw(a,["responseMimeType"]);null!=n&&av(b,["responseMimeType"],n);let o=aw(a,["responseModalities"]);null!=o&&av(b,["responseModalities"],o);let p=aw(a,["responseSchema"]);null!=p&&av(b,["responseSchema"],p);let q=aw(a,["routingConfig"]);null!=q&&av(b,["routingConfig"],q);let r=aw(a,["seed"]);null!=r&&av(b,["seed"],r);let s=aw(a,["speechConfig"]);null!=s&&av(b,["speechConfig"],s);let t=aw(a,["stopSequences"]);null!=t&&av(b,["stopSequences"],t);let u=aw(a,["temperature"]);null!=u&&av(b,["temperature"],u);let v=aw(a,["thinkingConfig"]);null!=v&&av(b,["thinkingConfig"],v);let w=aw(a,["topK"]);null!=w&&av(b,["topK"],w);let x=aw(a,["topP"]);if(null!=x&&av(b,["topP"],x),void 0!==aw(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(e))}(f,c),c}(this.apiClient,a);return f=au("{model}:countTokens",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["totalTokens"]);return null!=d&&av(b,["totalTokens"],d),b}(a),c=new aJ;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let a=bc(e);Array.isArray(a)&&(a=a.map(a=>bM(a))),av(c,["contents"],a)}let f=aw(b,["config"]);return null!=f&&function(a){if(void 0!==aw(a,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==aw(a,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==aw(a,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(f),c}(this.apiClient,a);return f=au("{model}:countTokens",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["totalTokens"]);null!=d&&av(b,["totalTokens"],d);let e=aw(a,["cachedContentTokenCount"]);return null!=e&&av(b,["cachedContentTokenCount"],e),b}(a),c=new aJ;return Object.assign(c,b),c})}}async computeTokens(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["contents"]);if(null!=e){let a=bc(e);Array.isArray(a)&&(a=a.map(a=>a)),av(c,["contents"],a)}return c}(this.apiClient,a);return d=au("{model}:computeTokens",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["tokensInfo"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["tokensInfo"],a)}return b}(a),c=new aK;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["prompt"]);null!=e&&av(c,["instances[0]","prompt"],e);let f=aw(b,["image"]);null!=f&&av(c,["instances[0]","image"],bU(f));let g=aw(b,["video"]);null!=g&&av(c,["instances[0]","video"],b_(g));let h=aw(b,["source"]);null!=h&&function(a,b){let c=aw(a,["prompt"]);void 0!==b&&null!=c&&av(b,["instances[0]","prompt"],c);let d=aw(a,["image"]);void 0!==b&&null!=d&&av(b,["instances[0]","image"],bU(d));let e=aw(a,["video"]);void 0!==b&&null!=e&&av(b,["instances[0]","video"],b_(e))}(h,c);let i=aw(b,["config"]);return null!=i&&function(a,b){let c=aw(a,["numberOfVideos"]);void 0!==b&&null!=c&&av(b,["parameters","sampleCount"],c);let d=aw(a,["outputGcsUri"]);void 0!==b&&null!=d&&av(b,["parameters","storageUri"],d);let e=aw(a,["fps"]);void 0!==b&&null!=e&&av(b,["parameters","fps"],e);let f=aw(a,["durationSeconds"]);void 0!==b&&null!=f&&av(b,["parameters","durationSeconds"],f);let g=aw(a,["seed"]);void 0!==b&&null!=g&&av(b,["parameters","seed"],g);let h=aw(a,["aspectRatio"]);void 0!==b&&null!=h&&av(b,["parameters","aspectRatio"],h);let i=aw(a,["resolution"]);void 0!==b&&null!=i&&av(b,["parameters","resolution"],i);let j=aw(a,["personGeneration"]);void 0!==b&&null!=j&&av(b,["parameters","personGeneration"],j);let k=aw(a,["pubsubTopic"]);void 0!==b&&null!=k&&av(b,["parameters","pubsubTopic"],k);let l=aw(a,["negativePrompt"]);void 0!==b&&null!=l&&av(b,["parameters","negativePrompt"],l);let m=aw(a,["enhancePrompt"]);void 0!==b&&null!=m&&av(b,["parameters","enhancePrompt"],m);let n=aw(a,["generateAudio"]);void 0!==b&&null!=n&&av(b,["parameters","generateAudio"],n);let o=aw(a,["lastFrame"]);void 0!==b&&null!=o&&av(b,["instances[0]","lastFrame"],bU(o));let p=aw(a,["referenceImages"]);if(void 0!==b&&null!=p){let a=p;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["image"]);null!=c&&av(b,["image"],bU(c));let d=aw(a,["referenceType"]);return null!=d&&av(b,["referenceType"],d),b})(a))),av(b,["instances[0]","referenceImages"],a)}let q=aw(a,["mask"]);void 0!==b&&null!=q&&av(b,["instances[0]","mask"],function(a){let b={},c=aw(a,["image"]);null!=c&&av(b,["_self"],bU(c));let d=aw(a,["maskMode"]);return null!=d&&av(b,["maskMode"],d),b}(q));let r=aw(a,["compressionQuality"]);void 0!==b&&null!=r&&av(b,["parameters","compressionQuality"],r)}(i,c),c}(this.apiClient,a);return f=au("{model}:predictLongRunning",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata"]);null!=d&&av(b,["metadata"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["response"]);return null!=g&&av(b,["response"],function(a){let b={},c=aw(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["_self"]);return null!=c&&av(b,["video"],function(a){let b={},c=aw(a,["gcsUri"]);null!=c&&av(b,["uri"],c);let d=aw(a,["bytesBase64Encoded"]);null!=d&&av(b,["videoBytes"],ax(d));let e=aw(a,["mimeType"]);return null!=e&&av(b,["mimeType"],e),b}(c)),b})(a))),av(b,["generatedVideos"],a)}let d=aw(a,["raiMediaFilteredCount"]);null!=d&&av(b,["raiMediaFilteredCount"],d);let e=aw(a,["raiMediaFilteredReasons"]);return null!=e&&av(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a),c=new aL;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["_url","model"],a_(a,d));let e=aw(b,["prompt"]);null!=e&&av(c,["instances[0]","prompt"],e);let f=aw(b,["image"]);null!=f&&av(c,["instances[0]","image"],bT(f));let g=aw(b,["video"]);null!=g&&av(c,["instances[0]","video"],b$(g));let h=aw(b,["source"]);null!=h&&function(a,b){let c=aw(a,["prompt"]);void 0!==b&&null!=c&&av(b,["instances[0]","prompt"],c);let d=aw(a,["image"]);void 0!==b&&null!=d&&av(b,["instances[0]","image"],bT(d));let e=aw(a,["video"]);void 0!==b&&null!=e&&av(b,["instances[0]","video"],b$(e))}(h,c);let i=aw(b,["config"]);return null!=i&&function(a,b){let c=aw(a,["numberOfVideos"]);if(void 0!==b&&null!=c&&av(b,["parameters","sampleCount"],c),void 0!==aw(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==aw(a,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let d=aw(a,["durationSeconds"]);if(void 0!==b&&null!=d&&av(b,["parameters","durationSeconds"],d),void 0!==aw(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let e=aw(a,["aspectRatio"]);void 0!==b&&null!=e&&av(b,["parameters","aspectRatio"],e);let f=aw(a,["resolution"]);void 0!==b&&null!=f&&av(b,["parameters","resolution"],f);let g=aw(a,["personGeneration"]);if(void 0!==b&&null!=g&&av(b,["parameters","personGeneration"],g),void 0!==aw(a,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let h=aw(a,["negativePrompt"]);void 0!==b&&null!=h&&av(b,["parameters","negativePrompt"],h);let i=aw(a,["enhancePrompt"]);if(void 0!==b&&null!=i&&av(b,["parameters","enhancePrompt"],i),void 0!==aw(a,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let j=aw(a,["lastFrame"]);void 0!==b&&null!=j&&av(b,["instances[0]","lastFrame"],bT(j));let k=aw(a,["referenceImages"]);if(void 0!==b&&null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["image"]);null!=c&&av(b,["image"],bT(c));let d=aw(a,["referenceType"]);return null!=d&&av(b,["referenceType"],d),b})(a))),av(b,["instances[0]","referenceImages"],a)}if(void 0!==aw(a,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==aw(a,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(i,c),c}(this.apiClient,a);return f=au("{model}:predictLongRunning",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata"]);null!=d&&av(b,["metadata"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["response","generateVideoResponse"]);return null!=g&&av(b,["response"],function(a){let b={},c=aw(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["video"]);return null!=c&&av(b,["video"],function(a){let b={},c=aw(a,["uri"]);null!=c&&av(b,["uri"],c);let d=aw(a,["encodedVideo"]);null!=d&&av(b,["videoBytes"],ax(d));let e=aw(a,["encoding"]);return null!=e&&av(b,["mimeType"],e),b}(c)),b})(a))),av(b,["generatedVideos"],a)}let d=aw(a,["raiMediaFilteredCount"]);null!=d&&av(b,["raiMediaFilteredCount"],d);let e=aw(a,["raiMediaFilteredReasons"]);return null!=e&&av(b,["raiMediaFilteredReasons"],e),b}(g)),b}(a),c=new aL;return Object.assign(c,b),c})}}}class cj extends at{constructor(a){super(),this.apiClient=a}async getVideosOperation(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a){let b={},c=aw(a,["operationName"]);return null!=c&&av(b,["_url","operationName"],c),b}(a);return f=au("{operationName}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}{let b=function(a){let b={},c=aw(a,["operationName"]);return null!=c&&av(b,["_url","operationName"],c),b}(a);return f=au("{operationName}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json())}}async fetchPredictVideosOperationInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a){let b={},c=aw(a,["operationName"]);null!=c&&av(b,["operationName"],c);let d=aw(a,["resourceName"]);return null!=d&&av(b,["_url","resourceName"],d),b}(a);return d=au("{resourceName}:fetchPredictOperation",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}throw Error("This method is only supported by the Vertex AI.")}}class ck extends at{constructor(a){super(),this.apiClient=a}async create(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=aw(b,["config"]);return null!=d&&av(c,["config"],function(a,b,c){let d=aw(b,["expireTime"]);void 0!==c&&null!=d&&av(c,["expireTime"],d);let e=aw(b,["newSessionExpireTime"]);void 0!==c&&null!=e&&av(c,["newSessionExpireTime"],e);let f=aw(b,["uses"]);void 0!==c&&null!=f&&av(c,["uses"],f);let g=aw(b,["liveConnectConstraints"]);void 0!==c&&null!=g&&av(c,["bidiGenerateContentSetup"],function(a,b){let c={},d=aw(b,["model"]);null!=d&&av(c,["setup","model"],a_(a,d));let e=aw(b,["config"]);return null!=e&&av(c,["config"],function(a,b){let c=aw(a,["generationConfig"]);void 0!==b&&null!=c&&av(b,["setup","generationConfig"],c);let d=aw(a,["responseModalities"]);void 0!==b&&null!=d&&av(b,["setup","generationConfig","responseModalities"],d);let e=aw(a,["temperature"]);void 0!==b&&null!=e&&av(b,["setup","generationConfig","temperature"],e);let f=aw(a,["topP"]);void 0!==b&&null!=f&&av(b,["setup","generationConfig","topP"],f);let g=aw(a,["topK"]);void 0!==b&&null!=g&&av(b,["setup","generationConfig","topK"],g);let h=aw(a,["maxOutputTokens"]);void 0!==b&&null!=h&&av(b,["setup","generationConfig","maxOutputTokens"],h);let i=aw(a,["mediaResolution"]);void 0!==b&&null!=i&&av(b,["setup","generationConfig","mediaResolution"],i);let j=aw(a,["seed"]);void 0!==b&&null!=j&&av(b,["setup","generationConfig","seed"],j);let k=aw(a,["speechConfig"]);void 0!==b&&null!=k&&av(b,["setup","generationConfig","speechConfig"],bf(k));let l=aw(a,["thinkingConfig"]);void 0!==b&&null!=l&&av(b,["setup","generationConfig","thinkingConfig"],l);let m=aw(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&av(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=aw(a,["systemInstruction"]);void 0!==b&&null!=n&&av(b,["setup","systemInstruction"],function(a){let b={},c=aw(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["mediaResolution"]);null!=c&&av(b,["mediaResolution"],c);let d=aw(a,["codeExecutionResult"]);null!=d&&av(b,["codeExecutionResult"],d);let e=aw(a,["executableCode"]);null!=e&&av(b,["executableCode"],e);let f=aw(a,["fileData"]);null!=f&&av(b,["fileData"],function(a){let b={};if(void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=aw(a,["fileUri"]);null!=c&&av(b,["fileUri"],c);let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(f));let g=aw(a,["functionCall"]);null!=g&&av(b,["functionCall"],function(a){let b={},c=aw(a,["id"]);null!=c&&av(b,["id"],c);let d=aw(a,["args"]);null!=d&&av(b,["args"],d);let e=aw(a,["name"]);if(null!=e&&av(b,["name"],e),void 0!==aw(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==aw(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(g));let h=aw(a,["functionResponse"]);null!=h&&av(b,["functionResponse"],h);let i=aw(a,["inlineData"]);null!=i&&av(b,["inlineData"],function(a){let b={},c=aw(a,["data"]);if(null!=c&&av(b,["data"],c),void 0!==aw(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=aw(a,["mimeType"]);return null!=d&&av(b,["mimeType"],d),b}(i));let j=aw(a,["text"]);null!=j&&av(b,["text"],j);let k=aw(a,["thought"]);null!=k&&av(b,["thought"],k);let l=aw(a,["thoughtSignature"]);null!=l&&av(b,["thoughtSignature"],l);let m=aw(a,["videoMetadata"]);return null!=m&&av(b,["videoMetadata"],m),b})(a))),av(b,["parts"],a)}let d=aw(a,["role"]);return null!=d&&av(b,["role"],d),b}(ba(n)));let o=aw(a,["tools"]);if(void 0!==b&&null!=o){let a=bh(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=aw(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["functionDeclarations"],a)}if(void 0!==aw(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=aw(a,["googleSearchRetrieval"]);null!=d&&av(b,["googleSearchRetrieval"],d);let e=aw(a,["computerUse"]);null!=e&&av(b,["computerUse"],e);let f=aw(a,["fileSearch"]);null!=f&&av(b,["fileSearch"],f);let g=aw(a,["codeExecution"]);if(null!=g&&av(b,["codeExecution"],g),void 0!==aw(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=aw(a,["googleMaps"]);null!=h&&av(b,["googleMaps"],function(a){let b={};if(void 0!==aw(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=aw(a,["enableWidget"]);return null!=c&&av(b,["enableWidget"],c),b}(h));let i=aw(a,["googleSearch"]);null!=i&&av(b,["googleSearch"],function(a){let b={};if(void 0!==aw(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==aw(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=aw(a,["timeRangeFilter"]);return null!=c&&av(b,["timeRangeFilter"],c),b}(i));let j=aw(a,["urlContext"]);return null!=j&&av(b,["urlContext"],j),b})(bg(a)))),av(b,["setup","tools"],a)}let p=aw(a,["sessionResumption"]);void 0!==b&&null!=p&&av(b,["setup","sessionResumption"],function(a){let b={},c=aw(a,["handle"]);if(null!=c&&av(b,["handle"],c),void 0!==aw(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=aw(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&av(b,["setup","inputAudioTranscription"],q);let r=aw(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&av(b,["setup","outputAudioTranscription"],r);let s=aw(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&av(b,["setup","realtimeInputConfig"],s);let t=aw(a,["contextWindowCompression"]);void 0!==b&&null!=t&&av(b,["setup","contextWindowCompression"],t);let u=aw(a,["proactivity"]);if(void 0!==b&&null!=u&&av(b,["setup","proactivity"],u),void 0!==aw(a,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(e,c)),c}(a,g));let h=aw(b,["lockAdditionalFields"]);return void 0!==c&&null!=h&&av(c,["fieldMask"],h),{}}(a,d,c)),c}(this.apiClient,a);d=au("auth_tokens",f._url),e=f._query,delete f.config,delete f._url,delete f._query;let g=function(a,b){let c=null,d=a.bidiGenerateContentSetup;if("object"==typeof d&&null!==d&&"setup"in d){let b=d.setup;"object"==typeof b&&null!==b?(a.bidiGenerateContentSetup=b,c=b):delete a.bidiGenerateContentSetup}else void 0!==d&&delete a.bidiGenerateContentSetup;let e=a.fieldMask;if(c){let d=function(a){let b=[];for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)){let d=a[c];if("object"==typeof d&&null!=d&&Object.keys(d).length>0){let a=Object.keys(d).map(a=>`${c}.${a}`);b.push(...a)}else b.push(c)}return b.join(",")}(c);if(Array.isArray(null==b?void 0:b.lockAdditionalFields)&&(null==b?void 0:b.lockAdditionalFields.length)===0)d?a.fieldMask=d:delete a.fieldMask;else if((null==b?void 0:b.lockAdditionalFields)&&b.lockAdditionalFields.length>0&&null!==e&&Array.isArray(e)&&e.length>0){let b=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];e.length>0&&(c=e.map(a=>b.includes(a)?`generationConfig.${a}`:a));let f=[];d&&f.push(d),c.length>0&&f.push(...c),f.length>0?a.fieldMask=f.join(","):delete a.fieldMask}else delete a.fieldMask}else null!==e&&Array.isArray(e)&&e.length>0?a.fieldMask=e.join(","):delete a.fieldMask;return a}(f,a.config);return this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(g),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}}class cl extends at{constructor(a){super(),this.apiClient=a,this.list=async a=>new bx(ak.PAGED_ITEM_DOCUMENTS,b=>this.listInternal({parent:a.parent,config:b.config}),await this.listInternal(a),a)}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["name"]);return null!=c&&av(b,["_url","name"],c),b}(a);return d=au("{name}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["_url","name"],c);let d=aw(a,["config"]);return null!=d&&function(a,b){let c=aw(a,["force"]);void 0!==b&&null!=c&&av(b,["_query","force"],c)}(d,b),b}(a);d=au("{name}",f._url),e=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["parent"]);null!=c&&av(b,["_url","parent"],c);let d=aw(a,["config"]);return null!=d&&function(a,b){let c=aw(a,["pageSize"]);void 0!==b&&null!=c&&av(b,["_query","pageSize"],c);let d=aw(a,["pageToken"]);void 0!==b&&null!=d&&av(b,["_query","pageToken"],d)}(d,b),b}(a);return d=au("{parent}/documents",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["documents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["documents"],a)}return b}(a),c=new aQ;return Object.assign(c,b),c})}}}class cm extends at{constructor(a,b=new cl(a)){super(),this.apiClient=a,this.documents=b,this.list=async(a={})=>new bx(ak.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(a),a)}async uploadToFileSearchStore(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(a.fileSearchStoreName,a.file,a.config)}async create(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["config"]);return null!=c&&function(a,b){let c=aw(a,["displayName"]);void 0!==b&&null!=c&&av(b,["displayName"],c)}(c,b),b}(a);return d=au("fileSearchStores",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["name"]);return null!=c&&av(b,["_url","name"],c),b}(a);return d=au("{name}",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["_url","name"],c);let d=aw(a,["config"]);return null!=d&&function(a,b){let c=aw(a,["force"]);void 0!==b&&null!=c&&av(b,["_query","force"],c)}(d,b),b}(a);d=au("{name}",f._url),e=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["config"]);return null!=c&&function(a,b){let c=aw(a,["pageSize"]);void 0!==b&&null!=c&&av(b,["_query","pageSize"],c);let d=aw(a,["pageToken"]);void 0!==b&&null!=d&&av(b,["_query","pageToken"],d)}(c,b),b}(a);return d=au("fileSearchStores",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["nextPageToken"]);null!=d&&av(b,["nextPageToken"],d);let e=aw(a,["fileSearchStores"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["fileSearchStores"],a)}return b}(a),c=new aR;return Object.assign(c,b),c})}}async uploadToFileSearchStoreInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["fileSearchStoreName"]);null!=c&&av(b,["_url","file_search_store_name"],c);let d=aw(a,["config"]);return null!=d&&b0(d,b),b}(a);return d=au("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["sdkHttpResponse"]);return null!=c&&av(b,["sdkHttpResponse"],c),b}(a),c=new aS;return Object.assign(c,b),c})}}async importFile(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a){let b={},c=aw(a,["fileSearchStoreName"]);null!=c&&av(b,["_url","file_search_store_name"],c);let d=aw(a,["fileName"]);null!=d&&av(b,["fileName"],d);let e=aw(a,["config"]);return null!=e&&function(a,b){let c=aw(a,["customMetadata"]);if(void 0!==b&&null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av(b,["customMetadata"],a)}let d=aw(a,["chunkingConfig"]);void 0!==b&&null!=d&&av(b,["chunkingConfig"],d)}(e,b),b}(a);return d=au("{file_search_store_name}:importFile",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=aw(a,["name"]);null!=c&&av(b,["name"],c);let d=aw(a,["metadata"]);null!=d&&av(b,["metadata"],d);let e=aw(a,["done"]);null!=e&&av(b,["done"],e);let f=aw(a,["error"]);null!=f&&av(b,["error"],f);let g=aw(a,["response"]);return null!=g&&av(b,["response"],function(a){let b={},c=aw(a,["sdkHttpResponse"]);null!=c&&av(b,["sdkHttpResponse"],c);let d=aw(a,["parent"]);null!=d&&av(b,["parent"],d);let e=aw(a,["documentName"]);return null!=e&&av(b,["documentName"],e),b}(g)),b}(a),c=new aT;return Object.assign(c,b),c})}}}let cn=function(){let{crypto:a}=globalThis;if(null==a?void 0:a.randomUUID)return cn=a.randomUUID.bind(a),a.randomUUID();let b=new Uint8Array(1),c=a?()=>a.getRandomValues(b)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^c()&15>>a/4).toString(16))};function co(a){return"object"==typeof a&&null!==a&&("name"in a&&"AbortError"===a.name||"message"in a&&String(a.message).includes("FetchRequestCanceledException"))}let cp=a=>{if(a instanceof Error)return a;if("object"==typeof a&&null!==a){try{if("[object Error]"===Object.prototype.toString.call(a)){let b=Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(b.stack=a.stack),a.cause&&!b.cause&&(b.cause=a.cause),a.name&&(b.name=a.name),b}}catch(a){}try{return Error(JSON.stringify(a))}catch(a){}}return Error(a)};class cq extends Error{}class cr extends cq{constructor(a,b,c,d){super(`${cr.makeMessage(a,b,c)}`),this.status=a,this.headers=d,this.error=b}static makeMessage(a,b,c){let d=(null==b?void 0:b.message)?"string"==typeof b.message?b.message:JSON.stringify(b.message):b?JSON.stringify(b):c;return a&&d?`${a} ${d}`:a?`${a} status code (no body)`:d||"(no status code or body)"}static generate(a,b,c,d){return a&&d?400===a?new cv(a,b,c,d):401===a?new cw(a,b,c,d):403===a?new cx(a,b,c,d):404===a?new cy(a,b,c,d):409===a?new cz(a,b,c,d):422===a?new cA(a,b,c,d):429===a?new cB(a,b,c,d):a>=500?new cC(a,b,c,d):new cr(a,b,c,d):new ct({message:c,cause:cp(b)})}}class cs extends cr{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class ct extends cr{constructor({message:a,cause:b}){super(void 0,void 0,a||"Connection error.",void 0),b&&(this.cause=b)}}class cu extends ct{constructor({message:a}={}){super({message:null!=a?a:"Request timed out."})}}class cv extends cr{}class cw extends cr{}class cx extends cr{}class cy extends cr{}class cz extends cr{}class cA extends cr{}class cB extends cr{}class cC extends cr{}let cD=/^[a-z][a-z0-9+.-]*:/i,cE=a=>(cE=Array.isArray)(a),cF=cE,cG="0.0.1",cH=a=>"x32"===a?"x32":"x86_64"===a||"x64"===a?"x64":"arm"===a?"arm":"aarch64"===a||"arm64"===a?"arm64":a?`other:${a}`:"unknown",cI=a=>(a=a.toLowerCase()).includes("ios")?"iOS":"android"===a?"Android":"darwin"===a?"MacOS":"win32"===a?"Windows":"freebsd"===a?"FreeBSD":"openbsd"===a?"OpenBSD":"linux"===a?"Linux":a?`Other:${a}`:"Unknown";function cJ(...a){let b=globalThis.ReadableStream;if(void 0===b)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new b(...a)}function cK(a){if(a[Symbol.asyncIterator])return a;let b=a.getReader();return{async next(){try{let a=await b.read();return(null==a?void 0:a.done)&&b.releaseLock(),a}catch(a){throw b.releaseLock(),a}},async return(){let a=b.cancel();return b.releaseLock(),await a,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function cL(a){var b,c;if(null===a||"object"!=typeof a)return;if(a[Symbol.asyncIterator])return void await (null==(c=(b=a[Symbol.asyncIterator]()).return)?void 0:c.call(b));let d=a.getReader(),e=d.cancel();d.releaseLock(),await e}let cM=({headers:a,body:b})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(b)}),cN=()=>{var a;if("undefined"==typeof File){let{process:b}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof(null==(a=null==b?void 0:b.versions)?void 0:a.node)&&20>parseInt(b.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function cO(a,b,c){return cN(),new File(a,null!=b?b:"unknown_file",c)}let cP=a=>null!=a&&"object"==typeof a&&"number"==typeof a.size&&"string"==typeof a.type&&"function"==typeof a.text&&"function"==typeof a.slice&&"function"==typeof a.arrayBuffer;async function cQ(a,b,c){var d;let e,f;if(cN(),null!=(e=a=await a)&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&cP(e))return a instanceof File?a:cO([await a.arrayBuffer()],a.name);if(null!=(f=a)&&"object"==typeof f&&"string"==typeof f.url&&"function"==typeof f.blob){let d=await a.blob();return b||(b=new URL(a.url).pathname.split(/[\\/]/).pop()),cO(await cR(d),b,c)}let g=await cR(a);if(b||(b=("object"==typeof(d=a)&&null!==d&&("name"in d&&d.name&&String(d.name)||"url"in d&&d.url&&String(d.url)||"filename"in d&&d.filename&&String(d.filename)||"path"in d&&d.path&&String(d.path))||"").split(/[\\/]/).pop()||void 0),!(null==c?void 0:c.type)){let a=g.find(a=>"object"==typeof a&&"type"in a&&a.type);"string"==typeof a&&(c=Object.assign(Object.assign({},c),{type:a}))}return cO(g,b,c)}async function cR(a){let b=[];if("string"==typeof a||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)b.push(a);else if(cP(a))b.push(a instanceof Blob?a:await a.arrayBuffer());else if(null!=a&&"object"==typeof a&&"function"==typeof a[Symbol.asyncIterator])try{for(var c,d,e,f,g,h,i=!0,j=bE(a);!(c=(h=await j.next()).done);i=!0)f=h.value,i=!1,b.push(...await cR(f))}catch(a){d={error:a}}finally{try{!i&&!c&&(e=j.return)&&await e.call(j)}finally{if(d)throw d.error}}else{let b=null==(g=null==a?void 0:a.constructor)?void 0:g.name;throw Error(`Unexpected data type: ${typeof a}${b?`; constructor: ${b}`:""}${function(a){if("object"!=typeof a||null===a)return"";let b=Object.getOwnPropertyNames(a);return`; props: [${b.map(a=>`"${a}"`).join(", ")}]`}(a)}`)}return b}class cS{constructor(a){this._client=a}}function cT(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}cS._key=[];let cU=Object.freeze(Object.create(null)),cV=((a=cT)=>function(b,...c){let d;if(1===b.length)return b[0];let e=!1,f=[],g=b.reduce((b,d,g)=>{var h,i,j;/[?#]/.test(d)&&(e=!0);let k=c[g],l=(e?encodeURIComponent:a)(""+k);return g!==c.length&&(null==k||"object"==typeof k&&k.toString===(null==(j=Object.getPrototypeOf(null!=(i=Object.getPrototypeOf(null!=(h=k.hasOwnProperty)?h:cU))?i:cU))?void 0:j.toString))&&(l=k+"",f.push({start:b.length+d.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),b+d+(g===c.length?"":l)},""),h=g.split(/[?#]/,1)[0],i=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(d=i.exec(h));)f.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(f.sort((a,b)=>a.start-b.start),f.length>0){let a=0,b=f.reduce((b,c)=>{let d=" ".repeat(c.start-a),e="^".repeat(c.length);return a=c.start+c.length,b+d+e},"");throw new cq(`Path parameters result in path with invalid segments:
${f.map(a=>a.error).join("\n")}
${g}
${b}`)}return g})(cT);class cW extends cS{create(a,b){var c;let{api_version:d=this._client.apiVersion}=a,e=bB(a,["api_version"]);if("model"in e&&"agent_config"in e)throw new cq("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in e&&"generation_config"in e)throw new cq("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(cV`/${d}/interactions`,Object.assign(Object.assign({body:e},b),{stream:null!=(c=a.stream)&&c}))}delete(a,b={},c){let{api_version:d=this._client.apiVersion}=null!=b?b:{};return this._client.delete(cV`/${d}/interactions/${a}`,c)}cancel(a,b={},c){let{api_version:d=this._client.apiVersion}=null!=b?b:{};return this._client.post(cV`/${d}/interactions/${a}/cancel`,c)}get(a,b={},c){var d;let e=null!=b?b:{},{api_version:f=this._client.apiVersion}=e,g=bB(e,["api_version"]);return this._client.get(cV`/${f}/interactions/${a}`,Object.assign(Object.assign({query:g},c),{stream:null!=(d=null==b?void 0:b.stream)&&d}))}}cW._key=Object.freeze(["interactions"]);class cX extends cW{}function cY(a){let b;return(null!=e?e:e=(b=new globalThis.TextEncoder).encode.bind(b))(a)}function cZ(a){let b;return(null!=f?f:f=(b=new globalThis.TextDecoder).decode.bind(b))(a)}class c${constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(a){let b;if(null==a)return[];let c=a instanceof ArrayBuffer?new Uint8Array(a):"string"==typeof a?cY(a):a;this.buffer=function(a){let b=0;for(let c of a)b+=c.length;let c=new Uint8Array(b),d=0;for(let b of a)c.set(b,d),d+=b.length;return c}([this.buffer,c]);let d=[];for(;null!=(b=function(a,b){for(let c=null!=b?b:0;c<a.length;c++){if(10===a[c])return{preceding:c,index:c+1,carriage:!1};if(13===a[c])return{preceding:c,index:c+1,carriage:!0}}return null}(this.buffer,this.carriageReturnIndex));){if(b.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=b.index;continue}if(null!=this.carriageReturnIndex&&(b.index!==this.carriageReturnIndex+1||b.carriage)){d.push(cZ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let a=null!==this.carriageReturnIndex?b.preceding-1:b.preceding,c=cZ(this.buffer.subarray(0,a));d.push(c),this.buffer=this.buffer.subarray(b.index),this.carriageReturnIndex=null}return d}flush(){return this.buffer.length?this.decode("\n"):[]}}c$.NEWLINE_CHARS=new Set(["\n","\r"]),c$.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let c_={off:0,error:200,warn:300,info:400,debug:500},c0=(a,b,c)=>{if(a){if(Object.prototype.hasOwnProperty.call(c_,a))return a;c5(c).warn(`${b} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(c_))}`)}};function c1(){}function c2(a,b,c){return!b||c_[a]>c_[c]?c1:b[a].bind(b)}let c3={error:c1,warn:c1,info:c1,debug:c1},c4=new WeakMap;function c5(a){var b;let c=a.logger,d=null!=(b=a.logLevel)?b:"off";if(!c)return c3;let e=c4.get(c);if(e&&e[0]===d)return e[1];let f={error:c2("error",c,d),warn:c2("warn",c,d),info:c2("info",c,d),debug:c2("debug",c,d)};return c4.set(c,[d,f]),f}let c6=a=>(a.options&&(a.options=Object.assign({},a.options),delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([a,b])=>[a,"x-goog-api-key"===a.toLowerCase()||"authorization"===a.toLowerCase()||"cookie"===a.toLowerCase()||"set-cookie"===a.toLowerCase()?"***":b]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a);class c7{constructor(a,b,c){this.iterator=a,this.controller=b,this.client=c}static fromSSEResponse(a,b,c){let d=!1,e=c?c5(c):console;return new c7(function(){return bD(this,arguments,function*(){var c,f,g,h;if(d)throw new cq("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let i=!1;try{try{for(var j,k=!0,l=bE(function(a,b){return bD(this,arguments,function*(){var c,d,e,f;if(!a.body){if(b.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new cq("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new cq("Attempted to iterate over a response with no body")}let g=new c8,h=new c$,i=cK(a.body);try{for(var j,k=!0,l=bE(function(a){return bD(this,arguments,function*(){var b,c,d,e;let f=new Uint8Array;try{for(var g,h=!0,i=bE(a);!(b=(g=yield bC(i.next())).done);h=!0){let a;if(e=g.value,h=!1,null==e)continue;let b=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?cY(e):e,c=new Uint8Array(f.length+b.length);for(c.set(f),c.set(b,f.length),f=c;-1!==(a=function(a){for(let b=0;b<a.length-1;b++){if(10===a[b]&&10===a[b+1]||13===a[b]&&13===a[b+1])return b+2;if(13===a[b]&&10===a[b+1]&&b+3<a.length&&13===a[b+2]&&10===a[b+3])return b+4}return -1}(f));)yield yield bC(f.slice(0,a)),f=f.slice(a)}}catch(a){c={error:a}}finally{try{!h&&!b&&(d=i.return)&&(yield bC(d.call(i)))}finally{if(c)throw c.error}}f.length>0&&(yield yield bC(f))})}(i));!(c=(j=yield bC(l.next())).done);k=!0)for(let a of(f=j.value,k=!1,h.decode(f))){let b=g.decode(a);b&&(yield yield bC(b))}}catch(a){d={error:a}}finally{try{!k&&!c&&(e=l.return)&&(yield bC(e.call(l)))}finally{if(d)throw d.error}}for(let a of h.flush()){let b=g.decode(a);b&&(yield yield bC(b))}})}(a,b));!(c=(j=yield bC(l.next())).done);k=!0)if(h=j.value,k=!1,!i)if(h.data.startsWith("[DONE]")){i=!0;continue}else try{yield yield bC(JSON.parse(h.data))}catch(a){throw e.error("Could not parse message into JSON:",h.data),e.error("From chunk:",h.raw),a}}catch(a){f={error:a}}finally{try{!k&&!c&&(g=l.return)&&(yield bC(g.call(l)))}finally{if(f)throw f.error}}i=!0}catch(a){if(co(a))return yield bC(void 0);throw a}finally{i||b.abort()}})},b,c)}static fromReadableStream(a,b,c){let d=!1;return new c7(function(){return bD(this,arguments,function*(){var c,e,f,g;if(d)throw new cq("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let h=!1;try{try{for(var i,j=!0,k=bE(function(){return bD(this,arguments,function*(){var b,c,d,e;let f=new c$,g=cK(a);try{for(var h,i=!0,j=bE(g);!(b=(h=yield bC(j.next())).done);i=!0)for(let a of(e=h.value,i=!1,f.decode(e)))yield yield bC(a)}catch(a){c={error:a}}finally{try{!i&&!b&&(d=j.return)&&(yield bC(d.call(j)))}finally{if(c)throw c.error}}for(let a of f.flush())yield yield bC(a)})}());!(c=(i=yield bC(k.next())).done);j=!0)g=i.value,j=!1,!h&&g&&(yield yield bC(JSON.parse(g)))}catch(a){e={error:a}}finally{try{!j&&!c&&(f=k.return)&&(yield bC(f.call(k)))}finally{if(e)throw e.error}}h=!0}catch(a){if(co(a))return yield bC(void 0);throw a}finally{h||b.abort()}})},b,c)}[Symbol.asyncIterator](){return this.iterator()}tee(){let a=[],b=[],c=this.iterator(),d=d=>({next:()=>{if(0===d.length){let d=c.next();a.push(d),b.push(d)}return d.shift()}});return[new c7(()=>d(a),this.controller,this.client),new c7(()=>d(b),this.controller,this.client)]}toReadableStream(){let a,b=this;return cJ({async start(){a=b[Symbol.asyncIterator]()},async pull(b){try{let{value:c,done:d}=await a.next();if(d)return b.close();let e=cY(JSON.stringify(c)+"\n");b.enqueue(e)}catch(a){b.error(a)}},async cancel(){var b;await (null==(b=a.return)?void 0:b.call(a))}})}}class c8{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;let a={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(a),a.startsWith(":"))return null;let[b,c,d]=function(a,b){let c=a.indexOf(":");return -1!==c?[a.substring(0,c),b,a.substring(c+b.length)]:[a,"",""]}(a,":");return d.startsWith(" ")&&(d=d.substring(1)),"event"===b?this.event=d:"data"===b&&this.data.push(d),null}}async function c9(a,b){let{response:c,requestLogID:d,retryOfRequestLogID:e,startTime:f}=b,g=await (async()=>{var d;if(b.options.stream)return(c5(a).debug("response",c.status,c.url,c.headers,c.body),b.options.__streamClass)?b.options.__streamClass.fromSSEResponse(c,b.controller,a):c7.fromSSEResponse(c,b.controller,a);if(204===c.status)return null;if(b.options.__binaryResponse)return c;let e=c.headers.get("content-type"),f=null==(d=null==e?void 0:e.split(";")[0])?void 0:d.trim();return(null==f?void 0:f.includes("application/json"))||(null==f?void 0:f.endsWith("+json"))?await c.json():await c.text()})();return c5(a).debug(`[${d}] response parsed`,c6({retryOfRequestLogID:e,url:c.url,status:c.status,body:g,durationMs:Date.now()-f})),g}class da extends Promise{constructor(a,b,c=c9){super(a=>{a(null)}),this.responsePromise=b,this.parseResponse=c,this.client=a}_thenUnwrap(a){return new da(this.client,this.responsePromise,async(b,c)=>a(await this.parseResponse(b,c),c))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){let[a,b]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:b}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(this.client,a))),this.parsedPromise}then(a,b){return this.parse().then(a,b)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}let db=Symbol("brand.privateNullableHeaders"),dc=a=>{let b=new Headers,c=new Set;for(let d of a){let a=new Set;for(let[e,f]of function*(a){let b;if(!a)return;if(db in a){let{values:b,nulls:c}=a;for(let a of(yield*b.entries(),c))yield[a,null];return}let c=!1;for(let d of(a instanceof Headers?b=a.entries():cF(a)?b=a:(c=!0,b=Object.entries(null!=a?a:{})),b)){let a=d[0];if("string"!=typeof a)throw TypeError("expected header name to be a string");let b=cF(d[1])?d[1]:[d[1]],e=!1;for(let d of b)void 0!==d&&(c&&!e&&(e=!0,yield[a,null]),yield[a,d])}}(d)){let d=e.toLowerCase();a.has(d)||(b.delete(e),a.add(d)),null===f?(b.delete(e),c.add(d)):(b.append(e,f),c.delete(d))}}return{[db]:!0,values:b,nulls:c}},dd=a=>{var b,c,d,e,f,g;return void 0!==globalThis.process?null!=(d=null==(c=null==(b=globalThis.process.env)?void 0:b[a])?void 0:c.trim())?d:void 0:void 0!==globalThis.Deno?null==(g=null==(f=null==(e=globalThis.Deno.env)?void 0:e.get)?void 0:f.call(e,a))?void 0:g.trim():void 0};class de{constructor(a){var b,c,d,e,f,g,h,{baseURL:i=dd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:j=null!=(b=dd("GEMINI_API_KEY"))?b:null,apiVersion:k="v1beta"}=a;let l=Object.assign(Object.assign({apiKey:j,apiVersion:k},bB(a,["baseURL","apiKey","apiVersion"])),{baseURL:i||"https://generativelanguage.googleapis.com"});this.baseURL=l.baseURL,this.timeout=null!=(c=l.timeout)?c:de.DEFAULT_TIMEOUT,this.logger=null!=(d=l.logger)?d:console;let m="warn";this.logLevel=m,this.logLevel=null!=(f=null!=(e=c0(l.logLevel,"ClientOptions.logLevel",this))?e:c0(dd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))?f:m,this.fetchOptions=l.fetchOptions,this.maxRetries=null!=(g=l.maxRetries)?g:2,this.fetch=null!=(h=l.fetch)?h:function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=cM,this._options=l,this.apiKey=j,this.apiVersion=k,this.clientAdapter=l.clientAdapter}withOptions(a){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),a))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:b}){if(!(a.has("authorization")||a.has("x-goog-api-key")||this.apiKey&&a.get("x-goog-api-key"))&&!b.has("x-goog-api-key"))throw Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(a){let b=dc([a.headers]);if(!(b.values.has("authorization")||b.values.has("x-goog-api-key"))){if(this.apiKey)return dc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return dc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(a){return Object.entries(a).filter(([a,b])=>void 0!==b).map(([a,b])=>{if("string"==typeof b||"number"==typeof b||"boolean"==typeof b)return`${encodeURIComponent(a)}=${encodeURIComponent(b)}`;if(null===b)return`${encodeURIComponent(a)}=`;throw new cq(`Cannot stringify type ${typeof b}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${cG}`}defaultIdempotencyKey(){return`stainless-node-retry-${cn()}`}makeStatusError(a,b,c,d){return cr.generate(a,b,c,d)}buildURL(a,b,c){let d=!this.baseURLOverridden()&&c||this.baseURL,e=new URL(cD.test(a)?a:d+(d.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),f=this.defaultQuery();return!function(a){if(!a)return!0;for(let b in a)return!1;return!0}(f)&&(b=Object.assign(Object.assign({},f),b)),"object"==typeof b&&b&&!Array.isArray(b)&&(e.search=this.stringifyQuery(b)),e.toString()}async prepareOptions(a){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!a.path.startsWith(`/${this.apiVersion}/projects/`)){let b=a.path.slice(this.apiVersion.length+1);a.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${b}`}}async prepareRequest(a,{url:b,options:c}){}get(a,b){return this.methodRequest("get",a,b)}post(a,b){return this.methodRequest("post",a,b)}patch(a,b){return this.methodRequest("patch",a,b)}put(a,b){return this.methodRequest("put",a,b)}delete(a,b){return this.methodRequest("delete",a,b)}methodRequest(a,b,c){return this.request(Promise.resolve(c).then(c=>Object.assign({method:a,path:b},c)))}request(a,b=null){return new da(this,this.makeRequest(a,b,void 0))}async makeRequest(a,b,c){var d,e,f;let g=await a,h=null!=(d=g.maxRetries)?d:this.maxRetries;null==b&&(b=h),await this.prepareOptions(g);let{req:i,url:j,timeout:k}=await this.buildRequest(g,{retryCount:h-b});await this.prepareRequest(i,{url:j,options:g});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),m=void 0===c?"":`, retryOf: ${c}`,n=Date.now();if(c5(this).debug(`[${l}] sending request`,c6({retryOfRequestLogID:c,method:g.method,url:j,options:g,headers:i.headers})),null==(e=g.signal)?void 0:e.aborted)throw new cs;let o=new AbortController,p=await this.fetchWithTimeout(j,i,k,o).catch(cp),q=Date.now();if(p instanceof globalThis.Error){let a=`retrying, ${b} attempts remaining`;if(null==(f=g.signal)?void 0:f.aborted)throw new cs;let d=co(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(b)return c5(this).info(`[${l}] connection ${d?"timed out":"failed"} - ${a}`),c5(this).debug(`[${l}] connection ${d?"timed out":"failed"} (${a})`,c6({retryOfRequestLogID:c,url:j,durationMs:q-n,message:p.message})),this.retryRequest(g,b,null!=c?c:l);if(c5(this).info(`[${l}] connection ${d?"timed out":"failed"} - error; no more retries left`),c5(this).debug(`[${l}] connection ${d?"timed out":"failed"} (error; no more retries left)`,c6({retryOfRequestLogID:c,url:j,durationMs:q-n,message:p.message})),d)throw new cu;throw new ct({cause:p})}let r=`[${l}${m}] ${i.method} ${j} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${q-n}ms`;if(!p.ok){let a=await this.shouldRetry(p);if(b&&a){let a=`retrying, ${b} attempts remaining`;return await cL(p.body),c5(this).info(`${r} - ${a}`),c5(this).debug(`[${l}] response error (${a})`,c6({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-n})),this.retryRequest(g,b,null!=c?c:l,p.headers)}let d=a?"error; no more retries left":"error; not retryable";c5(this).info(`${r} - ${d}`);let e=await p.text().catch(a=>cp(a).message),f=(a=>{try{return JSON.parse(a)}catch(a){return}})(e),h=f?void 0:e;throw c5(this).debug(`[${l}] response error (${d})`,c6({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,message:h,durationMs:Date.now()-n})),this.makeStatusError(p.status,f,h,p.headers)}return c5(this).info(r),c5(this).debug(`[${l}] response start`,c6({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-n})),{response:p,options:g,controller:o,requestLogID:l,retryOfRequestLogID:c,startTime:n}}async fetchWithTimeout(a,b,c,d){let e=b||{},{signal:f,method:g}=e,h=bB(e,["signal","method"]);f&&f.addEventListener("abort",()=>d.abort());let i=setTimeout(()=>d.abort(),c),j=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||"object"==typeof h.body&&null!==h.body&&Symbol.asyncIterator in h.body,k=Object.assign(Object.assign(Object.assign({signal:d.signal},j?{duplex:"half"}:{}),{method:"GET"}),h);g&&(k.method=g.toUpperCase());try{return await this.fetch.call(void 0,a,k)}finally{clearTimeout(i)}}async shouldRetry(a){let b=a.headers.get("x-should-retry");return"true"===b||"false"!==b&&(408===a.status||409===a.status||429===a.status||!!(a.status>=500))}async retryRequest(a,b,c,d){var e;let f,g,h=null==d?void 0:d.get("retry-after-ms");if(h){let a=parseFloat(h);Number.isNaN(a)||(f=a)}let i=null==d?void 0:d.get("retry-after");if(i&&!f){let a=parseFloat(i);f=Number.isNaN(a)?Date.parse(i)-Date.now():1e3*a}if(!(f&&0<=f&&f<6e4)){let c=null!=(e=a.maxRetries)?e:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(b,c)}return await (g=f,new Promise(a=>setTimeout(a,g))),this.makeRequest(a,b-1,c)}calculateDefaultRetryTimeoutMillis(a,b){return Math.min(.5*Math.pow(2,b-a),8)*(1-.25*Math.random())*1e3}async buildRequest(a,{retryCount:b=0}={}){var c,d,e;let f=Object.assign({},a),{method:g,path:h,query:i,defaultBaseURL:j}=f,k=this.buildURL(h,i,j);"timeout"in f&&((a,b)=>{if("number"!=typeof b||!Number.isInteger(b))throw new cq(`${a} must be an integer`);if(b<0)throw new cq(`${a} must be a positive integer`)})("timeout",f.timeout),f.timeout=null!=(c=f.timeout)?c:this.timeout;let{bodyHeaders:l,body:m}=this.buildBody({options:f}),n=await this.buildHeaders({options:a,method:g,bodyHeaders:l,retryCount:b});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:n},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),null!=(d=this.fetchOptions)?d:{}),null!=(e=f.fetchOptions)?e:{}),url:k,timeout:f.timeout}}async buildHeaders({options:a,method:b,bodyHeaders:c,retryCount:e}){let f={};this.idempotencyHeader&&"get"!==b&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),f[this.idempotencyHeader]=a.idempotencyKey);let g=await this.authHeaders(a),h=dc([f,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(e)},a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{}),null!=d?d:d=(()=>{var a,b,c,d,e;let f="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===f)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cG,"X-Stainless-OS":cI(Deno.build.os),"X-Stainless-Arch":cH(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!=(b=null==(a=Deno.version)?void 0:a.deno)?b:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cG,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===f)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cG,"X-Stainless-OS":cI(null!=(c=globalThis.process.platform)?c:"unknown"),"X-Stainless-Arch":cH(null!=(d=globalThis.process.arch)?d:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!=(e=globalThis.process.version)?e:"unknown"};let g=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:a,pattern:b}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let c=b.exec(navigator.userAgent);if(c){let b=c[1]||0,d=c[2]||0,e=c[3]||0;return{browser:a,version:`${b}.${d}.${e}`}}}return null}();return g?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cG,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${g.browser}`,"X-Stainless-Runtime-Version":g.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cG,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),this._options.defaultHeaders,c,a.headers,g]);return this.validateHeaders(h),h.values}buildBody({options:{body:a,headers:b}}){let c;if(!a)return{bodyHeaders:void 0,body:void 0};let d=dc([b]);if(ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||"string"==typeof a&&d.values.has("content-type")||globalThis.Blob&&a instanceof globalThis.Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream)return{bodyHeaders:void 0,body:a};if("object"!=typeof a||!(Symbol.asyncIterator in a)&&(!(Symbol.iterator in a)||!("next"in a)||"function"!=typeof a.next))return this.encoder({body:a,headers:d});return{bodyHeaders:void 0,body:(c=Symbol.asyncIterator in a?a[Symbol.asyncIterator]():a[Symbol.iterator](),cJ({start(){},async pull(a){let{done:b,value:d}=await c.next();b?a.close():a.enqueue(d)},async cancel(){var a;await (null==(a=c.return)?void 0:a.call(c))}}))}}}de.DEFAULT_TIMEOUT=6e4;class df extends de{constructor(){super(...arguments),this.interactions=new cX(this)}}df.GeminiNextGenAPIClient=df,df.GeminiNextGenAPIClientError=cq,df.APIError=cr,df.APIConnectionError=ct,df.APIConnectionTimeoutError=cu,df.APIUserAbortError=cs,df.NotFoundError=cy,df.ConflictError=cz,df.RateLimitError=cB,df.BadRequestError=cv,df.AuthenticationError=cw,df.InternalServerError=cC,df.PermissionDeniedError=cx,df.UnprocessableEntityError=cA,df.toFile=cQ,df.Interactions=cX;let dg="x-goog-api-key",dh="https://www.googleapis.com/auth/cloud-platform";class di{constructor(a){if(void 0!==a.apiKey){this.apiKey=a.apiKey;return}let b=function(a){let b;if(!a)return{scopes:[dh]};if((b=a).scopes){if("string"==typeof b.scopes&&b.scopes!==dh||Array.isArray(b.scopes)&&0>b.scopes.indexOf(dh))throw Error(`Invalid auth scopes. Scopes must include: ${dh}`)}else b.scopes=[dh];return b}(a.googleAuthOptions);this.googleAuth=new am.kF(b)}async addAuthHeaders(a,b){if(void 0!==this.apiKey){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(a);return}return this.addGoogleAuthHeaders(a,b)}addKeyHeader(a){if(null===a.get(dg)){if(void 0===this.apiKey)throw Error("Trying to set API key header but apiKey is not set");a.append(dg,this.apiKey)}}async addGoogleAuthHeaders(a,b){if(void 0===this.googleAuth)throw Error("Trying to set google-auth headers but googleAuth is unset");for(let[c,d]of(await this.googleAuth.getRequestHeaders(b)))null===a.get(c)&&a.append(c,d)}}class dj{async download(a,b){if(a.downloadPath){let c=await dk(a,b);if(c instanceof az){let b=(0,an.createWriteStream)(a.downloadPath);ap.Readable.fromWeb(c.responseInternal.body).pipe(b),await (0,aq.finished)(b)}else try{await (0,ao.writeFile)(a.downloadPath,c,{encoding:"base64"})}catch(b){throw Error(`Failed to write file to ${a.downloadPath}: ${b}`)}}}}async function dk(a,b){var c,d,e;let f=bm(a.file);if(void 0!==f)return await b.request({path:`files/${f}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:null==(c=a.config)?void 0:c.httpOptions,abortSignal:null==(d=a.config)?void 0:d.abortSignal});if(bk(a.file)){let b=null==(e=a.file.video)?void 0:e.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download generated video, Uri or videoBytes not found.")}if(bl(a.file)){let b=a.file.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download video, Uri or videoBytes not found.")}throw Error("Unsupported file type")}class dl{create(a,b,c){return new dm(a,b,c)}}class dm{constructor(a,b,c){this.url=a,this.headers=b,this.callbacks=c}connect(){this.ws=new ar(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(a){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(a)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}function dn(a,b){let c={},d=aw(a,["sdkHttpResponse"]);null!=d&&av(c,["sdkHttpResponse"],d);let e=aw(a,["name"]);null!=e&&av(c,["name"],e);let f=aw(a,["state"]);null!=f&&av(c,["state"],bj(f));let g=aw(a,["createTime"]);null!=g&&av(c,["createTime"],g);let h=aw(a,["tuningTask","startTime"]);null!=h&&av(c,["startTime"],h);let i=aw(a,["tuningTask","completeTime"]);null!=i&&av(c,["endTime"],i);let j=aw(a,["updateTime"]);null!=j&&av(c,["updateTime"],j);let k=aw(a,["description"]);null!=k&&av(c,["description"],k);let l=aw(a,["baseModel"]);null!=l&&av(c,["baseModel"],l);let m=aw(a,["_self"]);return null!=m&&av(c,["tunedModel"],function(a,b){let c={},d=aw(a,["name"]);null!=d&&av(c,["model"],d);let e=aw(a,["name"]);return null!=e&&av(c,["endpoint"],e),c}(m)),c}function dp(a,b){let c={},d=aw(a,["sdkHttpResponse"]);null!=d&&av(c,["sdkHttpResponse"],d);let e=aw(a,["name"]);null!=e&&av(c,["name"],e);let f=aw(a,["state"]);null!=f&&av(c,["state"],bj(f));let g=aw(a,["createTime"]);null!=g&&av(c,["createTime"],g);let h=aw(a,["startTime"]);null!=h&&av(c,["startTime"],h);let i=aw(a,["endTime"]);null!=i&&av(c,["endTime"],i);let j=aw(a,["updateTime"]);null!=j&&av(c,["updateTime"],j);let k=aw(a,["error"]);null!=k&&av(c,["error"],k);let l=aw(a,["description"]);null!=l&&av(c,["description"],l);let m=aw(a,["baseModel"]);null!=m&&av(c,["baseModel"],m);let n=aw(a,["tunedModel"]);null!=n&&av(c,["tunedModel"],n);let o=aw(a,["preTunedModel"]);null!=o&&av(c,["preTunedModel"],o);let p=aw(a,["supervisedTuningSpec"]);null!=p&&av(c,["supervisedTuningSpec"],p);let q=aw(a,["preferenceOptimizationSpec"]);null!=q&&av(c,["preferenceOptimizationSpec"],q);let r=aw(a,["tuningDataStats"]);null!=r&&av(c,["tuningDataStats"],r);let s=aw(a,["encryptionSpec"]);null!=s&&av(c,["encryptionSpec"],s);let t=aw(a,["partnerModelTuningSpec"]);null!=t&&av(c,["partnerModelTuningSpec"],t);let u=aw(a,["customBaseModel"]);null!=u&&av(c,["customBaseModel"],u);let v=aw(a,["experiment"]);null!=v&&av(c,["experiment"],v);let w=aw(a,["labels"]);null!=w&&av(c,["labels"],w);let x=aw(a,["outputUri"]);null!=x&&av(c,["outputUri"],x);let y=aw(a,["pipelineJob"]);null!=y&&av(c,["pipelineJob"],y);let z=aw(a,["serviceAccount"]);null!=z&&av(c,["serviceAccount"],z);let A=aw(a,["tunedModelDisplayName"]);null!=A&&av(c,["tunedModelDisplayName"],A);let B=aw(a,["veoTuningSpec"]);return null!=B&&av(c,["veoTuningSpec"],B),c}function dq(a,b){let c={},d=aw(a,["gcsUri"]);null!=d&&av(c,["validationDatasetUri"],d);let e=aw(a,["vertexDatasetResource"]);return null!=e&&av(c,["validationDatasetUri"],e),c}class dr extends at{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new bx(ak.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.get=async a=>await this.getInternal(a),this.tune=async a=>{var b;if(this.apiClient.isVertexAI())if(a.baseModel.startsWith("projects/")){let c={tunedModelName:a.baseModel};(null==(b=a.config)?void 0:b.preTunedModelCheckpointId)&&(c.checkpointId=a.config.preTunedModelCheckpointId);let d=Object.assign(Object.assign({},a),{preTunedModel:c});return d.baseModel=void 0,await this.tuneInternal(d)}else{let b=Object.assign({},a);return await this.tuneInternal(b)}{let b=Object.assign({},a),c=await this.tuneMldevInternal(b),d="";return void 0!==c.metadata&&void 0!==c.metadata.tunedModel?d=c.metadata.tunedModel:void 0!==c.name&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:F.JOB_STATE_QUEUED}}}}async getInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(a,["name"]);return null!=d&&av(c,["_url","name"],d),c}(a);return f=au("{name}",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>dp(a))}{let b=function(a,b){let c={},d=aw(a,["name"]);return null!=d&&av(c,["_url","name"],d),c}(a);return f=au("{name}",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>dn(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(a,["config"]);return null!=d&&function(a,b,c){let d=aw(a,["pageSize"]);void 0!==b&&null!=d&&av(b,["_query","pageSize"],d);let e=aw(a,["pageToken"]);void 0!==b&&null!=e&&av(b,["_query","pageToken"],e);let f=aw(a,["filter"]);void 0!==b&&null!=f&&av(b,["_query","filter"],f)}(d,c),c}(a);return f=au("tuningJobs",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=aw(a,["sdkHttpResponse"]);null!=d&&av(c,["sdkHttpResponse"],d);let e=aw(a,["nextPageToken"]);null!=e&&av(c,["nextPageToken"],e);let f=aw(a,["tuningJobs"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>dp(a))),av(c,["tuningJobs"],a)}return c}(a),c=new aM;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(a,["config"]);return null!=d&&function(a,b,c){let d=aw(a,["pageSize"]);void 0!==b&&null!=d&&av(b,["_query","pageSize"],d);let e=aw(a,["pageToken"]);void 0!==b&&null!=e&&av(b,["_query","pageToken"],e);let f=aw(a,["filter"]);void 0!==b&&null!=f&&av(b,["_query","filter"],f)}(d,c),c}(a);return f=au("tunedModels",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=aw(a,["sdkHttpResponse"]);null!=d&&av(c,["sdkHttpResponse"],d);let e=aw(a,["nextPageToken"]);null!=e&&av(c,["nextPageToken"],e);let f=aw(a,["tunedModels"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>dn(a))),av(c,["tuningJobs"],a)}return c}(a),c=new aM;return Object.assign(c,b),c})}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=aw(a,["name"]);return null!=d&&av(c,["_url","name"],d),c}(a);return f=au("{name}:cancel",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=aw(a,["sdkHttpResponse"]);return null!=d&&av(c,["sdkHttpResponse"],d),c}(a),c=new aN;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=aw(a,["name"]);return null!=d&&av(c,["_url","name"],d),c}(a);return f=au("{name}:cancel",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=aw(a,["sdkHttpResponse"]);return null!=d&&av(c,["sdkHttpResponse"],d),c}(a),c=new aN;return Object.assign(c,b),c})}}async tuneInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=aw(a,["baseModel"]);null!=d&&av(c,["baseModel"],d);let e=aw(a,["preTunedModel"]);null!=e&&av(c,["preTunedModel"],e);let f=aw(a,["trainingDataset"]);null!=f&&function(a,b,c){let d=aw(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=aw(a,["gcsUri"]);void 0!==b&&null!=c&&av(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===d){let c=aw(a,["gcsUri"]);void 0!==b&&null!=c&&av(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let e=aw(c,["config","method"]);if(void 0===e&&(e="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===e){let c=aw(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&av(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===e){let c=aw(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&av(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(void 0!==aw(a,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(f,c,b);let g=aw(a,["config"]);return null!=g&&function(a,b,c){let d=aw(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=aw(a,["validationDataset"]);void 0!==b&&null!=c&&av(b,["supervisedTuningSpec"],dq(c))}else if("PREFERENCE_TUNING"===d){let c=aw(a,["validationDataset"]);void 0!==b&&null!=c&&av(b,["preferenceOptimizationSpec"],dq(c))}let e=aw(a,["tunedModelDisplayName"]);void 0!==b&&null!=e&&av(b,["tunedModelDisplayName"],e);let f=aw(a,["description"]);void 0!==b&&null!=f&&av(b,["description"],f);let g=aw(c,["config","method"]);if(void 0===g&&(g="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===g){let c=aw(a,["epochCount"]);void 0!==b&&null!=c&&av(b,["supervisedTuningSpec","hyperParameters","epochCount"],c)}else if("PREFERENCE_TUNING"===g){let c=aw(a,["epochCount"]);void 0!==b&&null!=c&&av(b,["preferenceOptimizationSpec","hyperParameters","epochCount"],c)}let h=aw(c,["config","method"]);if(void 0===h&&(h="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===h){let c=aw(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&av(b,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c)}else if("PREFERENCE_TUNING"===h){let c=aw(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&av(b,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],c)}let i=aw(c,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let c=aw(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&av(b,["supervisedTuningSpec","exportLastCheckpointOnly"],c)}else if("PREFERENCE_TUNING"===i){let c=aw(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&av(b,["preferenceOptimizationSpec","exportLastCheckpointOnly"],c)}let j=aw(c,["config","method"]);if(void 0===j&&(j="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===j){let c=aw(a,["adapterSize"]);void 0!==b&&null!=c&&av(b,["supervisedTuningSpec","hyperParameters","adapterSize"],c)}else if("PREFERENCE_TUNING"===j){let c=aw(a,["adapterSize"]);void 0!==b&&null!=c&&av(b,["preferenceOptimizationSpec","hyperParameters","adapterSize"],c)}if(void 0!==aw(a,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==aw(a,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let k=aw(a,["labels"]);void 0!==b&&null!=k&&av(b,["labels"],k);let l=aw(a,["beta"]);void 0!==b&&null!=l&&av(b,["preferenceOptimizationSpec","hyperParameters","beta"],l)}(g,c,b),c}(a,a);return d=au("tuningJobs",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>dp(a))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f=function(a,b){let c={},d=aw(a,["baseModel"]);null!=d&&av(c,["baseModel"],d);let e=aw(a,["preTunedModel"]);null!=e&&av(c,["preTunedModel"],e);let f=aw(a,["trainingDataset"]);null!=f&&function(a,b){if(void 0!==aw(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==aw(a,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let c=aw(a,["examples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),av({},["examples","examples"],a)}}(f);let g=aw(a,["config"]);return null!=g&&function(a,b,c){if(void 0!==aw(a,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let d=aw(a,["tunedModelDisplayName"]);if(void 0!==b&&null!=d&&av(b,["displayName"],d),void 0!==aw(a,["description"]))throw Error("description parameter is not supported in Gemini API.");let e=aw(a,["epochCount"]);void 0!==b&&null!=e&&av(b,["tuningTask","hyperparameters","epochCount"],e);let f=aw(a,["learningRateMultiplier"]);if(null!=f&&av({},["tuningTask","hyperparameters","learningRateMultiplier"],f),void 0!==aw(a,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==aw(a,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==aw(a,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let g=aw(a,["batchSize"]);void 0!==b&&null!=g&&av(b,["tuningTask","hyperparameters","batchSize"],g);let h=aw(a,["learningRate"]);if(void 0!==b&&null!=h&&av(b,["tuningTask","hyperparameters","learningRate"],h),void 0!==aw(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==aw(a,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(g,c),c}(a);return d=au("tunedModels",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>(function(a,b){let c={},d=aw(a,["sdkHttpResponse"]);null!=d&&av(c,["sdkHttpResponse"],d);let e=aw(a,["name"]);null!=e&&av(c,["name"],e);let f=aw(a,["metadata"]);null!=f&&av(c,["metadata"],f);let g=aw(a,["done"]);null!=g&&av(c,["done"],g);let h=aw(a,["error"]);return null!=h&&av(c,["error"],h),c})(a))}}}let ds="x-goog-upload-status";async function dt(a,b,c){var d;let e=await dv(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[ds])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async function du(a,b,c){var d;let e=await dv(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[ds])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=ay(f),h=new a$;return Object.assign(h,g),h}async function dv(a,b,c){var d,e;let f=0,g=0,h=new az(new Response),i="upload";for(f=a.size;g<f;){let j=Math.min(8388608,f-g),k=a.slice(g,g+j);g+j>=f&&(i+=", finalize");let l=0,m=1e3;for(;l<3&&(null==(d=null==(h=await c.request({path:"",body:k,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":i,"X-Goog-Upload-Offset":String(g),"Content-Length":String(j)}}}))?void 0:h.headers)||!d[ds]);)l++,await dx(m),m*=2;if(g+=j,(null==(e=null==h?void 0:h.headers)?void 0:e[ds])!=="active")break;if(f<=g)throw Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function dw(a){return{size:a.size,type:a.type}}function dx(a){return new Promise(b=>setTimeout(b,a))}class dy{async stat(a){let b={size:0,type:void 0};return"string"==typeof a?(b.size=(await ao.stat(a)).size,b.type=this.inferMimeType(a),b):await dw(a)}async upload(a,b,c){return"string"==typeof a?await this.uploadFileFromPath(a,b,c):dt(a,b,c)}async uploadToFileSearchStore(a,b,c){return"string"==typeof a?await this.uploadFileToFileSearchStoreFromPath(a,b,c):du(a,b,c)}inferMimeType(a){return({aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"})[a.slice(a.lastIndexOf(".")+1).toLowerCase()]}async uploadFileFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[ds])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async uploadFileToFileSearchStoreFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[ds])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=ay(f),h=new a$;return Object.assign(h,g),h}async uploadFileFromPathInternal(a,b,c){var d,e;let f,g=0,h=0,i=new az(new Response),j="upload",k=as.basename(a);try{if(!(f=await ao.open(a,"r")))throw Error("Failed to open file");for(g=(await f.stat()).size;h<g;){let a=Math.min(8388608,g-h);h+a>=g&&(j+=", finalize");let l=new Uint8Array(a),{bytesRead:m}=await f.read(l,0,a,h);if(m!==a)throw Error(`Failed to read ${a} bytes from file at offset ${h}. bytes actually read: ${m}`);let n=new Blob([l]),o=0,p=1e3;for(;o<3&&(null==(d=null==(i=await c.request({path:"",body:n,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m),"X-Goog-Upload-File-Name":k}}}))?void 0:i.headers)||!d[ds]);)o++,await dx(p),p*=2;if(h+=m,(null==(e=null==i?void 0:i.headers)?void 0:e[ds])!=="active")break;if(g<=h)throw Error("All content has been uploaded, but the upload status is not finalized.")}return i}finally{f&&await f.close()}}}class dz{get interactions(){if(void 0!==this._interactions)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let a=this.httpOptions;(null==a?void 0:a.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let b=new df({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==a?void 0:a.timeout});return this._interactions=b.interactions,this._interactions}constructor(a){var b,c,d,e,f,i;if((a.project||a.location)&&a.apiKey)throw Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=null!=(c=null!=(b=a.vertexai)?b:function(a){var b;return void 0!==(b=dA(a))&&"true"===b.toLowerCase()}("GOOGLE_GENAI_USE_VERTEXAI"))&&c;let j=function(){let a=dA("GOOGLE_API_KEY"),b=dA("GEMINI_API_KEY");return a&&b&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),a||b||void 0}(),k=dA("GOOGLE_CLOUD_PROJECT"),l=dA("GOOGLE_CLOUD_LOCATION");this.apiKey=null!=(d=a.apiKey)?d:j,this.project=null!=(e=a.project)?e:k,this.location=null!=(f=a.location)?f:l,a.vertexai&&((null==(i=a.googleAuthOptions)?void 0:i.credentials)&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(k||l)&&a.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(a.project||a.location)&&j?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(k||l)&&j&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),this.location||this.apiKey||(this.location="global"));let m=function(a,b,c,d){return(null==a?void 0:a.baseUrl)?a.baseUrl:b?null!=h?h:c:null!=g?g:d}(a.httpOptions,a.vertexai,dA("GOOGLE_VERTEX_BASE_URL"),dA("GOOGLE_GEMINI_BASE_URL"));m&&(a.httpOptions?a.httpOptions.baseUrl=m:a.httpOptions={baseUrl:m}),this.apiVersion=a.apiVersion,this.httpOptions=a.httpOptions;let n=new di({apiKey:this.apiKey,googleAuthOptions:a.googleAuthOptions});this.apiClient=new b2({auth:n,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/"+process.version,uploader:new dy,downloader:new dj}),this.models=new ci(this.apiClient),this.live=new cb(this.apiClient,n,new dl),this.batches=new by(this.apiClient),this.chats=new bH(this.models,this.apiClient),this.caches=new bA(this.apiClient),this.files=new bK(this.apiClient),this.operations=new cj(this.apiClient),this.authTokens=new ck(this.apiClient),this.tunings=new dr(this.apiClient),this.fileSearchStores=new cm(this.apiClient)}}function dA(a){var b,c,d;return null!=(d=null==(c=null==(b=null==process?void 0:process.env)?void 0:b[a])?void 0:c.trim())?d:void 0}async function dB(a){let b=process.env.GEMINI_API_KEY||process.env.API_KEY||"";if(!b)return console.error("GEMINI_API_KEY is not set"),null;let c=new dz({apiKey:b});try{let b=await c.models.generateContent({model:"gemini-3-flash-preview",contents:`
      "${a}"`,config:{thinkingConfig:{thinkingBudget:0},responseMimeType:"application/json",responseSchema:{type:l.ARRAY,items:{type:l.OBJECT,properties:{description:{type:l.STRING,description:""},quantity:{type:l.NUMBER,description:""},rate:{type:l.NUMBER,description:""}},required:["description","quantity","rate"]}}}});return JSON.parse(b.text||"[]")}catch(a){return console.error("AI Generation Error:",a),null}}(0,c(18837).D)([dB]),(0,al.A)(dB,"4067fceebfd7e2b123ff36154a916c24034c634741",null)},37830:a=>{"use strict";a.exports=require("node:stream/web")},38270:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{AppRenderSpan:function(){return i},AppRouteRouteHandlersSpan:function(){return l},BaseServerSpan:function(){return c},LoadComponentsSpan:function(){return d},LogSpanAllowList:function(){return p},MiddlewareSpan:function(){return n},NextNodeServerSpan:function(){return f},NextServerSpan:function(){return e},NextVanillaSpanAllowlist:function(){return o},NodeSpan:function(){return k},RenderSpan:function(){return h},ResolveMetadataSpan:function(){return m},RouterSpan:function(){return j},StartServerSpan:function(){return g}});var c=function(a){return a.handleRequest="BaseServer.handleRequest",a.run="BaseServer.run",a.pipe="BaseServer.pipe",a.getStaticHTML="BaseServer.getStaticHTML",a.render="BaseServer.render",a.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",a.renderToResponse="BaseServer.renderToResponse",a.renderToHTML="BaseServer.renderToHTML",a.renderError="BaseServer.renderError",a.renderErrorToResponse="BaseServer.renderErrorToResponse",a.renderErrorToHTML="BaseServer.renderErrorToHTML",a.render404="BaseServer.render404",a}(c||{}),d=function(a){return a.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",a.loadComponents="LoadComponents.loadComponents",a}(d||{}),e=function(a){return a.getRequestHandler="NextServer.getRequestHandler",a.getServer="NextServer.getServer",a.getServerRequestHandler="NextServer.getServerRequestHandler",a.createServer="createServer.createServer",a}(e||{}),f=function(a){return a.compression="NextNodeServer.compression",a.getBuildId="NextNodeServer.getBuildId",a.createComponentTree="NextNodeServer.createComponentTree",a.clientComponentLoading="NextNodeServer.clientComponentLoading",a.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",a.generateStaticRoutes="NextNodeServer.generateStaticRoutes",a.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",a.generatePublicRoutes="NextNodeServer.generatePublicRoutes",a.generateImageRoutes="NextNodeServer.generateImageRoutes.route",a.sendRenderResult="NextNodeServer.sendRenderResult",a.proxyRequest="NextNodeServer.proxyRequest",a.runApi="NextNodeServer.runApi",a.render="NextNodeServer.render",a.renderHTML="NextNodeServer.renderHTML",a.imageOptimizer="NextNodeServer.imageOptimizer",a.getPagePath="NextNodeServer.getPagePath",a.getRoutesManifest="NextNodeServer.getRoutesManifest",a.findPageComponents="NextNodeServer.findPageComponents",a.getFontManifest="NextNodeServer.getFontManifest",a.getServerComponentManifest="NextNodeServer.getServerComponentManifest",a.getRequestHandler="NextNodeServer.getRequestHandler",a.renderToHTML="NextNodeServer.renderToHTML",a.renderError="NextNodeServer.renderError",a.renderErrorToHTML="NextNodeServer.renderErrorToHTML",a.render404="NextNodeServer.render404",a.startResponse="NextNodeServer.startResponse",a.route="route",a.onProxyReq="onProxyReq",a.apiResolver="apiResolver",a.internalFetch="internalFetch",a}(f||{}),g=function(a){return a.startServer="startServer.startServer",a}(g||{}),h=function(a){return a.getServerSideProps="Render.getServerSideProps",a.getStaticProps="Render.getStaticProps",a.renderToString="Render.renderToString",a.renderDocument="Render.renderDocument",a.createBodyResult="Render.createBodyResult",a}(h||{}),i=function(a){return a.renderToString="AppRender.renderToString",a.renderToReadableStream="AppRender.renderToReadableStream",a.getBodyResult="AppRender.getBodyResult",a.fetch="AppRender.fetch",a}(i||{}),j=function(a){return a.executeRoute="Router.executeRoute",a}(j||{}),k=function(a){return a.runHandler="Node.runHandler",a}(k||{}),l=function(a){return a.runHandler="AppRouteRouteHandlers.runHandler",a}(l||{}),m=function(a){return a.generateMetadata="ResolveMetadata.generateMetadata",a.generateViewport="ResolveMetadata.generateViewport",a}(m||{}),n=function(a){return a.execute="Middleware.execute",a}(n||{});let o=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],p=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},38324:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ENCODED_TAGS",{enumerable:!0,get:function(){return c}});let c={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])},META:{ICON_MARK:new Uint8Array([60,109,101,116,97,32,110,97,109,101,61,34,194,171,110,120,116,45,105,99,111,110,194,187,34])}}},38522:a=>{"use strict";a.exports=require("node:zlib")},38974:(a,b)=>{"use strict";function c(a){return a.startsWith("/")?a:"/"+a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ensureLeadingSlash",{enumerable:!0,get:function(){return c}})},39561:(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=c(63685),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(a.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let b=c(6085);a.exports.mask=function(a,c,d,e,g){g<48?f(a,c,d,e,g):b.mask(a,c,d,e,g)},a.exports.unmask=function(a,c){a.length<32?g(a,c):b.unmask(a,c)}}catch(a){}},39576:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.USER_AGENT=b.PRODUCT_NAME=b.pkg=void 0;let d=c(13919);b.pkg=d;let e="google-api-nodejs-client";b.PRODUCT_NAME=e,b.USER_AGENT=`${e}/${d.version}`},40147:(a,b)=>{"use strict";function c(a,b){if(0===b.length)return 0;if(0===a.length||b.length>a.length)return -1;for(let c=0;c<=a.length-b.length;c++){let d=!0;for(let e=0;e<b.length;e++)if(a[c+e]!==b[e]){d=!1;break}if(d)return c}return -1}function d(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function e(a,b){let d=c(a,b);if(0===d)return a.subarray(b.length);if(!(d>-1))return a;{let c=new Uint8Array(a.length-b.length);return c.set(a.slice(0,d)),c.set(a.slice(d+b.length),d),c}}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{indexOfUint8Array:function(){return c},isEquivalentUint8Arrays:function(){return d},removeFromUint8Array:function(){return e}})},40443:(a,b,c)=>{"use strict";let d=c(94735),e=c(55591),f=c(81630),g=c(91645),h=c(34631),{randomBytes:i,createHash:j}=c(55511),{Duplex:k,Readable:l}=c(27910),{URL:m}=c(79551),n=c(87894),o=c(90001),p=c(67977),{isBlob:q}=c(15959),{BINARY_TYPES:r,CLOSE_TIMEOUT:s,EMPTY_BUFFER:t,GUID:u,kForOnEventAttribute:v,kListener:w,kStatusCode:x,kWebSocket:y,NOOP:z}=c(63685),{EventTarget:{addEventListener:A,removeEventListener:B}}=c(58436),{format:C,parse:D}=c(90133),{toBuffer:E}=c(39561),F=Symbol("kAborted"),G=[8,13],H=["CONNECTING","OPEN","CLOSING","CLOSED"],I=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class J extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=t,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=J.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,closeTimeout:s,protocolVersion:G[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,b._closeTimeout=p.closeTimeout,!G.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${G.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void K(b,a);throw a}let t=q?443:80,v=i(16).toString("base64"),w=q?e.request:f.request,x=new Set;if(p.createConnection=p.createConnection||(q?M:L),p.defaultPort=p.defaultPort||t,p.port=h.port||t,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":v,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=C({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!I.test(a)||x.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");x.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=w(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=w(p);p.timeout&&o.on("timeout",()=>{N(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[F]||(o=b._req=null,K(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void N(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){K(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||N(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==J.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void N(b,c,"Invalid Upgrade header");let g=j("sha1").update(v+u).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void N(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?x.size?x.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":x.size&&(e="Server sent no subprotocol"),e)return void N(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void N(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=D(i)}catch(a){N(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void N(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){N(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._closeTimeout=c.closeTimeout,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[y]=this,e[y]=this,a[y]=this,d.on("conclude",P),d.on("drain",Q),d.on("error",R),d.on("message",T),d.on("ping",U),d.on("pong",V),e.onerror=X,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Z),a.on("data",$),a.on("end",_),a.on("error",aa),this._readyState=J.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=J.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=J.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==J.CLOSED){if(this.readyState===J.CONNECTING)return void N(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===J.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=J.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Y(this)}}pause(){this.readyState!==J.CONNECTING&&this.readyState!==J.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===J.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==J.OPEN)return void O(this,a,c);void 0===b&&(b=!this._isServer),this._sender.ping(a||t,b,c)}pong(a,b,c){if(this.readyState===J.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==J.OPEN)return void O(this,a,c);void 0===b&&(b=!this._isServer),this._sender.pong(a||t,b,c)}resume(){this.readyState!==J.CONNECTING&&this.readyState!==J.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===J.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==J.OPEN)return void O(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||t,d,c)}terminate(){if(this.readyState!==J.CLOSED){if(this.readyState===J.CONNECTING)return void N(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=J.CLOSING,this._socket.destroy())}}}function K(a,b){a._readyState=J.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function L(a){return a.path=a.socketPath,g.connect(a)}function M(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function N(a,b,c){a._readyState=J.CLOSING;let d=Error(c);Error.captureStackTrace(d,N),b.setHeader?(b[F]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(K,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function O(a,b,c){if(b){let c=q(b)?b.size:E(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${H[a.readyState]})`);process.nextTick(c,b)}}function P(a,b){let c=this[y];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[y]&&(c._socket.removeListener("data",$),process.nextTick(W,c._socket),1005===a?c.close():c.close(a,b))}function Q(){let a=this[y];a.isPaused||a._socket.resume()}function R(a){let b=this[y];void 0!==b._socket[y]&&(b._socket.removeListener("data",$),process.nextTick(W,b._socket),b.close(a[x])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function S(){this[y].emitClose()}function T(a,b){this[y].emit("message",a,b)}function U(a){let b=this[y];b._autoPong&&b.pong(a,!this._isServer,z),b.emit("ping",a)}function V(a){this[y].emit("pong",a)}function W(a){a.resume()}function X(a){let b=this[y];b.readyState!==J.CLOSED&&(b.readyState===J.OPEN&&(b._readyState=J.CLOSING,Y(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function Y(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),a._closeTimeout)}function Z(){let a=this[y];if(this.removeListener("close",Z),this.removeListener("data",$),this.removeListener("end",_),a._readyState=J.CLOSING,!this._readableState.endEmitted&&!a._closeFrameReceived&&!a._receiver._writableState.errorEmitted&&0!==this._readableState.length){let b=this.read(this._readableState.length);a._receiver.write(b)}a._receiver.end(),this[y]=void 0,clearTimeout(a._closeTimer),a._receiver._writableState.finished||a._receiver._writableState.errorEmitted?a.emitClose():(a._receiver.on("error",S),a._receiver.on("finish",S))}function $(a){this[y]._receiver.write(a)||this.pause()}function _(){let a=this[y];a._readyState=J.CLOSING,a._receiver.end(),this.end()}function aa(){let a=this[y];this.removeListener("error",aa),this.on("error",z),a&&(a._readyState=J.CLOSING,this.destroy())}Object.defineProperty(J,"CONNECTING",{enumerable:!0,value:H.indexOf("CONNECTING")}),Object.defineProperty(J.prototype,"CONNECTING",{enumerable:!0,value:H.indexOf("CONNECTING")}),Object.defineProperty(J,"OPEN",{enumerable:!0,value:H.indexOf("OPEN")}),Object.defineProperty(J.prototype,"OPEN",{enumerable:!0,value:H.indexOf("OPEN")}),Object.defineProperty(J,"CLOSING",{enumerable:!0,value:H.indexOf("CLOSING")}),Object.defineProperty(J.prototype,"CLOSING",{enumerable:!0,value:H.indexOf("CLOSING")}),Object.defineProperty(J,"CLOSED",{enumerable:!0,value:H.indexOf("CLOSED")}),Object.defineProperty(J.prototype,"CLOSED",{enumerable:!0,value:H.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(J.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(J.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[v])return b[w];return null},set(b){for(let b of this.listeners(a))if(b[v]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[v]:!0})}})}),J.prototype.addEventListener=A,J.prototype.removeEventListener=B,a.exports=J},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},43532:a=>{(()=>{"use strict";var b={491:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ContextAPI=void 0;let d=c(223),e=c(172),f=c(930),g="context",h=new d.NoopContextManager;class i{constructor(){}static getInstance(){return this._instance||(this._instance=new i),this._instance}setGlobalContextManager(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}active(){return this._getContextManager().active()}with(a,b,c,...d){return this._getContextManager().with(a,b,c,...d)}bind(a,b){return this._getContextManager().bind(a,b)}_getContextManager(){return(0,e.getGlobal)(g)||h}disable(){this._getContextManager().disable(),(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.ContextAPI=i},930:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagAPI=void 0;let d=c(56),e=c(912),f=c(957),g=c(172);class h{constructor(){function a(a){return function(...b){let c=(0,g.getGlobal)("diag");if(c)return c[a](...b)}}let b=this;b.setLogger=(a,c={logLevel:f.DiagLogLevel.INFO})=>{var d,h,i;if(a===b){let a=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(d=a.stack)?d:a.message),!1}"number"==typeof c&&(c={logLevel:c});let j=(0,g.getGlobal)("diag"),k=(0,e.createLogLevelDiagLogger)(null!=(h=c.logLevel)?h:f.DiagLogLevel.INFO,a);if(j&&!c.suppressOverrideMessage){let a=null!=(i=Error().stack)?i:"<failed to generate stacktrace>";j.warn(`Current logger will be overwritten from ${a}`),k.warn(`Current logger will overwrite one already registered from ${a}`)}return(0,g.registerGlobal)("diag",k,b,!0)},b.disable=()=>{(0,g.unregisterGlobal)("diag",b)},b.createComponentLogger=a=>new d.DiagComponentLogger(a),b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}static instance(){return this._instance||(this._instance=new h),this._instance}}b.DiagAPI=h},653:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.MetricsAPI=void 0;let d=c(660),e=c(172),f=c(930),g="metrics";class h{constructor(){}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalMeterProvider(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}getMeterProvider(){return(0,e.getGlobal)(g)||d.NOOP_METER_PROVIDER}getMeter(a,b,c){return this.getMeterProvider().getMeter(a,b,c)}disable(){(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.MetricsAPI=h},181:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.PropagationAPI=void 0;let d=c(172),e=c(874),f=c(194),g=c(277),h=c(369),i=c(930),j="propagation",k=new e.NoopTextMapPropagator;class l{constructor(){this.createBaggage=h.createBaggage,this.getBaggage=g.getBaggage,this.getActiveBaggage=g.getActiveBaggage,this.setBaggage=g.setBaggage,this.deleteBaggage=g.deleteBaggage}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalPropagator(a){return(0,d.registerGlobal)(j,a,i.DiagAPI.instance())}inject(a,b,c=f.defaultTextMapSetter){return this._getGlobalPropagator().inject(a,b,c)}extract(a,b,c=f.defaultTextMapGetter){return this._getGlobalPropagator().extract(a,b,c)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,d.unregisterGlobal)(j,i.DiagAPI.instance())}_getGlobalPropagator(){return(0,d.getGlobal)(j)||k}}b.PropagationAPI=l},997:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceAPI=void 0;let d=c(172),e=c(846),f=c(139),g=c(607),h=c(930),i="trace";class j{constructor(){this._proxyTracerProvider=new e.ProxyTracerProvider,this.wrapSpanContext=f.wrapSpanContext,this.isSpanContextValid=f.isSpanContextValid,this.deleteSpan=g.deleteSpan,this.getSpan=g.getSpan,this.getActiveSpan=g.getActiveSpan,this.getSpanContext=g.getSpanContext,this.setSpan=g.setSpan,this.setSpanContext=g.setSpanContext}static getInstance(){return this._instance||(this._instance=new j),this._instance}setGlobalTracerProvider(a){let b=(0,d.registerGlobal)(i,this._proxyTracerProvider,h.DiagAPI.instance());return b&&this._proxyTracerProvider.setDelegate(a),b}getTracerProvider(){return(0,d.getGlobal)(i)||this._proxyTracerProvider}getTracer(a,b){return this.getTracerProvider().getTracer(a,b)}disable(){(0,d.unregisterGlobal)(i,h.DiagAPI.instance()),this._proxyTracerProvider=new e.ProxyTracerProvider}}b.TraceAPI=j},277:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.deleteBaggage=b.setBaggage=b.getActiveBaggage=b.getBaggage=void 0;let d=c(491),e=(0,c(780).createContextKey)("OpenTelemetry Baggage Key");function f(a){return a.getValue(e)||void 0}b.getBaggage=f,b.getActiveBaggage=function(){return f(d.ContextAPI.getInstance().active())},b.setBaggage=function(a,b){return a.setValue(e,b)},b.deleteBaggage=function(a){return a.deleteValue(e)}},993:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.BaggageImpl=void 0;class c{constructor(a){this._entries=a?new Map(a):new Map}getEntry(a){let b=this._entries.get(a);if(b)return Object.assign({},b)}getAllEntries(){return Array.from(this._entries.entries()).map(([a,b])=>[a,b])}setEntry(a,b){let d=new c(this._entries);return d._entries.set(a,b),d}removeEntry(a){let b=new c(this._entries);return b._entries.delete(a),b}removeEntries(...a){let b=new c(this._entries);for(let c of a)b._entries.delete(c);return b}clear(){return new c}}b.BaggageImpl=c},830:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataSymbol=void 0,b.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataFromString=b.createBaggage=void 0;let d=c(930),e=c(993),f=c(830),g=d.DiagAPI.instance();b.createBaggage=function(a={}){return new e.BaggageImpl(new Map(Object.entries(a)))},b.baggageEntryMetadataFromString=function(a){return"string"!=typeof a&&(g.error(`Cannot create baggage metadata from unknown type: ${typeof a}`),a=""),{__TYPE__:f.baggageEntryMetadataSymbol,toString:()=>a}}},67:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.context=void 0,b.context=c(491).ContextAPI.getInstance()},223:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopContextManager=void 0;let d=c(780);class e{active(){return d.ROOT_CONTEXT}with(a,b,c,...d){return b.call(c,...d)}bind(a,b){return b}enable(){return this}disable(){return this}}b.NoopContextManager=e},780:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ROOT_CONTEXT=b.createContextKey=void 0,b.createContextKey=function(a){return Symbol.for(a)};class c{constructor(a){let b=this;b._currentContext=a?new Map(a):new Map,b.getValue=a=>b._currentContext.get(a),b.setValue=(a,d)=>{let e=new c(b._currentContext);return e._currentContext.set(a,d),e},b.deleteValue=a=>{let d=new c(b._currentContext);return d._currentContext.delete(a),d}}}b.ROOT_CONTEXT=new c},506:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.diag=void 0,b.diag=c(930).DiagAPI.instance()},56:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagComponentLogger=void 0;let d=c(172);class e{constructor(a){this._namespace=a.namespace||"DiagComponentLogger"}debug(...a){return f("debug",this._namespace,a)}error(...a){return f("error",this._namespace,a)}info(...a){return f("info",this._namespace,a)}warn(...a){return f("warn",this._namespace,a)}verbose(...a){return f("verbose",this._namespace,a)}}function f(a,b,c){let e=(0,d.getGlobal)("diag");if(e)return c.unshift(b),e[a](...c)}b.DiagComponentLogger=e},972:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagConsoleLogger=void 0;let c=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class d{constructor(){for(let a=0;a<c.length;a++)this[c[a].n]=function(a){return function(...b){if(console){let c=console[a];if("function"!=typeof c&&(c=console.log),"function"==typeof c)return c.apply(console,b)}}}(c[a].c)}}b.DiagConsoleLogger=d},912:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createLogLevelDiagLogger=void 0;let d=c(957);b.createLogLevelDiagLogger=function(a,b){function c(c,d){let e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<d.DiagLogLevel.NONE?a=d.DiagLogLevel.NONE:a>d.DiagLogLevel.ALL&&(a=d.DiagLogLevel.ALL),b=b||{},{error:c("error",d.DiagLogLevel.ERROR),warn:c("warn",d.DiagLogLevel.WARN),info:c("info",d.DiagLogLevel.INFO),debug:c("debug",d.DiagLogLevel.DEBUG),verbose:c("verbose",d.DiagLogLevel.VERBOSE)}}},957:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagLogLevel=void 0,function(a){a[a.NONE=0]="NONE",a[a.ERROR=30]="ERROR",a[a.WARN=50]="WARN",a[a.INFO=60]="INFO",a[a.DEBUG=70]="DEBUG",a[a.VERBOSE=80]="VERBOSE",a[a.ALL=9999]="ALL"}(b.DiagLogLevel||(b.DiagLogLevel={}))},172:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.unregisterGlobal=b.getGlobal=b.registerGlobal=void 0;let d=c(200),e=c(521),f=c(130),g=e.VERSION.split(".")[0],h=Symbol.for(`opentelemetry.js.api.${g}`),i=d._globalThis;b.registerGlobal=function(a,b,c,d=!1){var f;let g=i[h]=null!=(f=i[h])?f:{version:e.VERSION};if(!d&&g[a]){let b=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${a}`);return c.error(b.stack||b.message),!1}if(g.version!==e.VERSION){let b=Error(`@opentelemetry/api: Registration of version v${g.version} for ${a} does not match previously registered API v${e.VERSION}`);return c.error(b.stack||b.message),!1}return g[a]=b,c.debug(`@opentelemetry/api: Registered a global for ${a} v${e.VERSION}.`),!0},b.getGlobal=function(a){var b,c;let d=null==(b=i[h])?void 0:b.version;if(d&&(0,f.isCompatible)(d))return null==(c=i[h])?void 0:c[a]},b.unregisterGlobal=function(a,b){b.debug(`@opentelemetry/api: Unregistering a global for ${a} v${e.VERSION}.`);let c=i[h];c&&delete c[a]}},130:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.isCompatible=b._makeCompatibilityCheck=void 0;let d=c(521),e=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function f(a){let b=new Set([a]),c=new Set,d=a.match(e);if(!d)return()=>!1;let f={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=f.prerelease)return function(b){return b===a};function g(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;let d=a.match(e);if(!d)return g(a);let h={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=h.prerelease||f.major!==h.major)return g(a);if(0===f.major)return f.minor===h.minor&&f.patch<=h.patch?(b.add(a),!0):g(a);return f.minor<=h.minor?(b.add(a),!0):g(a)}}b._makeCompatibilityCheck=f,b.isCompatible=f(d.VERSION)},886:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.metrics=void 0,b.metrics=c(653).MetricsAPI.getInstance()},901:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ValueType=void 0,function(a){a[a.INT=0]="INT",a[a.DOUBLE=1]="DOUBLE"}(b.ValueType||(b.ValueType={}))},102:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createNoopMeter=b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=b.NOOP_OBSERVABLE_GAUGE_METRIC=b.NOOP_OBSERVABLE_COUNTER_METRIC=b.NOOP_UP_DOWN_COUNTER_METRIC=b.NOOP_HISTOGRAM_METRIC=b.NOOP_COUNTER_METRIC=b.NOOP_METER=b.NoopObservableUpDownCounterMetric=b.NoopObservableGaugeMetric=b.NoopObservableCounterMetric=b.NoopObservableMetric=b.NoopHistogramMetric=b.NoopUpDownCounterMetric=b.NoopCounterMetric=b.NoopMetric=b.NoopMeter=void 0;class c{constructor(){}createHistogram(a,c){return b.NOOP_HISTOGRAM_METRIC}createCounter(a,c){return b.NOOP_COUNTER_METRIC}createUpDownCounter(a,c){return b.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(a,c){return b.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(a,c){return b.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(a,c){return b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(a,b){}removeBatchObservableCallback(a){}}b.NoopMeter=c;class d{}b.NoopMetric=d;class e extends d{add(a,b){}}b.NoopCounterMetric=e;class f extends d{add(a,b){}}b.NoopUpDownCounterMetric=f;class g extends d{record(a,b){}}b.NoopHistogramMetric=g;class h{addCallback(a){}removeCallback(a){}}b.NoopObservableMetric=h;class i extends h{}b.NoopObservableCounterMetric=i;class j extends h{}b.NoopObservableGaugeMetric=j;class k extends h{}b.NoopObservableUpDownCounterMetric=k,b.NOOP_METER=new c,b.NOOP_COUNTER_METRIC=new e,b.NOOP_HISTOGRAM_METRIC=new g,b.NOOP_UP_DOWN_COUNTER_METRIC=new f,b.NOOP_OBSERVABLE_COUNTER_METRIC=new i,b.NOOP_OBSERVABLE_GAUGE_METRIC=new j,b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new k,b.createNoopMeter=function(){return b.NOOP_METER}},660:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NOOP_METER_PROVIDER=b.NoopMeterProvider=void 0;let d=c(102);class e{getMeter(a,b,c){return d.NOOP_METER}}b.NoopMeterProvider=e,b.NOOP_METER_PROVIDER=new e},200:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(46),b)},651:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b._globalThis=void 0,b._globalThis="object"==typeof globalThis?globalThis:global},46:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(651),b)},939:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.propagation=void 0,b.propagation=c(181).PropagationAPI.getInstance()},874:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTextMapPropagator=void 0;class c{inject(a,b){}extract(a,b){return a}fields(){return[]}}b.NoopTextMapPropagator=c},194:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.defaultTextMapSetter=b.defaultTextMapGetter=void 0,b.defaultTextMapGetter={get(a,b){if(null!=a)return a[b]},keys:a=>null==a?[]:Object.keys(a)},b.defaultTextMapSetter={set(a,b,c){null!=a&&(a[b]=c)}}},845:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.trace=void 0,b.trace=c(997).TraceAPI.getInstance()},403:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NonRecordingSpan=void 0;let d=c(476);class e{constructor(a=d.INVALID_SPAN_CONTEXT){this._spanContext=a}spanContext(){return this._spanContext}setAttribute(a,b){return this}setAttributes(a){return this}addEvent(a,b){return this}setStatus(a){return this}updateName(a){return this}end(a){}isRecording(){return!1}recordException(a,b){}}b.NonRecordingSpan=e},614:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracer=void 0;let d=c(491),e=c(607),f=c(403),g=c(139),h=d.ContextAPI.getInstance();class i{startSpan(a,b,c=h.active()){var d;if(null==b?void 0:b.root)return new f.NonRecordingSpan;let i=c&&(0,e.getSpanContext)(c);return"object"==typeof(d=i)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&(0,g.isSpanContextValid)(i)?new f.NonRecordingSpan(i):new f.NonRecordingSpan}startActiveSpan(a,b,c,d){let f,g,i;if(arguments.length<2)return;2==arguments.length?i=b:3==arguments.length?(f=b,i=c):(f=b,g=c,i=d);let j=null!=g?g:h.active(),k=this.startSpan(a,f,j),l=(0,e.setSpan)(j,k);return h.with(l,i,void 0,k)}}b.NoopTracer=i},124:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracerProvider=void 0;let d=c(614);class e{getTracer(a,b,c){return new d.NoopTracer}}b.NoopTracerProvider=e},125:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracer=void 0;let d=new(c(614)).NoopTracer;class e{constructor(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}startSpan(a,b,c){return this._getTracer().startSpan(a,b,c)}startActiveSpan(a,b,c,d){let e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)}_getTracer(){if(this._delegate)return this._delegate;let a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):d}}b.ProxyTracer=e},846:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracerProvider=void 0;let d=c(125),e=new(c(124)).NoopTracerProvider;class f{getTracer(a,b,c){var e;return null!=(e=this.getDelegateTracer(a,b,c))?e:new d.ProxyTracer(this,a,b,c)}getDelegate(){var a;return null!=(a=this._delegate)?a:e}setDelegate(a){this._delegate=a}getDelegateTracer(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)}}b.ProxyTracerProvider=f},996:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SamplingDecision=void 0,function(a){a[a.NOT_RECORD=0]="NOT_RECORD",a[a.RECORD=1]="RECORD",a[a.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(b.SamplingDecision||(b.SamplingDecision={}))},607:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getSpanContext=b.setSpanContext=b.deleteSpan=b.setSpan=b.getActiveSpan=b.getSpan=void 0;let d=c(780),e=c(403),f=c(491),g=(0,d.createContextKey)("OpenTelemetry Context Key SPAN");function h(a){return a.getValue(g)||void 0}function i(a,b){return a.setValue(g,b)}b.getSpan=h,b.getActiveSpan=function(){return h(f.ContextAPI.getInstance().active())},b.setSpan=i,b.deleteSpan=function(a){return a.deleteValue(g)},b.setSpanContext=function(a,b){return i(a,new e.NonRecordingSpan(b))},b.getSpanContext=function(a){var b;return null==(b=h(a))?void 0:b.spanContext()}},325:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceStateImpl=void 0;let d=c(564);class e{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,b){let c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c}unset(a){let b=this._clone();return b._internalState.delete(a),b}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,b)=>(a.push(b+"="+this.get(b)),a),[]).join(",")}_parse(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce((a,b)=>{let c=b.trim(),e=c.indexOf("=");if(-1!==e){let f=c.slice(0,e),g=c.slice(e+1,b.length);(0,d.validateKey)(f)&&(0,d.validateValue)(g)&&a.set(f,g)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new e;return a._internalState=new Map(this._internalState),a}}b.TraceStateImpl=e},564:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.validateValue=b.validateKey=void 0;let c="[_0-9a-z-*/]",d=`[a-z]${c}{0,255}`,e=`[a-z0-9]${c}{0,240}@[a-z]${c}{0,13}`,f=RegExp(`^(?:${d}|${e})$`),g=/^[ -~]{0,255}[!-~]$/,h=/,|=/;b.validateKey=function(a){return f.test(a)},b.validateValue=function(a){return g.test(a)&&!h.test(a)}},98:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createTraceState=void 0;let d=c(325);b.createTraceState=function(a){return new d.TraceStateImpl(a)}},476:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.INVALID_SPAN_CONTEXT=b.INVALID_TRACEID=b.INVALID_SPANID=void 0;let d=c(475);b.INVALID_SPANID="0000000000000000",b.INVALID_TRACEID="00000000000000000000000000000000",b.INVALID_SPAN_CONTEXT={traceId:b.INVALID_TRACEID,spanId:b.INVALID_SPANID,traceFlags:d.TraceFlags.NONE}},357:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanKind=void 0,function(a){a[a.INTERNAL=0]="INTERNAL",a[a.SERVER=1]="SERVER",a[a.CLIENT=2]="CLIENT",a[a.PRODUCER=3]="PRODUCER",a[a.CONSUMER=4]="CONSUMER"}(b.SpanKind||(b.SpanKind={}))},139:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.wrapSpanContext=b.isSpanContextValid=b.isValidSpanId=b.isValidTraceId=void 0;let d=c(476),e=c(403),f=/^([0-9a-f]{32})$/i,g=/^[0-9a-f]{16}$/i;function h(a){return f.test(a)&&a!==d.INVALID_TRACEID}function i(a){return g.test(a)&&a!==d.INVALID_SPANID}b.isValidTraceId=h,b.isValidSpanId=i,b.isSpanContextValid=function(a){return h(a.traceId)&&i(a.spanId)},b.wrapSpanContext=function(a){return new e.NonRecordingSpan(a)}},847:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanStatusCode=void 0,function(a){a[a.UNSET=0]="UNSET",a[a.OK=1]="OK",a[a.ERROR=2]="ERROR"}(b.SpanStatusCode||(b.SpanStatusCode={}))},475:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceFlags=void 0,function(a){a[a.NONE=0]="NONE",a[a.SAMPLED=1]="SAMPLED"}(b.TraceFlags||(b.TraceFlags={}))},521:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VERSION=void 0,b.VERSION="1.6.0"}},c={};function d(a){var e=c[a];if(void 0!==e)return e.exports;var f=c[a]={exports:{}},g=!0;try{b[a].call(f.exports,f,f.exports,d),g=!1}finally{g&&delete c[a]}return f.exports}d.ab=__dirname+"/";var e={};(()=>{Object.defineProperty(e,"__esModule",{value:!0}),e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var a=d(369);Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var b=d(780);Object.defineProperty(e,"createContextKey",{enumerable:!0,get:function(){return b.createContextKey}}),Object.defineProperty(e,"ROOT_CONTEXT",{enumerable:!0,get:function(){return b.ROOT_CONTEXT}});var c=d(972);Object.defineProperty(e,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}});var f=d(957);Object.defineProperty(e,"DiagLogLevel",{enumerable:!0,get:function(){return f.DiagLogLevel}});var g=d(102);Object.defineProperty(e,"createNoopMeter",{enumerable:!0,get:function(){return g.createNoopMeter}});var h=d(901);Object.defineProperty(e,"ValueType",{enumerable:!0,get:function(){return h.ValueType}});var i=d(194);Object.defineProperty(e,"defaultTextMapGetter",{enumerable:!0,get:function(){return i.defaultTextMapGetter}}),Object.defineProperty(e,"defaultTextMapSetter",{enumerable:!0,get:function(){return i.defaultTextMapSetter}});var j=d(125);Object.defineProperty(e,"ProxyTracer",{enumerable:!0,get:function(){return j.ProxyTracer}});var k=d(846);Object.defineProperty(e,"ProxyTracerProvider",{enumerable:!0,get:function(){return k.ProxyTracerProvider}});var l=d(996);Object.defineProperty(e,"SamplingDecision",{enumerable:!0,get:function(){return l.SamplingDecision}});var m=d(357);Object.defineProperty(e,"SpanKind",{enumerable:!0,get:function(){return m.SpanKind}});var n=d(847);Object.defineProperty(e,"SpanStatusCode",{enumerable:!0,get:function(){return n.SpanStatusCode}});var o=d(475);Object.defineProperty(e,"TraceFlags",{enumerable:!0,get:function(){return o.TraceFlags}});var p=d(98);Object.defineProperty(e,"createTraceState",{enumerable:!0,get:function(){return p.createTraceState}});var q=d(139);Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return q.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return q.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return q.isValidSpanId}});var r=d(476);Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return r.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return r.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return r.INVALID_SPAN_CONTEXT}});let s=d(67);Object.defineProperty(e,"context",{enumerable:!0,get:function(){return s.context}});let t=d(506);Object.defineProperty(e,"diag",{enumerable:!0,get:function(){return t.diag}});let u=d(886);Object.defineProperty(e,"metrics",{enumerable:!0,get:function(){return u.metrics}});let v=d(939);Object.defineProperty(e,"propagation",{enumerable:!0,get:function(){return v.propagation}});let w=d(845);Object.defineProperty(e,"trace",{enumerable:!0,get:function(){return w.trace}}),e.default={context:s.context,diag:t.diag,metrics:u.metrics,propagation:v.propagation,trace:w.trace}})(),a.exports=e})()},44708:a=>{"use strict";a.exports=require("node:https")},44745:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{callServer:function(){return d.callServer},createServerReference:function(){return f.createServerReference},findSourceMapURL:function(){return e.findSourceMapURL}});let d=c(88786),e=c(64074),f=c(77973)},45170:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleAuth=b.GoogleAuthExceptionMessages=void 0;let d=c(79646),e=c(29021),f=c(32842),g=c(71779),h=c(21820),i=c(33873),j=c(78053),k=c(46377),l=c(47872),m=c(68075),n=c(47541),o=c(12471),p=c(75996),q=c(86357),r=c(86),s=c(37254),t=c(73654),u=c(74072);b.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:"Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_CREDENTIALS_FOUND:"Unable to find credentials in current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:"Unable to detect a Universe Domain in the current environment.\nTo learn more about Universe Domain retrieval, visit: \nhttps://cloud.google.com/compute/docs/metadata/predefined-metadata-keys"};class v{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#p=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(a={}){if(this._cachedProjectId=a.projectId||null,this.cachedCredential=a.authClient||null,this.keyFilename=a.keyFilename||a.keyFile,this.scopes=a.scopes,this.clientOptions=a.clientOptions||{},this.jsonContent=a.credentials||null,this.apiKey=a.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(b.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);a.universeDomain&&(this.clientOptions.universeDomain=a.universeDomain)}setGapicJWTValues(a){a.defaultServicePath=this.defaultServicePath,a.useJWTAccessWithScope=this.useJWTAccessWithScope,a.defaultScopes=this.defaultScopes}getProjectId(a){if(!a)return this.getProjectIdAsync();this.getProjectIdAsync().then(b=>a(null,b),a)}async getProjectIdOptional(){try{return await this.getProjectId()}catch(a){if(a instanceof Error&&a.message===b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw a}}async findAndCacheProjectId(){let a=null;if(a||=await this.getProductionProjectId(),a||=await this.getFileProjectId(),a||=await this.getDefaultServiceProjectId(),a||=await this.getGCEProjectId(),a||=await this.getExternalAccountClientProjectId())return this._cachedProjectId=a,a;throw Error(b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let a;try{a=await g.universe("universe-domain"),a||=s.DEFAULT_UNIVERSE}catch(b){if(b&&b?.response?.status===404)a=s.DEFAULT_UNIVERSE;else throw b}return a}async getUniverseDomain(){let a=(0,u.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{a??=(await this.getClient()).universeDomain}catch{a??=s.DEFAULT_UNIVERSE}return a}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(a={},b){let c;if("function"==typeof a?b=a:c=a,!b)return this.getApplicationDefaultAsync(c);this.getApplicationDefaultAsync(c).then(a=>b(null,a.credential,a.projectId),b)}async getApplicationDefaultAsync(a={}){let c;if(this.cachedCredential)return await this.#q(this.cachedCredential,null);if((c=await this._tryGetApplicationCredentialsFromEnvironmentVariable(a))||(c=await this._tryGetApplicationCredentialsFromWellKnownFile(a)))return c instanceof n.JWT?c.scopes=this.scopes:c instanceof r.BaseExternalAccountClient&&(c.scopes=this.getAnyScopes()),await this.#q(c);if(await this._checkIsGCE())return a.scopes=this.getAnyScopes(),await this.#q(new k.Compute(a));throw Error(b.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async #q(a,b=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let c=await this.getProjectIdOptional();return b&&(a.quotaProjectId=b),this.cachedCredential=a,{credential:a,projectId:c}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=g.getGCPResidency()||await g.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(a){let b=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!b||0===b.length)return null;try{return this._getApplicationCredentialsFromFilePath(b,a)}catch(a){throw a instanceof Error&&(a.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${a.message}`),a}}async _tryGetApplicationCredentialsFromWellKnownFile(a){let b=null;if(this._isWindows())b=process.env.APPDATA;else{let a=process.env.HOME;a&&(b=i.join(a,".config"))}return(b&&(b=i.join(b,"gcloud","application_default_credentials.json"),e.existsSync(b)||(b=null)),b)?await this._getApplicationCredentialsFromFilePath(b,a):null}async _getApplicationCredentialsFromFilePath(a,b={}){if(!a||0===a.length)throw Error("The file path is invalid.");try{if(a=e.realpathSync(a),!e.lstatSync(a).isFile())throw Error()}catch(b){throw b instanceof Error&&(b.message=`The file at ${a} does not exist, or it is not a file. ${b.message}`),b}let c=e.createReadStream(a);return this.fromStream(c,b)}fromImpersonatedJSON(a){if(!a)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if(a.type!==p.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${p.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!a.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!a.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let b=this.fromJSON(a.source_credentials);if(a.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${a.service_account_impersonation_url}`);let c=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(a.service_account_impersonation_url)?.groups?.target;if(!c)throw RangeError(`Cannot extract target principal from ${a.service_account_impersonation_url}`);let d=(this.scopes||a.scopes||this.defaultScopes)??[];return new p.Impersonated({...a,sourceClient:b,targetPrincipal:c,targetScopes:Array.isArray(d)?d:[d]})}fromJSON(a,b={}){let c,d=(0,u.originalOrCamelOptions)(b).get("universe_domain");return a.type===o.USER_REFRESH_ACCOUNT_TYPE?(c=new o.UserRefreshClient(b)).fromJSON(a):a.type===p.IMPERSONATED_ACCOUNT_TYPE?c=this.fromImpersonatedJSON(a):a.type===r.EXTERNAL_ACCOUNT_TYPE?(c=q.ExternalAccountClient.fromJSON({...a,...b})).scopes=this.getAnyScopes():a.type===t.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?c=new t.ExternalAccountAuthorizedUserClient({...a,...b}):(b.scopes=this.scopes,c=new n.JWT(b),this.setGapicJWTValues(c),c.fromJSON(a)),d&&(c.universeDomain=d),c}_cacheClientFromJSON(a,b){let c=this.fromJSON(a,b);return this.jsonContent=a,this.cachedCredential=c,c}fromStream(a,b={},c){let d={};if("function"==typeof b?c=b:d=b,!c)return this.fromStreamAsync(a,d);this.fromStreamAsync(a,d).then(a=>c(null,a),c)}fromStreamAsync(a,b){return new Promise((c,d)=>{if(!a)throw Error("Must pass in a stream containing the Google auth settings.");let e=[];a.setEncoding("utf8").on("error",d).on("data",a=>e.push(a)).on("end",()=>{try{try{let a=JSON.parse(e.join("")),d=this._cacheClientFromJSON(a,b);return c(d)}catch(b){if(!this.keyFilename)throw b;let a=new n.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),c(a)}}catch(a){return d(a)}})})}fromAPIKey(a,b={}){return new n.JWT({...b,apiKey:a})}_isWindows(){let a=h.platform();return!!a&&!!(a.length>=3)&&"win"===a.substring(0,3).toLowerCase()}async getDefaultServiceProjectId(){return new Promise(a=>{(0,d.exec)("gcloud config config-helper --format json",(b,c)=>{if(!b&&c)try{let b=JSON.parse(c).configuration.properties.core.project;a(b);return}catch(a){}a(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let a=await this.getClient();if(a&&a.projectId)return a.projectId}let a=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return a?a.projectId:null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==r.EXTERNAL_ACCOUNT_TYPE)return null;let a=await this.getClient();return await a.getProjectId()}async getGCEProjectId(){try{return await g.project("project-id")}catch(a){return null}}getCredentials(a){if(!a)return this.getCredentialsAsync();this.getCredentialsAsync().then(b=>a(null,b),a)}async getCredentialsAsync(){let a=await this.getClient();if(a instanceof p.Impersonated)return{client_email:a.getTargetPrincipal()};if(a instanceof r.BaseExternalAccountClient){let b=a.getServiceAccountEmail();if(b)return{client_email:b,universe_domain:a.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[a,b]=await Promise.all([g.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:a,universe_domain:b}}throw Error(b.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#p=this.#p||this.#r();try{return await this.#p}finally{this.#p=null}}async #r(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let a=i.resolve(this.keyFilename),b=e.createReadStream(a);return await this.fromStreamAsync(b,this.clientOptions)}if(this.apiKey){let a=await this.fromAPIKey(this.apiKey,this.clientOptions);a.scopes=this.scopes;let{credential:b}=await this.#q(a);return b}{let{credential:a}=await this.getApplicationDefaultAsync(this.clientOptions);return a}}async getIdTokenClient(a){let b=await this.getClient();if(!("fetchIdToken"in b))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new l.IdTokenClient({targetAudience:a,idTokenProvider:b})}async getAccessToken(){let a=await this.getClient();return(await a.getAccessToken()).token}async getRequestHeaders(a){return(await this.getClient()).getRequestHeaders(a)}async authorizeRequest(a={}){let b=a.url,c=await this.getClient(),d=await c.getRequestHeaders(b);return a.headers=f.Gaxios.mergeHeaders(a.headers,d),a}async fetch(...a){return(await this.getClient()).fetch(...a)}async request(a){return(await this.getClient()).request(a)}getEnv(){return(0,m.getEnv)()}async sign(a,b){let c=await this.getClient(),d=await this.getUniverseDomain();if(b=b||`https://iamcredentials.${d}/v1/projects/-/serviceAccounts/`,c instanceof p.Impersonated)return(await c.sign(a)).signedBlob;let e=(0,j.createCrypto)();if(c instanceof n.JWT&&c.key)return await e.sign(c.key,a);let f=await this.getCredentials();if(!f.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(e,f.client_email,a,b)}async signBlob(a,b,c,d){let e=new URL(d+`${b}:signBlob`);return(await this.request({method:"POST",url:e.href,data:{payload:a.encodeBase64StringUtf8(c)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}b.GoogleAuth=v},46160:(a,b,c)=>{var d=c(21712).Buffer,e=c(27910);function f(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=d.alloc(0),this;if("function"==typeof a.pipe)return this.buffer=d.alloc(0),a.pipe(this),this;if(a.length||"object"==typeof a)return this.buffer=a,this.writable=!1,process.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof a+")")}c(28354).inherits(f,e),f.prototype.write=function(a){this.buffer=d.concat([this.buffer,d.from(a)]),this.emit("data",a)},f.prototype.end=function(a){a&&this.write(a),this.emit("end",a),this.emit("close"),this.writable=!1,this.readable=!1},a.exports=f},46245:(a,b,c)=>{"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.OAuth2Client=b.ClientAuthentication=b.CertificateFormat=b.CodeChallengeMethod=void 0;let g=c(32842),h=c(11723),i=c(27910),j=c(2189),k=c(74072),l=c(78053),m=c(37254),n=c(31240);!function(a){a.Plain="plain",a.S256="S256"}(d||(b.CodeChallengeMethod=d={})),function(a){a.PEM="PEM",a.JWK="JWK"}(e||(b.CertificateFormat=e={})),function(a){a.ClientSecretPost="ClientSecretPost",a.ClientSecretBasic="ClientSecretBasic",a.None="None"}(f||(b.ClientAuthentication=f={}));class o extends m.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=e.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(a={},b,c){super("object"==typeof a?a:{}),"object"!=typeof a&&(a={clientId:a,clientSecret:b,redirectUri:c}),this._clientId=a.clientId||a.client_id,this._clientSecret=a.clientSecret||a.client_secret,this.redirectUri=a.redirectUri||a.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...a.endpoints},this.clientAuthentication=a.clientAuthentication||f.ClientSecretPost,this.issuers=a.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(a={}){if(a.code_challenge_method&&!a.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");return a.response_type=a.response_type||"code",a.client_id=a.client_id||this._clientId,a.redirect_uri=a.redirect_uri||this.redirectUri,Array.isArray(a.scope)&&(a.scope=a.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+h.stringify(a)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let a=(0,l.createCrypto)(),b=a.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),c=(await a.sha256DigestBase64(b)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:b,codeChallenge:c}}getToken(a,b){let c="string"==typeof a?{code:a}:a;if(!b)return this.getTokenAsync(c);this.getTokenAsync(c).then(a=>b(null,a.tokens,a.res),a=>b(a,null,a.response))}async getTokenAsync(a){let b=this.endpoints.oauth2TokenUrl.toString(),c=new Headers,d={client_id:a.client_id||this._clientId,code_verifier:a.codeVerifier,code:a.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri||this.redirectUri};if(this.clientAuthentication===f.ClientSecretBasic){let a=Buffer.from(`${this._clientId}:${this._clientSecret}`);c.set("authorization",`Basic ${a.toString("base64")}`)}this.clientAuthentication===f.ClientSecretPost&&(d.client_secret=this._clientSecret);let e={...o.RETRY_CONFIG,method:"POST",url:b,data:new URLSearchParams((0,k.removeUndefinedValuesInObject)(d)),headers:c};m.AuthClient.setMethodName(e,"getTokenAsync");let g=await this.transporter.request(e),h=g.data;return g.data&&g.data.expires_in&&(h.expiry_date=new Date().getTime()+1e3*g.data.expires_in,delete h.expires_in),this.emit("tokens",h),{tokens:h,res:g}}async refreshToken(a){if(!a)return this.refreshTokenNoCache(a);if(this.refreshTokenPromises.has(a))return this.refreshTokenPromises.get(a);let b=this.refreshTokenNoCache(a).then(b=>(this.refreshTokenPromises.delete(a),b),b=>{throw this.refreshTokenPromises.delete(a),b});return this.refreshTokenPromises.set(a,b),b}async refreshTokenNoCache(a){let b;if(!a)throw Error("No refresh token is set.");let c=this.endpoints.oauth2TokenUrl.toString(),d={refresh_token:a,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};try{let a={...o.RETRY_CONFIG,method:"POST",url:c,data:new URLSearchParams((0,k.removeUndefinedValuesInObject)(d))};m.AuthClient.setMethodName(a,"refreshTokenNoCache"),b=await this.transporter.request(a)}catch(a){throw a instanceof g.GaxiosError&&"invalid_grant"===a.message&&a.response?.data&&/ReAuth/i.test(a.response.data.error_description)&&(a.message=JSON.stringify(a.response.data)),a}let e=b.data;return b.data&&b.data.expires_in&&(e.expiry_date=new Date().getTime()+1e3*b.data.expires_in,delete e.expires_in),this.emit("tokens",e),{tokens:e,res:b}}refreshAccessToken(a){if(!a)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then(b=>a(null,b.credentials,b.res),a)}async refreshAccessTokenAsync(){let a=await this.refreshToken(this.credentials.refresh_token),b=a.tokens;return b.refresh_token=this.credentials.refresh_token,this.credentials=b,{credentials:this.credentials,res:a.res}}getAccessToken(a){if(!a)return this.getAccessTokenAsync();this.getAccessTokenAsync().then(b=>a(null,b.token,b.res),a)}async getAccessTokenAsync(){if(!(!this.credentials.access_token||this.isTokenExpiring()))return{token:this.credentials.access_token};{if(!this.credentials.refresh_token)if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token)return this.setCredentials(a),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let a=await this.refreshAccessTokenAsync();if(!a.credentials||a.credentials&&!a.credentials.access_token)throw Error("Could not refresh access token.");return{token:a.credentials.access_token,res:a.res}}}async getRequestHeaders(a){return(await this.getRequestMetadataAsync(a)).headers}async getRequestMetadataAsync(a){let b=this.credentials;if(!b.access_token&&!b.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(b.access_token&&!this.isTokenExpiring()){b.token_type=b.token_type||"Bearer";let a=new Headers({authorization:b.token_type+" "+b.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let b=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(b)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let c=null,d=null;try{d=(c=await this.refreshToken(b.refresh_token)).tokens}catch(a){throw a.response&&(403===a.response.status||404===a.response.status)&&(a.message=`Could not refresh access token: ${a.message}`),a}let e=this.credentials;e.token_type=e.token_type||"Bearer",d.refresh_token=e.refresh_token,this.credentials=d;let f=new Headers({authorization:e.token_type+" "+d.access_token});return{headers:this.addSharedMetadataHeaders(f),res:c.res}}static getRevokeTokenUrl(a){return new o().getRevokeTokenURL(a).toString()}getRevokeTokenURL(a){let b=new URL(this.endpoints.oauth2RevokeUrl);return b.searchParams.append("token",a),b}revokeToken(a,b){let c={...o.RETRY_CONFIG,url:this.getRevokeTokenURL(a).toString(),method:"POST"};if(m.AuthClient.setMethodName(c,"revokeToken"),!b)return this.transporter.request(c);this.transporter.request(c).then(a=>b(null,a),b)}revokeCredentials(a){if(!a)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then(b=>a(null,b),a)}async revokeCredentialsAsync(){let a=this.credentials.access_token;if(this.credentials={},a)return this.revokeToken(a);throw Error("No access token to revoke.")}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){try{let b=await this.getRequestMetadataAsync();return a.headers=g.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b.headers),this.apiKey&&a.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),f=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,g=c.config.data instanceof i.Readable,h=401===d||403===d;if(!b&&h&&!g&&e)return await this.refreshAccessTokenAsync(),this.requestAsync(a,!0);if(!b&&h&&!g&&f){let b=await this.processAndValidateRefreshHandler();return b?.access_token&&this.setCredentials(b),this.requestAsync(a,!0)}}throw d}}verifyIdToken(a,b){if(b&&"function"!=typeof b)throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!b)return this.verifyIdTokenAsync(a);this.verifyIdTokenAsync(a).then(a=>b(null,a),b)}async verifyIdTokenAsync(a){if(!a.idToken)throw Error("The verifyIdToken method requires an ID Token");let b=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(a.idToken,b.certs,a.audience,this.issuers,a.maxExpiry)}async getTokenInfo(a){let{data:b}=await this.transporter.request({...o.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${a}`},url:this.endpoints.tokenInfoUrl.toString()}),c=Object.assign({expiry_date:new Date().getTime()+1e3*b.expires_in,scopes:b.scope.split(" ")},b);return delete c.expires_in,delete c.scope,c}getFederatedSignonCerts(a){if(!a)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then(b=>a(null,b.certs,b.res),a)}async getFederatedSignonCertsAsync(){let a,b,c=new Date().getTime(),d=(0,l.hasBrowserCrypto)()?e.JWK:e.PEM;if(this.certificateExpiry&&c<this.certificateExpiry.getTime()&&this.certificateCacheFormat===d)return{certs:this.certificateCache,format:d};switch(d){case e.PEM:b=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case e.JWK:b=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${d}`)}try{let c={...o.RETRY_CONFIG,url:b};m.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}let f=a?.headers.get("cache-control"),g=-1;if(f){let a=/max-age=(?<maxAge>[0-9]+)/.exec(f)?.groups?.maxAge;a&&(g=1e3*Number(a))}let h={};switch(d){case e.PEM:h=a.data;break;case e.JWK:for(let b of a.data.keys)h[b.kid]=b;break;default:throw Error(`Unsupported certificate format ${d}`)}let i=new Date;return this.certificateExpiry=-1===g?null:new Date(i.getTime()+g),this.certificateCache=h,this.certificateCacheFormat=d,{certs:h,format:d,res:a}}getIapPublicKeys(a){if(!a)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then(b=>a(null,b.pubkeys,b.res),a)}async getIapPublicKeysAsync(){let a,b=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let c={...o.RETRY_CONFIG,url:b};m.AuthClient.setMethodName(c,"getIapPublicKeysAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}return{pubkeys:a.data,res:a}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(a,b,c,d,e){let f,g,h=(0,l.createCrypto)();e||(e=o.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let i=a.split(".");if(3!==i.length)throw Error("Wrong number of segments in token: "+a);let k=i[0]+"."+i[1],m=i[2];try{f=JSON.parse(h.decodeBase64StringUtf8(i[0]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token envelope: ${i[0]}': ${a.message}`),a}if(!f)throw Error("Can't parse token envelope: "+i[0]);try{g=JSON.parse(h.decodeBase64StringUtf8(i[1]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token payload '${i[0]}`),a}if(!g)throw Error("Can't parse token payload: "+i[1]);if(!Object.prototype.hasOwnProperty.call(b,f.kid))throw Error("No pem found for envelope: "+JSON.stringify(f));let p=b[f.kid];if("ES256"===f.alg&&(m=j.joseToDer(m,"ES256").toString("base64")),!await h.verify(p,k,m))throw Error("Invalid token signature: "+a);if(!g.iat)throw Error("No issue time in token: "+JSON.stringify(g));if(!g.exp)throw Error("No expiration time in token: "+JSON.stringify(g));let q=Number(g.iat);if(isNaN(q))throw Error("iat field using invalid format");let r=Number(g.exp);if(isNaN(r))throw Error("exp field using invalid format");let s=new Date().getTime()/1e3;if(r>=s+e)throw Error("Expiration time too far in future: "+JSON.stringify(g));let t=q-o.CLOCK_SKEW_SECS_,u=r+o.CLOCK_SKEW_SECS_;if(s<t)throw Error("Token used too early, "+s+" < "+t+": "+JSON.stringify(g));if(s>u)throw Error("Token used too late, "+s+" > "+u+": "+JSON.stringify(g));if(d&&0>d.indexOf(g.iss))throw Error("Invalid issuer, expected one of ["+d+"], but got "+g.iss);if(null!=c){let a=g.aud;if(!(c.constructor===Array?c.indexOf(a)>-1:a===c))throw Error("Wrong recipient, payload audience != requiredAudience")}return new n.LoginTicket(f,g)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let a=await this.refreshHandler();if(!a.access_token)throw Error("No access token is returned by the refreshHandler callback.");return a}}isTokenExpiring(){let a=this.credentials.expiry_date;return!!a&&a<=new Date().getTime()+this.eagerRefreshThresholdMillis}}b.OAuth2Client=o},46377:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Compute=void 0;let d=c(32842),e=c(71779),f=c(46245);class g extends f.OAuth2Client{serviceAccountEmail;scopes;constructor(a={}){super(a),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=a.serviceAccountEmail||"default",this.scopes=Array.isArray(a.scopes)?a.scopes:a.scopes?[a.scopes]:[]}async refreshTokenNoCache(){let a,b=`service-accounts/${this.serviceAccountEmail}/token`;try{let c={property:b};this.scopes.length>0&&(c.params={scopes:this.scopes.join(",")}),a=await e.instance(c)}catch(a){throw a instanceof d.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let c=a;return a&&a.expires_in&&(c.expiry_date=new Date().getTime()+1e3*a.expires_in,delete c.expires_in),this.emit("tokens",c),{tokens:c,res:null}}async fetchIdToken(a){let b,c=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${a}`;try{b=await e.instance({property:c})}catch(a){throw a instanceof Error&&(a.message=`Could not fetch ID token: ${a.message}`),a}return b}wrapError(a){let b=a.response;b&&b.status&&(a.status=b.status,403===b.status?a.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+a.message:404===b.status&&(a.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+a.message))}}b.Compute=g},46826:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{atLeastOneTask:function(){return e},scheduleImmediate:function(){return d},scheduleOnNextTick:function(){return c},waitAtLeastOneReactRenderTask:function(){return f}});let c=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},d=a=>{setImmediate(a)};function e(){return new Promise(a=>d(a))}function f(){return new Promise(a=>setImmediate(a))}},47163:(a,b,c)=>{"use strict";a.exports=c(29518)},47541:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWT=void 0;let d=c(81312),e=c(69890),f=c(46245),g=c(37254);class h extends f.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(a={}){super(a),this.email=a.email,this.keyFile=a.keyFile,this.key=a.key,this.keyId=a.keyId,this.scopes=a.scopes,this.subject=a.subject,this.additionalClaims=a.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(a){let b=new h(this);return b.scopes=a,b}async getRequestMetadataAsync(a){a=this.defaultServicePath?`https://${this.defaultServicePath}/`:a;let b=!this.hasUserScopes()&&a||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==g.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==g.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${g.DEFAULT_UNIVERSE}`);if(!this.apiKey&&b)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${a.id_token}`}))}}else{let b;this.access||(this.access=new e.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis)),this.hasUserScopes()?b=this.scopes:a||(b=this.defaultScopes);let c=this.useJWTAccessWithScope||this.universeDomain!==g.DEFAULT_UNIVERSE,d=await this.access.getRequestHeaders(a??void 0,this.additionalClaims,c?b:void 0);return{headers:this.addSharedMetadataHeaders(d)}}return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(a):{headers:new Headers}}async fetchIdToken(a){let b=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:a},transporter:this.transporter});if(await b.getToken({forceRefresh:!0}),!b.idToken)throw Error("Unknown error: Failed to fetch ID token");return b.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!this.scopes&&!!(this.scopes.length>0)||!!this.defaultScopes&&!!(this.defaultScopes.length>0)}authorize(a){if(!a)return this.authorizeAsync();this.authorizeAsync().then(b=>a(null,b),a)}async authorizeAsync(){let a=await this.refreshToken();if(!a)throw Error("No result returned");return this.credentials=a.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,a.tokens}async refreshTokenNoCache(){let a=this.createGToken(),b={access_token:(await a.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:a.expiresAt,id_token:a.idToken};return this.emit("tokens",b),{res:null,tokens:b}}createGToken(){return this.gtoken||(this.gtoken=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{if(!a)throw Error("Must pass in a stream containing the service account auth settings.");let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}fromAPIKey(a){if("string"!=typeof a)throw Error("Must provide an API Key string.");this.apiKey=a}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let a=this.createGToken(),b=await a.getCredentials(this.keyFile);return{private_key:b.privateKey,client_email:b.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}b.JWT=h},47790:(a,b,c)=>{var d=c(74604),e=a.exports;!function(){"use strict";var a,b,c,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function h(a){return f.lastIndex=0,f.test(a)?'"'+a.replace(f,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}"function"!=typeof e.stringify&&(e.stringify=function(e,f,g){var i;if(a="",b="","number"==typeof g)for(i=0;i<g;i+=1)b+=" ";else"string"==typeof g&&(b=g);if(c=f,f&&"function"!=typeof f&&("object"!=typeof f||"number"!=typeof f.length))throw Error("JSON.stringify");return function e(f,g){var i,j,k,l,m,n=a,o=g[f],p=null!=o&&(o instanceof d||d.isBigNumber(o));switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(f)),"function"==typeof c&&(o=c.call(g,f,o)),typeof o){case"string":if(p)return o;return h(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":case"bigint":return String(o);case"object":if(!o)return"null";if(a+=b,m=[],"[object Array]"===Object.prototype.toString.apply(o)){for(i=0,l=o.length;i<l;i+=1)m[i]=e(i,o)||"null";return k=0===m.length?"[]":a?"[\n"+a+m.join(",\n"+a)+"\n"+n+"]":"["+m.join(",")+"]",a=n,k}if(c&&"object"==typeof c)for(i=0,l=c.length;i<l;i+=1)"string"==typeof c[i]&&(k=e(j=c[i],o))&&m.push(h(j)+(a?": ":":")+k);else Object.keys(o).forEach(function(b){var c=e(b,o);c&&m.push(h(b)+(a?": ":":")+c)});return k=0===m.length?"{}":a?"{\n"+a+m.join(",\n"+a)+"\n"+n+"}":"{"+m.join(",")+"}",a=n,k}}("",{"":e})})}()},47872:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdTokenClient=void 0;let d=c(46245);class e extends d.OAuth2Client{targetAudience;idTokenProvider;constructor(a){super(a),this.targetAudience=a.targetAudience,this.idTokenProvider=a.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let a=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:a,expiry_date:this.getIdTokenExpiryDate(a)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(a){let b=a.split(".")[1];if(b)return 1e3*JSON.parse(Buffer.from(b,"base64").toString("ascii")).exp}}b.IdTokenClient=e},48199:()=>{},48492:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(76139).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/admin/project/smartbill/components/MainApp.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/admin/project/smartbill/components/MainApp.tsx","default")},49913:(a,b,c)=>{var d=c(94165),e=c(88085);b.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],b.sign=d.sign,b.verify=e.verify,b.decode=e.decode,b.isValid=e.isValid,b.createSign=function(a){return new d(a)},b.createVerify=function(a){return new e(a)}},50828:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(73675),e=c(48492);function f(){return(0,d.jsx)(e.default,{})}},51424:(a,b,c)=>{"use strict";b.kF=void 0;let d=c(45170);Object.defineProperty(b,"kF",{enumerable:!0,get:function(){return d.GoogleAuth}}),c(71779),c(32842),c(37254),c(46377),c(68075),c(30996),c(47872),c(69890),c(47541),c(75996),c(46245),c(31240),c(12471),c(56573),c(12997),c(24272),c(86357),c(86),c(60120),c(81733),c(73654),c(71149),new d.GoogleAuth},51460:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,14375,23)),Promise.resolve().then(c.t.bind(c,9158,23)),Promise.resolve().then(c.t.bind(c,56752,23)),Promise.resolve().then(c.t.bind(c,11991,23)),Promise.resolve().then(c.t.bind(c,575,23)),Promise.resolve().then(c.t.bind(c,56791,23)),Promise.resolve().then(c.t.bind(c,98449,23)),Promise.resolve().then(c.t.bind(c,67902,23)),Promise.resolve().then(c.t.bind(c,94199,23))},51706:a=>{"use strict";function b(a){return(a/8|0)+ +(a%8!=0)}var c={ES256:b(256),ES384:b(384),ES512:b(521)};a.exports=function(a){var b=c[a];if(b)return b;throw Error('Unknown algorithm "'+a+'"')}},53596:(a,b,c)=>{var d=null;let e=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,f=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;a.exports=function(a){"use strict";var b={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=a){if(!0===a.strict&&(b.strict=!0),!0===a.storeAsString&&(b.storeAsString=!0),b.alwaysParseAsBig=!0===a.alwaysParseAsBig&&a.alwaysParseAsBig,b.useNativeBigInt=!0===a.useNativeBigInt&&a.useNativeBigInt,void 0!==a.constructorAction)if("error"===a.constructorAction||"ignore"===a.constructorAction||"preserve"===a.constructorAction)b.constructorAction=a.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${a.constructorAction}`);if(void 0!==a.protoAction)if("error"===a.protoAction||"ignore"===a.protoAction||"preserve"===a.protoAction)b.protoAction=a.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${a.protoAction}`)}var g,h,i,j,k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},l=function(a){throw{name:"SyntaxError",message:a,at:g,text:i}},m=function(a){return a&&a!==h&&l("Expected '"+a+"' instead of '"+h+"'"),h=i.charAt(g),g+=1,h},n=function(){var a,e="";for("-"===h&&(e="-",m("-"));h>="0"&&h<="9";)e+=h,m();if("."===h)for(e+=".";m()&&h>="0"&&h<="9";)e+=h;if("e"===h||"E"===h)for(e+=h,m(),("-"===h||"+"===h)&&(e+=h,m());h>="0"&&h<="9";)e+=h,m();if(isFinite(a=+e))return(null==d&&(d=c(74604)),e.length>15)?b.storeAsString?e:b.useNativeBigInt?BigInt(e):new d(e):b.alwaysParseAsBig?b.useNativeBigInt?BigInt(a):new d(a):a;l("Bad number")},o=function(){var a,b,c,d="";if('"'===h)for(var e=g;m();){if('"'===h)return g-1>e&&(d+=i.substring(e,g-1)),m(),d;if("\\"===h){if(g-1>e&&(d+=i.substring(e,g-1)),m(),"u"===h){for(b=0,c=0;b<4&&isFinite(a=parseInt(m(),16));b+=1)c=16*c+a;d+=String.fromCharCode(c)}else if("string"==typeof k[h])d+=k[h];else break;e=g}}l("Bad string")},p=function(){for(;h&&h<=" ";)m()},q=function(){switch(h){case"t":return m("t"),m("r"),m("u"),m("e"),!0;case"f":return m("f"),m("a"),m("l"),m("s"),m("e"),!1;case"n":return m("n"),m("u"),m("l"),m("l"),null}l("Unexpected '"+h+"'")},r=function(){var a=[];if("["===h){if(m("["),p(),"]"===h)return m("]"),a;for(;h;){if(a.push(j()),p(),"]"===h)return m("]"),a;m(","),p()}}l("Bad array")},s=function(){var a,c=Object.create(null);if("{"===h){if(m("{"),p(),"}"===h)return m("}"),c;for(;h;){if(a=o(),p(),m(":"),!0===b.strict&&Object.hasOwnProperty.call(c,a)&&l('Duplicate key "'+a+'"'),!0===e.test(a)?"error"===b.protoAction?l("Object contains forbidden prototype property"):"ignore"===b.protoAction?j():c[a]=j():!0===f.test(a)?"error"===b.constructorAction?l("Object contains forbidden constructor property"):"ignore"===b.constructorAction?j():c[a]=j():c[a]=j(),p(),"}"===h)return m("}"),c;m(","),p()}}l("Bad object")};return j=function(){switch(p(),h){case"{":return s();case"[":return r();case'"':return o();case"-":return n();default:return h>="0"&&h<="9"?n():q()}},function(a,b){var c;return i=a+"",g=0,h=" ",c=j(),p(),h&&l("Syntax error"),"function"==typeof b?function a(c,d){var e,f=c[d];return f&&"object"==typeof f&&Object.keys(f).forEach(function(b){void 0!==(e=a(f,b))?f[b]=e:delete f[b]}),b.call(c,d,f)}({"":c},""):c}}},53914:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NodeCrypto=void 0;let d=c(55511);class e{async sha256DigestBase64(a){return d.createHash("sha256").update(a).digest("base64")}randomBytesBase64(a){return d.randomBytes(a).toString("base64")}async verify(a,b,c){let e=d.createVerify("RSA-SHA256");return e.update(b),e.end(),e.verify(a,c,"base64")}async sign(a,b){let c=d.createSign("RSA-SHA256");return c.update(b),c.end(),c.sign(a,"base64")}decodeBase64StringUtf8(a){return Buffer.from(a,"base64").toString("utf-8")}encodeBase64StringUtf8(a){return Buffer.from(a,"utf-8").toString("base64")}async sha256DigestHex(a){return d.createHash("sha256").update(a).digest("hex")}async signWithHmacSha256(a,b){var c,e;let f="string"==typeof a?a:(c=a,Buffer.from(c));return(e=d.createHmac("sha256",f).update(b).digest()).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}b.NodeCrypto=e},54226:a=>{"use strict";a.exports=JSON.parse('{"name":"gaxios","version":"7.1.3","description":"A simple common HTTP client specifically for Google APIs and services.","main":"build/cjs/src/index.js","types":"build/cjs/src/index.d.ts","files":["build/"],"exports":{".":{"import":{"types":"./build/esm/src/index.d.ts","default":"./build/esm/src/index.js"},"require":{"types":"./build/cjs/src/index.d.ts","default":"./build/cjs/src/index.js"}}},"scripts":{"lint":"gts check --no-inline-config","test":"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000","compile":"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs","fix":"gts fix","prepare":"npm run compile","pretest":"npm run compile","webpack":"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js","docs":"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","prelint":"cd samples; npm link ../; npm install","clean":"gts clean"},"repository":{"type":"git","directory":"packages/gaxios","url":"https://github.com/googleapis/google-cloud-node-core.git"},"keywords":["google"],"engines":{"node":">=18"},"author":"Google, LLC","license":"Apache-2.0","devDependencies":{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","assert":"^2.0.0","browserify":"^17.0.0","c8":"^10.0.0","cors":"^2.8.5","express":"^5.0.0","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","linkinator":"^6.1.2","mocha":"^11.1.0","multiparty":"^4.2.1","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","stream-browserify":"^3.0.0","tmp":"0.2.5","ts-loader":"^9.5.2","typescript":"^5.8.3","webpack":"^5.35.0","webpack-cli":"^6.0.1"},"dependencies":{"extend":"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2","rimraf":"^5.0.1"},"homepage":"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}')},55299:(a,b,c)=>{Promise.resolve().then(c.bind(c,48492))},55324:(a,b,c)=>{"use strict";let{tokenChars:d}=c(15959);a.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},56573:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsClient=void 0;let d=c(12997),e=c(86),f=c(73153),g=c(74072),h=c(32842);class i extends e.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static #s="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(a){super(a);let b=(0,g.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("aws_security_credentials_supplier");if(!c&&!d)throw Error("A credential source or AWS security credentials supplier must be specified.");if(c&&d)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(d)this.awsSecurityCredentialsSupplier=d,this.regionalCredVerificationUrl=i.#s,this.credentialSourceType="programmatic";else{let a=(0,g.originalOrCamelOptions)(c);this.environmentId=a.get("environment_id");let b=a.get("region_url"),d=a.get("url"),e=a.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new f.DefaultAwsSecurityCredentialsSupplier({regionUrl:b,securityCredentialsUrl:d,imdsV2SessionTokenUrl:e}),this.regionalCredVerificationUrl=a.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let a=this.environmentId?.match(/^(aws)(\d+)$/);if(a&&this.regionalCredVerificationUrl){if(1!==parseInt(a[2],10))throw Error(`aws version "${a[2]}" is not supported in the current build.`)}else throw Error('No valid AWS "credential_source" provided')}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new d.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let a=await this.awsRequestSigner.getRequestOptions({...i.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),b=[];return h.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},a.headers).forEach((a,c)=>b.push({key:c,value:a})),encodeURIComponent(JSON.stringify({url:a.url,method:a.method,headers:b}))}}b.AwsClient=i},56963:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StsCredentials=void 0;let d=c(32842),e=c(37254),f=c(99243),g=c(74072);class h extends f.OAuthClientAuthHandler{#t;constructor(a={tokenExchangeEndpoint:""},b){("object"!=typeof a||a instanceof URL)&&(a={tokenExchangeEndpoint:a,clientAuthentication:b}),super(a),this.#t=a.tokenExchangeEndpoint}async exchangeToken(a,b,c){let i={grant_type:a.grantType,resource:a.resource,audience:a.audience,scope:a.scope?.join(" "),requested_token_type:a.requestedTokenType,subject_token:a.subjectToken,subject_token_type:a.subjectTokenType,actor_token:a.actingParty?.actorToken,actor_token_type:a.actingParty?.actorTokenType,options:c&&JSON.stringify(c)},j={...h.RETRY_CONFIG,url:this.#t.toString(),method:"POST",headers:b,data:new URLSearchParams((0,g.removeUndefinedValuesInObject)(i))};e.AuthClient.setMethodName(j,"exchangeToken"),this.applyClientAuthenticationOptions(j);try{let a=await this.transporter.request(j),b=a.data;return b.res=a,b}catch(a){if(a instanceof d.GaxiosError&&a.response)throw(0,f.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}b.StsCredentials=h},57075:a=>{"use strict";a.exports=require("node:stream")},57967:(a,b,c)=>{var d,e=c(21712).Buffer,f=c(55511),g=c(2189),h=c(28354),i="secret must be a string or buffer",j="key must be a string or a buffer",k="function"==typeof f.createPublicKey;function l(a){if(!e.isBuffer(a)&&"string"!=typeof a&&(!k||"object"!=typeof a||"string"!=typeof a.type||"string"!=typeof a.asymmetricKeyType||"function"!=typeof a.export))throw p(j)}function m(a){if(!e.isBuffer(a)&&"string"!=typeof a&&"object"!=typeof a)throw p("key must be a string, a buffer or an object")}function n(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(a){var b=4-(a=a.toString()).length%4;if(4!==b)for(var c=0;c<b;++c)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function p(a){var b=[].slice.call(arguments,1);return TypeError(h.format.bind(h,a).apply(null,b))}function q(a){var b;return b=a,e.isBuffer(b)||"string"==typeof b||(a=JSON.stringify(a)),a}function r(a){return function(b,c){!function(a){if(!e.isBuffer(a)){if("string"!=typeof a){if(!k||"object"!=typeof a||"secret"!==a.type||"function"!=typeof a.export)throw p(i)}}}(c),b=q(b);var d=f.createHmac("sha"+a,c);return n((d.update(b),d.digest("base64")))}}k&&(j+=" or a KeyObject",i+="or a KeyObject");var s="timingSafeEqual"in f?function(a,b){return a.byteLength===b.byteLength&&f.timingSafeEqual(a,b)}:function(a,b){return d||(d=c(76334)),d(a,b)};function t(a){return function(b,c,d){var f=r(a)(b,d);return s(e.from(c),e.from(f))}}function u(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign(c,"base64")))}}function v(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify(d,c,"base64")}}function w(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign({key:c,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function x(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify({key:d,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},c,"base64")}}function y(a){var b=u(a);return function(){var c=b.apply(null,arguments);return g.derToJose(c,"ES"+a)}}function z(a){var b=v(a);return function(c,d,e){return b(c,d=g.joseToDer(d,"ES"+a).toString("base64"),e)}}function A(){return function(){return""}}function B(){return function(a,b){return""===b}}a.exports=function(a){var b=a.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!b)throw p('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',a);var c=(b[1]||b[3]).toLowerCase(),d=b[2];return{sign:({hs:r,rs:u,ps:w,es:y,none:A})[c](d),verify:({hs:t,rs:v,ps:x,es:z,none:B})[c](d)}}},57975:a=>{"use strict";a.exports=require("node:util")},58436:(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=c(63685),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),a.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},59486:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{StaticGenBailoutError:function(){return d},isStaticGenBailoutError:function(){return e}});let c="NEXT_STATIC_GEN_BAILOUT";class d extends Error{constructor(...a){super(...a),this.code=c}}function e(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===c}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},60120:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DownscopedClient=b.EXPIRATION_TIME_OFFSET=b.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;let d=c(32842),e=c(27910),f=c(37254),g=c(56963);b.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,b.EXPIRATION_TIME_OFFSET=3e5;class h extends f.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(a,c={accessBoundary:{accessBoundaryRules:[]}}){if(super(a instanceof f.AuthClient?{}:a),a instanceof f.AuthClient?(this.authClient=a,this.credentialAccessBoundary=c):(this.authClient=a.authClient,this.credentialAccessBoundary=a.credentialAccessBoundary),0===this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length)throw Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>b.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${b.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(0===a.availablePermissions.length)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(a){if(!a.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(a),this.cachedDownscopedAccessToken=a}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=(await this.authClient.getAccessToken()).token,b=await this.stsCredential.exchangeToken({grantType:"urn:ietf:params:oauth:grant-type:token-exchange",requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:"urn:ietf:params:oauth:token-type:access_token"},void 0,this.credentialAccessBoundary),c=this.authClient.credentials?.expiry_date||null,d=b.expires_in?new Date().getTime()+1e3*b.expires_in:c;return this.cachedDownscopedAccessToken={access_token:b.access_token,expiry_date:d,res:b.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.DownscopedClient=h},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63685:a=>{"use strict";let b=["nodebuffer","arraybuffer","fragments"],c="undefined"!=typeof Blob;c&&b.push("blob"),a.exports={BINARY_TYPES:b,CLOSE_TIMEOUT:3e4,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:c,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},67977:(a,b,c)=>{"use strict";let d,{Duplex:e}=c(27910),{randomFillSync:f}=c(55511),g=c(87894),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=c(63685),{isBlob:k,isValidStatusCode:l}=c(15959),{mask:m,toBuffer:n}=c(39561),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{if(this._socket.destroyed)return void s(this,Error("The socket was closed while data was being compressed"),d);this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}a.exports=r},68075:(a,b,c)=>{"use strict";var d;let e;Object.defineProperty(b,"__esModule",{value:!0}),b.GCPEnv=void 0,b.clear=function(){e=void 0},b.getEnv=g;let f=c(71779);async function g(){return e||(e=h())}async function h(){d.NONE;return process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME?d.APP_ENGINE:process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET?d.CLOUD_FUNCTIONS:await j()?await i()?d.KUBERNETES_ENGINE:process.env.K_CONFIGURATION?d.CLOUD_RUN:process.env.CLOUD_RUN_JOB?d.CLOUD_RUN_JOBS:d.COMPUTE_ENGINE:d.NONE}async function i(){try{return await f.instance("attributes/cluster-name"),!0}catch(a){return!1}}async function j(){return f.isAvailable()}!function(a){a.APP_ENGINE="APP_ENGINE",a.KUBERNETES_ENGINE="KUBERNETES_ENGINE",a.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",a.COMPUTE_ENGINE="COMPUTE_ENGINE",a.CLOUD_RUN="CLOUD_RUN",a.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",a.NONE="NONE"}(d||(b.GCPEnv=d={}))},68232:(a,b)=>{"use strict";async function c(a){var b;let c=e(a);if(!a||!a.config||!c&&!a.config.retry)return{shouldRetry:!1};(c=c||{}).currentRetryAttempt=c.currentRetryAttempt||0,c.retry=void 0===c.retry||null===c.retry?3:c.retry,c.httpMethodsToRetry=c.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],c.noResponseRetries=void 0===c.noResponseRetries||null===c.noResponseRetries?2:c.noResponseRetries,c.retryDelayMultiplier=c.retryDelayMultiplier?c.retryDelayMultiplier:2,c.timeOfFirstRequest=c.timeOfFirstRequest?c.timeOfFirstRequest:Date.now(),c.totalTimeout=c.totalTimeout?c.totalTimeout:Number.MAX_SAFE_INTEGER,c.maxRetryDelay=c.maxRetryDelay?c.maxRetryDelay:Number.MAX_SAFE_INTEGER,c.statusCodesToRetry=c.statusCodesToRetry||[[100,199],[408,408],[429,429],[500,599]],a.config.retryConfig=c;let f=c.shouldRetry||d;if(!await f(a))return{shouldRetry:!1,config:a.config};let g=Math.min(((b=c).currentRetryAttempt?0:b.retryDelay??100)+(Math.pow(b.retryDelayMultiplier,b.currentRetryAttempt)-1)/2*1e3,b.totalTimeout-(Date.now()-b.timeOfFirstRequest),b.maxRetryDelay);a.config.retryConfig.currentRetryAttempt+=1;let h=c.retryBackoff?c.retryBackoff(a,g):new Promise(a=>{setTimeout(a,g)});return c.onRetryAttempt&&await c.onRetryAttempt(a),await h,{shouldRetry:!0,config:a.config}}function d(a){let b=e(a);if(a.config.signal?.aborted&&"TimeoutError"!==a.code||"AbortError"===a.code||!b||0===b.retry||!a.response&&(b.currentRetryAttempt||0)>=b.noResponseRetries||!b.httpMethodsToRetry||!b.httpMethodsToRetry.includes(a.config.method?.toUpperCase()||"GET"))return!1;if(a.response&&a.response.status){let c=!1;for(let[d,e]of b.statusCodesToRetry){let b=a.response.status;if(b>=d&&b<=e){c=!0;break}}if(!c)return!1}return b.currentRetryAttempt=b.currentRetryAttempt||0,!(b.currentRetryAttempt>=b.retry)}function e(a){if(a&&a.config&&a.config.retryConfig)return a.config.retryConfig}Object.defineProperty(b,"__esModule",{value:!0}),b.getRetryConfig=c},69371:(a,b,c)=>{Promise.resolve().then(c.bind(c,78440))},69398:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,88379,23))},69890:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWTAccess=void 0;let d=c(49913),e=c(74072),f={alg:"RS256",typ:"JWT"};class g{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new e.LRUCache({capacity:500,maxAge:36e5});constructor(a,b,c,d){this.email=a,this.key=b,this.keyId=c,this.eagerRefreshThresholdMillis=d??3e5}getCachedKey(a,b){let c=a;if(b&&Array.isArray(b)&&b.length?c=a?`${a}_${b.join("_")}`:`${b.join("_")}`:"string"==typeof b&&(c=a?`${a}_${b}`:b),!c)throw Error("Scopes or url must be provided");return c}getRequestHeaders(a,b,c){let e,h=this.getCachedKey(a,c),i=this.cache.get(h),j=Date.now();if(i&&i.expiration-j>this.eagerRefreshThresholdMillis)return new Headers(i.headers);let k=Math.floor(Date.now()/1e3),l=g.getExpirationTime(k);if(Array.isArray(c)&&(c=c.join(" ")),e=c?{iss:this.email,sub:this.email,scope:c,exp:l,iat:k}:{iss:this.email,sub:this.email,aud:a,exp:l,iat:k},b){for(let a in e)if(b[a])throw Error(`The '${a}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let m=this.keyId?{...f,kid:this.keyId}:f,n=Object.assign(e,b),o=d.sign({header:m,payload:n,secret:this.key}),p=new Headers({authorization:`Bearer ${o}`});return this.cache.set(h,{expiration:1e3*l,headers:p}),p}static getExpirationTime(a){return a+3600}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{a||c(Error("Must pass in a stream containing the service account auth settings."));let d="";a.setEncoding("utf8").on("data",a=>d+=a).on("error",c).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}}b.JWTAccess=g},70043:(a,b,c)=>{"use strict";a.exports=c(12973).vendored["react-rsc"].React},70532:function(a,b,c){"use strict";let d;var e,f,g,h=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),i=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),j=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&h(b,a,c[d]);return i(b,a),b});Object.defineProperty(b,"__esModule",{value:!0}),b.env=b.DebugLogBackendBase=b.placeholder=b.AdhocDebugLogger=b.LogSeverity=void 0,b.getNodeBackend=r,b.getDebugBackend=function(a){return new s(a)},b.getStructuredBackend=function(a){return new t(a)},b.setBackend=function(a){d=a,u.clear()},b.log=v;let k=c(94735),l=j(c(19771)),m=j(c(28354)),n=c(36968);(f=g||(b.LogSeverity=g={})).DEFAULT="DEFAULT",f.DEBUG="DEBUG",f.INFO="INFO",f.WARNING="WARNING",f.ERROR="ERROR";class o extends k.EventEmitter{constructor(a,b){super(),this.namespace=a,this.upstream=b,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(a,b)=>this.on(a,b)}),this.func.debug=(...a)=>this.invokeSeverity(g.DEBUG,...a),this.func.info=(...a)=>this.invokeSeverity(g.INFO,...a),this.func.warn=(...a)=>this.invokeSeverity(g.WARNING,...a),this.func.error=(...a)=>this.invokeSeverity(g.ERROR,...a),this.func.sublog=a=>v(a,this.func)}invoke(a,...b){if(this.upstream)try{this.upstream(a,...b)}catch(a){}try{this.emit("log",a,b)}catch(a){}}invokeSeverity(a,...b){this.invoke({severity:a},...b)}}b.AdhocDebugLogger=o,b.placeholder=new o("",()=>{}).func;class p{constructor(){var a;this.cached=new Map,this.filters=[],this.filtersSet=!1;let c=null!=(a=l.env[b.env.nodeEnables])?a:"*";"all"===c&&(c="*"),this.filters=c.split(",")}log(a,b,...c){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let d=this.cached.get(a);d||(d=this.makeLogger(a),this.cached.set(a,d)),d(b,...c)}catch(a){console.error(a)}}}b.DebugLogBackendBase=p;class q extends p{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(a){return this.enabledRegexp.test(a)}makeLogger(a){return this.enabledRegexp.test(a)?(b,...c)=>{var d;let e,f=`${n.Colours.green}${a}${n.Colours.reset}`,h=`${n.Colours.yellow}${l.pid}${n.Colours.reset}`;switch(b.severity){case g.ERROR:e=`${n.Colours.red}${b.severity}${n.Colours.reset}`;break;case g.INFO:e=`${n.Colours.magenta}${b.severity}${n.Colours.reset}`;break;case g.WARNING:e=`${n.Colours.yellow}${b.severity}${n.Colours.reset}`;break;default:e=null!=(d=b.severity)?d:g.DEFAULT}let i=m.formatWithOptions({colors:n.Colours.enabled},...c),j=Object.assign({},b);delete j.severity;let k=Object.getOwnPropertyNames(j).length?JSON.stringify(j):"",o=k?`${n.Colours.grey}${k}${n.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",h,f,e,i,k?` ${o}`:"")}:()=>{}}setFilters(){let a=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=RegExp(`^${a}$`,"i")}}function r(){return new q}class s extends p{constructor(a){super(),this.debugPkg=a}makeLogger(a){let b=this.debugPkg(a);return(a,...c)=>{b(c[0],...c.slice(1))}}setFilters(){var a;let b=null!=(a=l.env.NODE_DEBUG)?a:"";l.env.NODE_DEBUG=`${b}${b?",":""}${this.filters.join(",")}`}}class t extends p{constructor(a){super(),this.upstream=null!=a?a:void 0}makeLogger(a){var b;let c=null==(b=this.upstream)?void 0:b.makeLogger(a);return(a,...b)=>{var d;let e=JSON.stringify(Object.assign({severity:null!=(d=a.severity)?d:g.INFO,message:m.format(...b)},a));c?c(a,e):console.log("%s",e)}}setFilters(){var a;null==(a=this.upstream)||a.setFilters()}}b.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};let u=new Map;function v(a,c){let e;if(!d&&!l.env[b.env.nodeEnables]||!a)return b.placeholder;c&&(a=`${c.instance.namespace}:${a}`);let f=u.get(a);if(f)return f.func;if(null===d)return b.placeholder;void 0===d&&(d=r());let g=new o(a,(b,...c)=>{if(e!==d){if(null===d)return;void 0===d&&(d=r()),e=d}null==d||d.log(a,b,...c)});return u.set(a,g),g.func}},71149:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PassThroughClient=void 0;let d=c(37254);class e extends d.AuthClient{async request(a){return this.transporter.request(a)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}b.PassThroughClient=e},71779:function(a,b,c){"use strict";let d;var e,f=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),g=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),h=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&f(b,a,c[d]);return g(b,a),b}),i=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||f(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.gcpResidencyCache=b.METADATA_SERVER_DETECTION=b.HEADERS=b.HEADER_VALUE=b.HEADER_NAME=b.SECONDARY_HOST_ADDRESS=b.HOST_ADDRESS=b.BASE_PATH=void 0,b.instance=function(a){return p("instance",a)},b.project=function(a){return p("project",a)},b.universe=function(a){return p("universe",a)},b.bulk=r,b.isAvailable=s,b.resetIsAvailableCache=function(){d=void 0},b.getGCPResidency=t,b.setGCPResidency=u,b.requestTimeout=v;let j=c(32842),k=c(72145),l=c(10510),m=h(c(18351));b.BASE_PATH="/computeMetadata/v1",b.HOST_ADDRESS="http://169.254.169.254",b.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",b.HEADER_NAME="Metadata-Flavor",b.HEADER_VALUE="Google",b.HEADERS=Object.freeze({[b.HEADER_NAME]:b.HEADER_VALUE});let n=m.log("gcp-metadata");function o(a){return a||(a=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||b.HOST_ADDRESS),/^https?:\/\//.test(a)||(a=`http://${a}`),new URL(b.BASE_PATH,a).href}async function p(a,c={},d=3,e=!1){let f=new Headers(b.HEADERS),g="",h={};("object"==typeof a?(new Headers(a.headers).forEach((a,b)=>f.set(b,a)),g=a.metadataKey,h=a.params||h,d=a.noResponseRetries||d,e=a.fastFail||e):g=a,"string"==typeof c)?g+=`/${c}`:(Object.keys(c).forEach(a=>{switch(a){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${a}' is not a valid configuration option.`)}}),c.property&&(g+=`/${c.property}`),new Headers(c.headers).forEach((a,b)=>f.set(b,a)),h=c.params||h);let i=e?q:j.request,l={url:`${o()}/${g}`,headers:f,retryConfig:{noResponseRetries:d},params:h,responseType:"text",timeout:v()};n.info("instance request %j",l);let m=await i(l);n.info("instance metadata is %s",m.data);let r=m.headers.get(b.HEADER_NAME);if(r!==b.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${b.HEADER_NAME} header. Expected '${b.HEADER_VALUE}', got ${r?`'${r}'`:"no header"}`);if("string"==typeof m.data)try{return k.parse(m.data)}catch{}return m.data}async function q(a){let c={...a,url:a.url?.toString().replace(o(),o(b.SECONDARY_HOST_ADDRESS))};return Promise.any([(0,j.request)(a),(0,j.request)(c)])}async function r(a){let b={};return await Promise.all(a.map(a=>(async()=>{let c=await p(a);b[a.metadataKey]=c})())),b}async function s(){if(process.env.METADATA_SERVER_DETECTION){let a=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(a in b.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${a}\`, but it should be \`${Object.keys(b.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(a){case"assume-present":return!0;case"none":return!1;case"bios-only":return t()}}try{return void 0===d&&(d=p("instance",void 0,process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0,!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await d,!0}catch(a){if(process.env.DEBUG_AUTH&&console.info(a),"request-timeout"===a.type||a.response&&404===a.response.status)return!1;if(!(a.response&&404===a.response.status)&&(!a.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(a.code.toString()))){let b="UNKNOWN";a.code&&(b=a.code.toString()),process.emitWarning(`received unexpected error = ${a.message} code = ${b}`,"MetadataLookupWarning")}return!1}}function t(){return null===b.gcpResidencyCache&&u(),b.gcpResidencyCache}function u(a=null){b.gcpResidencyCache=null!==a?a:(0,l.detectGCPResidency)()}function v(){return 3e3*!t()}b.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"}),b.gcpResidencyCache=null,i(c(10510),b)},72145:(a,b,c)=>{var d=c(47790).stringify,e=c(53596);a.exports=function(a){return{parse:e(a),stringify:d}},a.exports.parse=e(),a.exports.stringify=d},73024:a=>{"use strict";a.exports=require("node:fs")},73136:a=>{"use strict";a.exports=require("node:url")},73153:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DefaultAwsSecurityCredentialsSupplier=void 0;let d=c(37254);class e{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(a){this.regionUrl=a.regionUrl,this.securityCredentialsUrl=a.securityCredentialsUrl,this.imdsV2SessionTokenUrl=a.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getAwsRegion(a){if(this.#u)return this.#u;let b=new Headers;if(!this.#u&&this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#v(a.transporter)),!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let c={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:b};d.AuthClient.setMethodName(c,"getAwsRegion");let e=await a.transporter.request(c);return e.data.substr(0,e.data.length-1)}async getAwsSecurityCredentials(a){if(this.#w)return this.#w;let b=new Headers;this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#v(a.transporter));let c=await this.#x(b,a.transporter),d=await this.#y(c,b,a.transporter);return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,token:d.Token}}async #v(a){let b={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return d.AuthClient.setMethodName(b,"#getImdsV2SessionToken"),(await a.request(b)).data}async #x(a,b){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let c={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:a};return d.AuthClient.setMethodName(c,"#getAwsRoleName"),(await b.request(c)).data}async #y(a,b,c){let e={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${a}`,headers:b};return d.AuthClient.setMethodName(e,"#retrieveAwsSecurityCredentials"),(await c.request(e)).data}get #u(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get #w(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}b.DefaultAwsSecurityCredentialsSupplier=e},73566:a=>{"use strict";a.exports=require("worker_threads")},73654:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountAuthorizedUserClient=b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;let d=c(37254),e=c(99243),f=c(32842),g=c(27910),h=c(86);b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class i extends e.OAuthClientAuthHandler{#z;constructor(a){super(a),this.#z=a.tokenRefreshEndpoint}async refreshToken(a,b){let c={...i.RETRY_CONFIG,url:this.#z,method:"POST",headers:b,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:a})};d.AuthClient.setMethodName(c,"refreshToken"),this.applyClientAuthenticationOptions(c);try{let a=await this.transporter.request(c),b=a.data;return b.res=a,b}catch(a){if(a instanceof f.GaxiosError&&a.response)throw(0,e.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}class j extends d.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(a){super(a),a.universe_domain&&(this.universeDomain=a.universe_domain),this.refreshToken=a.refresh_token;let b={confidentialClientType:"basic",clientId:a.client_id,clientSecret:a.client_secret};this.externalAccountAuthorizedUserHandler=new i({tokenRefreshEndpoint:a.token_url??"https://sts.{universeDomain}/v1/oauthtoken".replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:b}),this.cachedAccessToken=null,this.quotaProjectId=a.quota_project_id,"number"!=typeof a?.eagerRefreshThresholdMillis?this.eagerRefreshThresholdMillis=h.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!a?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=f.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=c.config.data instanceof g.Readable;if(!b&&(401===d||403===d)&&!e&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:a.access_token,expiry_date:new Date().getTime()+1e3*a.expires_in,res:a.res},void 0!==a.refresh_token&&(this.refreshToken=a.refresh_token),this.cachedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.ExternalAccountAuthorizedUserClient=j},74072:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LRUCache=void 0,b.snakeToCamel=h,b.originalOrCamelOptions=function(a){return{get:function(b){let c=a||{};return c[b]??c[h(b)]}}},b.removeUndefinedValuesInObject=function(a){return Object.entries(a).forEach(([b,c])=>{(void 0===c||"undefined"===c)&&delete a[b]}),a},b.isValidFile=j,b.getWellKnownCertificateConfigFileLocation=function(){let a=process.env.CLOUDSDK_CONFIG||(e.platform().startsWith("win")?f.join(process.env.APPDATA||"",g):f.join(process.env.HOME||"",".config",g));return f.join(a,"certificate_config.json")};let d=c(29021),e=c(21820),f=c(33873),g="gcloud";function h(a){return a.replace(/([_][^_])/g,a=>a.slice(1).toUpperCase())}class i{capacity;#A=new Map;maxAge;constructor(a){this.capacity=a.capacity,this.maxAge=a.maxAge}#B(a,b){this.#A.delete(a),this.#A.set(a,{value:b,lastAccessed:Date.now()})}set(a,b){this.#B(a,b),this.#C()}get(a){let b=this.#A.get(a);if(b)return this.#B(a,b.value),this.#C(),b.value}#C(){let a=this.maxAge?Date.now()-this.maxAge:0,b=this.#A.entries().next();for(;!b.done&&(this.#A.size>this.capacity||b.value[1].lastAccessed<a);)this.#A.delete(b.value[0]),b=this.#A.entries().next()}}async function j(a){try{return(await d.promises.lstat(a)).isFile()}catch(a){return!1}}b.LRUCache=i},74075:a=>{"use strict";a.exports=require("zlib")},74493:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{BailoutToCSRError:function(){return d},isBailoutToCSRError:function(){return e}});let c="BAILOUT_TO_CLIENT_SIDE_RENDERING";class d extends Error{constructor(a){super("Bail out to client-side rendering: "+a),this.reason=a,this.digest=c}}function e(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===c}},74604:function(a,b,c){var d;!function(e){"use strict";var f,g=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,h=Math.ceil,i=Math.floor,j="[BigNumber Error] ",k=j+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function m(a){var b=0|a;return a>0||a===b?b:b-1}function n(a){for(var b,c,d=1,e=a.length,f=a[0]+"";d<e;){for(c=14-(b=a[d++]+"").length;c--;b="0"+b);f+=b}for(e=f.length;48===f.charCodeAt(--e););return f.slice(0,e+1||1)}function o(a,b){var c,d,e=a.c,f=b.c,g=a.s,h=b.s,i=a.e,j=b.e;if(!g||!h)return null;if(c=e&&!e[0],d=f&&!f[0],c||d)return c?d?0:-h:g;if(g!=h)return g;if(c=g<0,d=i==j,!e||!f)return d?0:!e^c?1:-1;if(!d)return i>j^c?1:-1;for(g=0,h=(i=e.length)<(j=f.length)?i:j;g<h;g++)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1}function p(a,b,c,d){if(a<b||a>c||a!==i(a))throw Error(j+(d||"Argument")+("number"==typeof a?a<b||a>c?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function q(a){var b=a.c.length-1;return m(a.e/14)==b&&a.c[b]%2!=0}function r(a,b){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(b<0?"e":"e+")+b}function s(a,b,c){var d,e;if(b<0){for(e=c+".";++b;e+=c);a=e+a}else if(d=a.length,++b>d){for(e=c,b-=d;--b;e+=c);a+=e}else b<d&&(a=a.slice(0,b)+"."+a.slice(b));return a}(f=function a(b){var c,d,e,f,t,u,v,w,x,y=M.prototype={constructor:M,toString:null,valueOf:null},z=new M(1),A=20,B=4,C=-7,D=21,E=-1e7,F=1e7,G=!1,H=1,I=0,J={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",L=!0;function M(a,b){var c,d,e,f,h,j,l,m,n=this;if(!(n instanceof M))return new M(a,b);if(null==b){if(a&&!0===a._isBigNumber){n.s=a.s,!a.c||a.e>F?n.c=n.e=null:a.e<E?n.c=[n.e=0]:(n.e=a.e,n.c=a.c.slice());return}if((j="number"==typeof a)&&0*a==0){if(n.s=1/a<0?(a=-a,-1):1,a===~~a){for(f=0,h=a;h>=10;h/=10,f++);f>F?n.c=n.e=null:(n.e=f,n.c=[a]);return}m=String(a)}else{if(!g.test(m=String(a)))return x(n,m,j);n.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(f=m.indexOf("."))>-1&&(m=m.replace(".","")),(h=m.search(/e/i))>0?(f<0&&(f=h),f+=+m.slice(h+1),m=m.substring(0,h)):f<0&&(f=m.length)}else{if(p(b,2,K.length,"Base"),10==b&&L)return Q(n=new M(a),A+n.e+1,B);if(m=String(a),j="number"==typeof a){if(0*a!=0)return x(n,m,j,b);if(n.s=1/a<0?(m=m.slice(1),-1):1,M.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(k+a)}else n.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(c=K.slice(0,b),f=h=0,l=m.length;h<l;h++)if(0>c.indexOf(d=m.charAt(h))){if("."==d){if(h>f){f=l;continue}}else if(!e&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){e=!0,h=-1,f=0;continue}return x(n,String(a),j,b)}j=!1,(f=(m=w(m,b,10,n.s)).indexOf("."))>-1?m=m.replace(".",""):f=m.length}for(h=0;48===m.charCodeAt(h);h++);for(l=m.length;48===m.charCodeAt(--l););if(m=m.slice(h,++l)){if(l-=h,j&&M.DEBUG&&l>15&&(a>0x1fffffffffffff||a!==i(a)))throw Error(k+n.s*a);if((f=f-h-1)>F)n.c=n.e=null;else if(f<E)n.c=[n.e=0];else{if(n.e=f,n.c=[],h=(f+1)%14,f<0&&(h+=14),h<l){for(h&&n.c.push(+m.slice(0,h)),l-=14;h<l;)n.c.push(+m.slice(h,h+=14));h=14-(m=m.slice(h)).length}else h-=l;for(;h--;m+="0");n.c.push(+m)}}else n.c=[n.e=0]}function N(a,b,c,d){var e,f,g,h,i;if(null==c?c=B:p(c,0,8),!a.c)return a.toString();if(e=a.c[0],g=a.e,null==b)i=n(a.c),i=1==d||2==d&&(g<=C||g>=D)?r(i,g):s(i,g,"0");else if(f=(a=Q(new M(a),b,c)).e,h=(i=n(a.c)).length,1==d||2==d&&(b<=f||f<=C)){for(;h<b;i+="0",h++);i=r(i,f)}else if(b-=g+(2===d&&f>g),i=s(i,f,"0"),f+1>h){if(--b>0)for(i+=".";b--;i+="0");}else if((b+=f-h)>0)for(f+1==h&&(i+=".");b--;i+="0");return a.s<0&&e?"-"+i:i}function O(a,b){for(var c,d,e=1,f=new M(a[0]);e<a.length;e++)(d=new M(a[e])).s&&(c=o(f,d))!==b&&(0!==c||f.s!==b)||(f=d);return f}function P(a,b,c){for(var d=1,e=b.length;!b[--e];b.pop());for(e=b[0];e>=10;e/=10,d++);return(c=d+14*c-1)>F?a.c=a.e=null:c<E?a.c=[a.e=0]:(a.e=c,a.c=b),a}function Q(a,b,c,d){var e,f,g,j,k,m,n,o=a.c;if(o){a:{for(e=1,j=o[0];j>=10;j/=10,e++);if((f=b-e)<0)f+=14,g=b,n=i((k=o[m=0])/l[e-g-1]%10);else if((m=h((f+1)/14))>=o.length)if(d){for(;o.length<=m;o.push(0));k=n=0,e=1,f%=14,g=f-14+1}else break a;else{for(e=1,k=j=o[m];j>=10;j/=10,e++);f%=14,n=(g=f-14+e)<0?0:i(k/l[e-g-1]%10)}if(d=d||b<0||null!=o[m+1]||(g<0?k:k%l[e-g-1]),d=c<4?(n||d)&&(0==c||c==(a.s<0?3:2)):n>5||5==n&&(4==c||d||6==c&&(f>0?g>0?k/l[e-g]:0:o[m-1])%10&1||c==(a.s<0?8:7)),b<1||!o[0])return o.length=0,d?(b-=a.e+1,o[0]=l[(14-b%14)%14],a.e=-b||0):o[0]=a.e=0,a;if(0==f?(o.length=m,j=1,m--):(o.length=m+1,j=l[14-f],o[m]=g>0?i(k/l[e-g]%l[g])*j:0),d)for(;;)if(0==m){for(f=1,g=o[0];g>=10;g/=10,f++);for(g=o[0]+=j,j=1;g>=10;g/=10,j++);f!=j&&(a.e++,1e14==o[0]&&(o[0]=1));break}else{if(o[m]+=j,1e14!=o[m])break;o[m--]=0,j=1}for(f=o.length;0===o[--f];o.pop());}a.e>F?a.c=a.e=null:a.e<E&&(a.c=[a.e=0])}return a}function R(a){var b,c=a.e;return null===c?a.toString():(b=n(a.c),b=c<=C||c>=D?r(b,c):s(b,c,"0"),a.s<0?"-"+b:b)}return M.clone=a,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(a){var b,c;if(null!=a)if("object"==typeof a){if(a.hasOwnProperty(b="DECIMAL_PLACES")&&(p(c=a[b],0,1e9,b),A=c),a.hasOwnProperty(b="ROUNDING_MODE")&&(p(c=a[b],0,8,b),B=c),a.hasOwnProperty(b="EXPONENTIAL_AT")&&((c=a[b])&&c.pop?(p(c[0],-1e9,0,b),p(c[1],0,1e9,b),C=c[0],D=c[1]):(p(c,-1e9,1e9,b),C=-(D=c<0?-c:c))),a.hasOwnProperty(b="RANGE"))if((c=a[b])&&c.pop)p(c[0],-1e9,-1,b),p(c[1],1,1e9,b),E=c[0],F=c[1];else if(p(c,-1e9,1e9,b),c)E=-(F=c<0?-c:c);else throw Error(j+b+" cannot be zero: "+c);if(a.hasOwnProperty(b="CRYPTO"))if(!!(c=a[b])===c)if(c)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))G=c;else throw G=!c,Error(j+"crypto unavailable");else G=c;else throw Error(j+b+" not true or false: "+c);if(a.hasOwnProperty(b="MODULO_MODE")&&(p(c=a[b],0,9,b),H=c),a.hasOwnProperty(b="POW_PRECISION")&&(p(c=a[b],0,1e9,b),I=c),a.hasOwnProperty(b="FORMAT"))if("object"==typeof(c=a[b]))J=c;else throw Error(j+b+" not an object: "+c);if(a.hasOwnProperty(b="ALPHABET")){if("string"!=typeof(c=a[b])||/^.?$|[+\-.\s]|(.).*\1/.test(c))throw Error(j+b+" invalid: "+c);L="0123456789"==c.slice(0,10),K=c}}else throw Error(j+"Object expected: "+a);return{DECIMAL_PLACES:A,ROUNDING_MODE:B,EXPONENTIAL_AT:[C,D],RANGE:[E,F],CRYPTO:G,MODULO_MODE:H,POW_PRECISION:I,FORMAT:J,ALPHABET:K}},M.isBigNumber=function(a){if(!a||!0!==a._isBigNumber)return!1;if(!M.DEBUG)return!0;var b,c,d=a.c,e=a.e,f=a.s;a:if("[object Array]"==({}).toString.call(d)){if((1===f||-1===f)&&e>=-1e9&&e<=1e9&&e===i(e)){if(0===d[0]){if(0===e&&1===d.length)return!0;break a}if((b=(e+1)%14)<1&&(b+=14),String(d[0]).length==b){for(b=0;b<d.length;b++)if((c=d[b])<0||c>=1e14||c!==i(c))break a;if(0!==c)return!0}}}else if(null===d&&null===e&&(null===f||1===f||-1===f))return!0;throw Error(j+"Invalid BigNumber: "+a)},M.maximum=M.max=function(){return O(arguments,-1)},M.minimum=M.min=function(){return O(arguments,1)},c=0x20000000000000*Math.random()&2097151?function(){return i(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},M.random=function(a){var b,d,e,f,g,k=0,m=[],n=new M(z);if(null==a?a=A:p(a,0,1e9),f=h(a/14),G)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(f*=2));k<f;)(g=131072*b[k]+(b[k+1]>>>11))>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),b[k]=d[0],b[k+1]=d[1]):(m.push(g%1e14),k+=2);k=f/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(f*=7);k<f;)(g=(31&b[k])*0x1000000000000+0x10000000000*b[k+1]+0x100000000*b[k+2]+0x1000000*b[k+3]+(b[k+4]<<16)+(b[k+5]<<8)+b[k+6])>=9e15?crypto.randomBytes(7).copy(b,k):(m.push(g%1e14),k+=7);k=f/7}else throw G=!1,Error(j+"crypto unavailable");if(!G)for(;k<f;)(g=c())<9e15&&(m[k++]=g%1e14);for(f=m[--k],a%=14,f&&a&&(g=l[14-a],m[k]=i(f/g)*g);0===m[k];m.pop(),k--);if(k<0)m=[e=0];else{for(e=-1;0===m[0];m.splice(0,1),e-=14);for(k=1,g=m[0];g>=10;g/=10,k++);k<14&&(e-=14-k)}return n.e=e,n.c=m,n},M.sum=function(){for(var a=1,b=arguments,c=new M(b[0]);a<b.length;)c=c.plus(b[a++]);return c},w=function(){var a="0123456789";function b(a,b,c,d){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;g[f]*=b);for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(null==g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}return function(c,d,e,f,g){var h,i,j,k,l,m,o,p,q=c.indexOf("."),r=A,t=B;for(q>=0&&(k=I,I=0,c=c.replace(".",""),m=(p=new M(d)).pow(c.length-q),I=k,p.c=b(s(n(m.c),m.e,"0"),10,e,a),p.e=p.c.length),j=k=(o=b(c,d,e,g?(h=K,a):(h=a,K))).length;0==o[--k];o.pop());if(!o[0])return h.charAt(0);if(q<0?--j:(m.c=o,m.e=j,m.s=f,o=(m=v(m,p,r,t,e)).c,l=m.r,j=m.e),q=o[i=j+r+1],k=e/2,l=l||i<0||null!=o[i+1],l=t<4?(null!=q||l)&&(0==t||t==(m.s<0?3:2)):q>k||q==k&&(4==t||l||6==t&&1&o[i-1]||t==(m.s<0?8:7)),i<1||!o[0])c=l?s(h.charAt(1),-r,h.charAt(0)):h.charAt(0);else{if(o.length=i,l)for(--e;++o[--i]>e;)o[i]=0,i||(++j,o=[1].concat(o));for(k=o.length;!o[--k];);for(q=0,c="";q<=k;c+=h.charAt(o[q++]));c=s(c,j,h.charAt(0))}return c}}(),v=function(){function a(a,b,c){var d,e,f,g,h=0,i=a.length,j=b%1e7,k=b/1e7|0;for(a=a.slice();i--;)d=k*(f=a[i]%1e7)+(g=a[i]/1e7|0)*j,h=((e=j*f+d%1e7*1e7+h)/c|0)+(d/1e7|0)+k*g,a[i]=e%c;return h&&(a=[h].concat(a)),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(d,e,f,g,h){var j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d.s==e.s?1:-1,C=d.c,D=e.c;if(!C||!C[0]||!D||!D[0])return new M(!d.s||!e.s||(C?D&&C[0]==D[0]:!D)?NaN:C&&0==C[0]||!D?0*B:B/0);for(s=(r=new M(B)).c=[],B=f+(k=d.e-e.e)+1,h||(h=1e14,k=m(d.e/14)-m(e.e/14),B=B/14|0),l=0;D[l]==(C[l]||0);l++);if(D[l]>(C[l]||0)&&k--,B<0)s.push(1),n=!0;else{for(x=C.length,z=D.length,l=0,B+=2,(o=i(h/(D[0]+1)))>1&&(D=a(D,o,h),C=a(C,o,h),z=D.length,x=C.length),w=z,u=(t=C.slice(0,z)).length;u<z;t[u++]=0);A=[0].concat(A=D.slice()),y=D[0],D[1]>=h/2&&y++;do{if(o=0,(j=b(D,t,z,u))<0){if(v=t[0],z!=u&&(v=v*h+(t[1]||0)),(o=i(v/y))>1)for(o>=h&&(o=h-1),q=(p=a(D,o,h)).length,u=t.length;1==b(p,t,q,u);)o--,c(p,z<q?A:D,q,h),q=p.length,j=1;else 0==o&&(j=o=1),q=(p=D.slice()).length;if(q<u&&(p=[0].concat(p)),c(t,p,u,h),u=t.length,-1==j)for(;1>b(D,t,z,u);)o++,c(t,z<u?A:D,u,h),u=t.length}else 0===j&&(o++,t=[0]);s[l++]=o,t[0]?t[u++]=C[w]||0:(t=[C[w]],u=1)}while((w++<x||null!=t[0])&&B--);n=null!=t[0],s[0]||s.splice(0,1)}if(1e14==h){for(l=1,B=s[0];B>=10;B/=10,l++);Q(r,f+(r.e=l+14*k-1)+1,g,n)}else r.e=k,r.r=+n;return r}}(),d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,f=/^\.([^.]+)$/,t=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(a,b,c,g){var h,i=c?b:b.replace(u,"");if(t.test(i))a.s=isNaN(i)?null:i<0?-1:1;else{if(!c&&(i=i.replace(d,function(a,b,c){return h="x"==(c=c.toLowerCase())?16:"b"==c?2:8,g&&g!=h?a:b}),g&&(h=g,i=i.replace(e,"$1").replace(f,"0.$1")),b!=i))return new M(i,h);if(M.DEBUG)throw Error(j+"Not a"+(g?" base "+g:"")+" number: "+b);a.s=null}a.c=a.e=null},y.absoluteValue=y.abs=function(){var a=new M(this);return a.s<0&&(a.s=1),a},y.comparedTo=function(a,b){return o(this,new M(a,b))},y.decimalPlaces=y.dp=function(a,b){var c,d,e;if(null!=a)return p(a,0,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a+this.e+1,b);if(!(c=this.c))return null;if(d=((e=c.length-1)-m(this.e/14))*14,e=c[e])for(;e%10==0;e/=10,d--);return d<0&&(d=0),d},y.dividedBy=y.div=function(a,b){return v(this,new M(a,b),A,B)},y.dividedToIntegerBy=y.idiv=function(a,b){return v(this,new M(a,b),0,1)},y.exponentiatedBy=y.pow=function(a,b){var c,d,e,f,g,k,l,m,n,o=this;if((a=new M(a)).c&&!a.isInteger())throw Error(j+"Exponent not an integer: "+R(a));if(null!=b&&(b=new M(b)),k=a.e>14,!o.c||!o.c[0]||1==o.c[0]&&!o.e&&1==o.c.length||!a.c||!a.c[0])return n=new M(Math.pow(+R(o),k?a.s*(2-q(a)):+R(a))),b?n.mod(b):n;if(l=a.s<0,b){if(b.c?!b.c[0]:!b.s)return new M(NaN);(d=!l&&o.isInteger()&&b.isInteger())&&(o=o.mod(b))}else{if(a.e>9&&(o.e>0||o.e<-1||(0==o.e?o.c[0]>1||k&&o.c[1]>=24e7:o.c[0]<8e13||k&&o.c[0]<=9999975e7)))return f=o.s<0&&q(a)?-0:0,o.e>-1&&(f=1/f),new M(l?1/f:f);I&&(f=h(I/14+2))}for(k?(c=new M(.5),l&&(a.s=1),m=q(a)):m=(e=Math.abs(+R(a)))%2,n=new M(z);;){if(m){if(!(n=n.times(o)).c)break;f?n.c.length>f&&(n.c.length=f):d&&(n=n.mod(b))}if(e){if(0===(e=i(e/2)))break;m=e%2}else if(Q(a=a.times(c),a.e+1,1),a.e>14)m=q(a);else{if(0==(e=+R(a)))break;m=e%2}o=o.times(o),f?o.c&&o.c.length>f&&(o.c.length=f):d&&(o=o.mod(b))}return d?n:(l&&(n=z.div(n)),b?n.mod(b):f?Q(n,I,B,g):n)},y.integerValue=function(a){var b=new M(this);return null==a?a=B:p(a,0,8),Q(b,b.e+1,a)},y.isEqualTo=y.eq=function(a,b){return 0===o(this,new M(a,b))},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(a,b){return o(this,new M(a,b))>0},y.isGreaterThanOrEqualTo=y.gte=function(a,b){return 1===(b=o(this,new M(a,b)))||0===b},y.isInteger=function(){return!!this.c&&m(this.e/14)>this.c.length-2},y.isLessThan=y.lt=function(a,b){return 0>o(this,new M(a,b))},y.isLessThanOrEqualTo=y.lte=function(a,b){return -1===(b=o(this,new M(a,b)))||0===b},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&0==this.c[0]},y.minus=function(a,b){var c,d,e,f,g=this.s;if(b=(a=new M(a,b)).s,!g||!b)return new M(NaN);if(g!=b)return a.s=-b,this.plus(a);var h=this.e/14,i=a.e/14,j=this.c,k=a.c;if(!h||!i){if(!j||!k)return j?(a.s=-b,a):new M(k?this:NaN);if(!j[0]||!k[0])return k[0]?(a.s=-b,a):new M(j[0]?this:3==B?-0:0)}if(h=m(h),i=m(i),j=j.slice(),g=h-i){for((f=g<0)?(g=-g,e=j):(i=h,e=k),e.reverse(),b=g;b--;e.push(0));e.reverse()}else for(d=(f=(g=j.length)<(b=k.length))?g:b,g=b=0;b<d;b++)if(j[b]!=k[b]){f=j[b]<k[b];break}if(f&&(e=j,j=k,k=e,a.s=-a.s),(b=(d=k.length)-(c=j.length))>0)for(;b--;j[c++]=0);for(b=1e14-1;d>g;){if(j[--d]<k[d]){for(c=d;c&&!j[--c];j[c]=b);--j[c],j[d]+=1e14}j[d]-=k[d]}for(;0==j[0];j.splice(0,1),--i);return j[0]?P(a,j,i):(a.s=3==B?-1:1,a.c=[a.e=0],a)},y.modulo=y.mod=function(a,b){var c,d;return(a=new M(a,b),this.c&&a.s&&(!a.c||a.c[0]))?a.c&&(!this.c||this.c[0])?(9==H?(d=a.s,a.s=1,c=v(this,a,0,3),a.s=d,c.s*=d):c=v(this,a,0,H),(a=this.minus(c.times(a))).c[0]||1!=H||(a.s=this.s),a):new M(this):new M(NaN)},y.multipliedBy=y.times=function(a,b){var c,d,e,f,g,h,i,j,k,l,n,o,p,q=this.c,r=(a=new M(a,b)).c;if(!q||!r||!q[0]||!r[0])return this.s&&a.s&&(!q||q[0]||r)&&(!r||r[0]||q)?(a.s*=this.s,q&&r?(a.c=[0],a.e=0):a.c=a.e=null):a.c=a.e=a.s=null,a;for(d=m(this.e/14)+m(a.e/14),a.s*=this.s,(i=q.length)<(l=r.length)&&(p=q,q=r,r=p,e=i,i=l,l=e),e=i+l,p=[];e--;p.push(0));for(e=l;--e>=0;){for(c=0,n=r[e]%1e7,o=r[e]/1e7|0,f=e+(g=i);f>e;)h=o*(j=q[--g]%1e7)+(k=q[g]/1e7|0)*n,c=((j=n*j+h%1e7*1e7+p[f]+c)/1e14|0)+(h/1e7|0)+o*k,p[f--]=j%1e14;p[f]=c}return c?++d:p.splice(0,1),P(a,p,d)},y.negated=function(){var a=new M(this);return a.s=-a.s||null,a},y.plus=function(a,b){var c,d=this.s;if(b=(a=new M(a,b)).s,!d||!b)return new M(NaN);if(d!=b)return a.s=-b,this.minus(a);var e=this.e/14,f=a.e/14,g=this.c,h=a.c;if(!e||!f){if(!g||!h)return new M(d/0);if(!g[0]||!h[0])return h[0]?a:new M(g[0]?this:0*d)}if(e=m(e),f=m(f),g=g.slice(),d=e-f){for(d>0?(f=e,c=h):(d=-d,c=g),c.reverse();d--;c.push(0));c.reverse()}for((d=g.length)-(b=h.length)<0&&(c=h,h=g,g=c,b=d),d=0;b;)d=(g[--b]=g[b]+h[b]+d)/1e14|0,g[b]=1e14===g[b]?0:g[b]%1e14;return d&&(g=[d].concat(g),++f),P(a,g,f)},y.precision=y.sd=function(a,b){var c,d,e;if(null!=a&&!!a!==a)return p(a,1,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a,b);if(!(c=this.c))return null;if(d=14*(e=c.length-1)+1,e=c[e]){for(;e%10==0;e/=10,d--);for(e=c[0];e>=10;e/=10,d++);}return a&&this.e+1>d&&(d=this.e+1),d},y.shiftedBy=function(a){return p(a,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+a)},y.squareRoot=y.sqrt=function(){var a,b,c,d,e,f=this.c,g=this.s,h=this.e,i=A+4,j=new M("0.5");if(1!==g||!f||!f[0])return new M(!g||g<0&&(!f||f[0])?NaN:f?this:1/0);if(0==(g=Math.sqrt(+R(this)))||g==1/0?(((b=n(f)).length+h)%2==0&&(b+="0"),g=Math.sqrt(+b),h=m((h+1)/2)-(h<0||h%2),c=new M(b=g==1/0?"5e"+h:(b=g.toExponential()).slice(0,b.indexOf("e")+1)+h)):c=new M(g+""),c.c[0]){for((g=(h=c.e)+i)<3&&(g=0);;)if(e=c,c=j.times(e.plus(v(this,e,i,1))),n(e.c).slice(0,g)===(b=n(c.c)).slice(0,g)){if(c.e<h&&--g,"9999"!=(b=b.slice(g-3,g+1))&&(d||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(Q(c,c.e+A+2,1),a=!c.times(c).eq(this));break}if(!d&&(Q(e,e.e+A+2,0),e.times(e).eq(this))){c=e;break}i+=4,g+=4,d=1}}return Q(c,c.e+A+1,B,a)},y.toExponential=function(a,b){return null!=a&&(p(a,0,1e9),a++),N(this,a,b,1)},y.toFixed=function(a,b){return null!=a&&(p(a,0,1e9),a=a+this.e+1),N(this,a,b)},y.toFormat=function(a,b,c){var d;if(null==c)null!=a&&b&&"object"==typeof b?(c=b,b=null):a&&"object"==typeof a?(c=a,a=b=null):c=J;else if("object"!=typeof c)throw Error(j+"Argument not an object: "+c);if(d=this.toFixed(a,b),this.c){var e,f=d.split("."),g=+c.groupSize,h=+c.secondaryGroupSize,i=c.groupSeparator||"",k=f[0],l=f[1],m=this.s<0,n=m?k.slice(1):k,o=n.length;if(h&&(e=g,g=h,h=e,o-=e),g>0&&o>0){for(e=o%g||g,k=n.substr(0,e);e<o;e+=g)k+=i+n.substr(e,g);h>0&&(k+=i+n.slice(e)),m&&(k="-"+k)}d=l?k+(c.decimalSeparator||"")+((h=+c.fractionGroupSize)?l.replace(RegExp("\\d{"+h+"}\\B","g"),"$&"+(c.fractionGroupSeparator||"")):l):k}return(c.prefix||"")+d+(c.suffix||"")},y.toFraction=function(a){var b,c,d,e,f,g,h,i,k,m,o,p,q=this.c;if(null!=a&&(!(h=new M(a)).isInteger()&&(h.c||1!==h.s)||h.lt(z)))throw Error(j+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+R(h));if(!q)return new M(this);for(b=new M(z),k=c=new M(z),d=i=new M(z),p=n(q),f=b.e=p.length-this.e-1,b.c[0]=l[(g=f%14)<0?14+g:g],a=!a||h.comparedTo(b)>0?f>0?b:k:h,g=F,F=1/0,h=new M(p),i.c[0]=0;m=v(h,b,0,1),1!=(e=c.plus(m.times(d))).comparedTo(a);)c=d,d=e,k=i.plus(m.times(e=k)),i=e,b=h.minus(m.times(e=b)),h=e;return e=v(a.minus(c),d,0,1),i=i.plus(e.times(k)),c=c.plus(e.times(d)),i.s=k.s=this.s,f*=2,o=1>v(k,d,f,B).minus(this).abs().comparedTo(v(i,c,f,B).minus(this).abs())?[k,d]:[i,c],F=g,o},y.toNumber=function(){return+R(this)},y.toPrecision=function(a,b){return null!=a&&p(a,1,1e9),N(this,a,b,2)},y.toString=function(a){var b,c=this,d=c.s,e=c.e;return null===e?d?(b="Infinity",d<0&&(b="-"+b)):b="NaN":(null==a?b=e<=C||e>=D?r(n(c.c),e):s(n(c.c),e,"0"):10===a&&L?b=s(n((c=Q(new M(c),A+e+1,B)).c),c.e,"0"):(p(a,2,K.length,"Base"),b=w(s(n(c.c),e,"0"),10,a,d,!0)),d<0&&c.c[0]&&(b="-"+b)),b},y.valueOf=y.toJSON=function(){return R(this)},y._isBigNumber=!0,null!=b&&M.set(b),M}()).default=f.BigNumber=f,void 0===(d=(function(){return f}).call(b,c,b,a))||(a.exports=d)}(0)},75996:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Impersonated=b.IMPERSONATED_ACCOUNT_TYPE=void 0;let d=c(46245),e=c(32842),f=c(74072);b.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class g extends d.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(a={}){if(super(a),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=a.sourceClient??new d.OAuth2Client,this.targetPrincipal=a.targetPrincipal??"",this.delegates=a.delegates??[],this.targetScopes=a.targetScopes??[],this.lifetime=a.lifetime??3600,(0,f.originalOrCamelOptions)(a).get("universe_domain")){if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`)}else this.universeDomain=this.sourceClient.universeDomain;this.endpoint=a.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(a){await this.sourceClient.getAccessToken();let b=`projects/-/serviceAccounts/${this.targetPrincipal}`,c=`${this.endpoint}/v1/${b}:signBlob`,d={delegates:this.delegates,payload:Buffer.from(a).toString("base64")};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:c,data:d,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let a="projects/-/serviceAccounts/"+this.targetPrincipal,b=`${this.endpoint}/v1/${a}:generateAccessToken`,c={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},d=await this.sourceClient.request({...g.RETRY_CONFIG,url:b,data:c,method:"POST"}),e=d.data;return this.credentials.access_token=e.accessToken,this.credentials.expiry_date=Date.parse(e.expireTime),{tokens:this.credentials,res:d}}catch(c){if(!(c instanceof Error))throw c;let a=0,b="";if(c instanceof e.GaxiosError&&(a=c?.response?.data?.error?.status,b=c?.response?.data?.error?.message),a&&b)throw c.message=`${a}: unable to impersonate: ${b}`,c;throw c.message=`unable to impersonate: ${c}`,c}}async fetchIdToken(a,b){await this.sourceClient.getAccessToken();let c=`projects/-/serviceAccounts/${this.targetPrincipal}`,d=`${this.endpoint}/v1/${c}:generateIdToken`,e={delegates:this.delegates,audience:a,includeEmail:b?.includeEmail??!0,useEmailAzp:b?.includeEmail??!0};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:d,data:e,method:"POST"})).data.token}}b.Impersonated=g},76334:(a,b,c)=>{"use strict";var d=c(79428).Buffer,e=c(79428).SlowBuffer;function f(a,b){if(!d.isBuffer(a)||!d.isBuffer(b)||a.length!==b.length)return!1;for(var c=0,e=0;e<a.length;e++)c|=a[e]^b[e];return 0===c}a.exports=f,f.install=function(){d.prototype.equal=e.prototype.equal=function(a){return f(this,a)}};var g=d.prototype.equal,h=e.prototype.equal;f.restore=function(){d.prototype.equal=g,e.prototype.equal=h}},76760:a=>{"use strict";a.exports=require("node:path")},77030:a=>{"use strict";a.exports=require("node:net")},77682:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BrowserCrypto=void 0;let d=c(34947),e=c(19101);class f{constructor(){if("undefined"==typeof window||void 0===window.crypto||void 0===window.crypto.subtle)throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return d.fromByteArray(new Uint8Array(c))}randomBytesBase64(a){let b=new Uint8Array(a);return window.crypto.getRandomValues(b),d.fromByteArray(b)}static padBase64(a){for(;a.length%4!=0;)a+="=";return a}async verify(a,b,c){let e={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},g=new TextEncoder().encode(b),h=d.toByteArray(f.padBase64(c)),i=await window.crypto.subtle.importKey("jwk",a,e,!0,["verify"]);return await window.crypto.subtle.verify(e,i,h,g)}async sign(a,b){let c={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},e=new TextEncoder().encode(b),f=await window.crypto.subtle.importKey("jwk",a,c,!0,["sign"]),g=await window.crypto.subtle.sign(c,f,e);return d.fromByteArray(new Uint8Array(g))}decodeBase64StringUtf8(a){let b=d.toByteArray(f.padBase64(a));return new TextDecoder().decode(b)}encodeBase64StringUtf8(a){let b=new TextEncoder().encode(a);return d.fromByteArray(b)}async sha256DigestHex(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return(0,e.fromArrayBufferToHex)(c)}async signWithHmacSha256(a,b){let c="string"==typeof a?a:String.fromCharCode(...new Uint16Array(a)),d=new TextEncoder,e=await window.crypto.subtle.importKey("raw",d.encode(c),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",e,d.encode(b))}}b.BrowserCrypto=f},77921:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"DetachedPromise",{enumerable:!0,get:function(){return c}});class c{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c,b=d}),this.resolve=a,this.reject=b}}},78053:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.createCrypto=function(){return h()?new f.BrowserCrypto:new g.NodeCrypto},b.hasBrowserCrypto=h;let f=c(77682),g=c(53914);function h(){return"undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle}e(c(19101),b)},78440:(a,b,c)=>{"use strict";c.d(b,{default:()=>x});var d=c(91925),e=c(60560);let f={en:{home:"Home",make:"Create",makeInvoice:"Make Invoice",makeReceipt:"Make Receipt",templates:"Invoice Templates",records:"Records",profile:"Profile",heroTitle:"Professional Invoices",heroSub:"SmartBill Pro is the premier billing platform designed for modern entrepreneurs and freelancers. We help global users improve billing efficiency and build a professional brand image through innovative AI technology and minimalist design.",createEmpty:"Create Blank",exportPdf:"Export PDF",generating:"Generating...",save:"Save",saveToRecords:"Save to Records",items:"Line Items",summary:"Summary",tax:"Tax",total:"Total",login:"Login",register:"Register",welcomeBack:"Welcome Back",welcomeSub:"Please sign in to your account",joinPro:"Join our professional billing journey",facebookLogin:"Login with Facebook",orEmail:"OR USE EMAIL",email:"Email Address",password:"Password",forgotPassword:"Forgot Password?",submitLogin:"Login Now",submitRegister:"Register Now",noAccount:"Don't have an account?",hasAccount:"Already have an account?",aiAssistant:"AI Smart Fill",aiAssistantDesc:"Describe your work, let Gemini draft the items.",aiPlaceholder:"e.g., 'I did 5 hours of website coding and 2 logo designs...'",generateItems:"Generate Items",thinking:"Thinking...",selectTemplate:"Select Template",layoutSettings:"Layout Settings",swapLayout:"Swap App Layout",flipHeader:"Flip Invoice Header",invoiceMode:"Invoice Mode",receiptMode:"Receipt Mode",invNo:"Invoice No.",recNo:"Receipt No.",currency:"Currency",billFrom:"Bill From (Your Info)",billTo:"Bill To (Client Info)",logoUp:"Upload Logo",namePlaceholder:"Business/Personal Name",addrPlaceholder:"Address and contact info",clientName:"Client Name",clientAddr:"Client Address",itemDesc:"Item Description",quantity:"Qty",rate:"Rate",amount:"Amount",addItems:"+ Add Item",taxRate:"Tax Rate (%)",signature:"E-Signature",signPlaceholder:"Handwrite your signature here",signClear:"Clear and Resign",payable:"TOTAL PAYABLE",notes:"Notes",notesPlaceholder:"Notes or instructions...",history:"History Records",manageRecords:"Manage your generated invoices and bills",totalCount:"Total {count} items",emptyTitle:"No Records",emptySub:"Start making invoices, they will show up here.",goToHome:"Browse Templates",amountTotal:"Total Amount",footerDesc:"SmartBill Pro is the premier billing platform designed for modern entrepreneurs and freelancers. We help global users improve billing efficiency through innovative AI technology.",productFeatures:"Products",support:"Support",aboutUs:"About Us",helpCenter:"Help Center",privacy:"Privacy Policy",terms:"Terms of Service",contactUs:"Contact Us",supportEmail:"Official Support",serviceTime:"Service Time",monToFri:"Mon - Fri",pacificTime:"9:00 AM - 5:00 PM (PT)",systemOk:"System Online",copyright:"\xa9 {year} SMARTBILL PRO. Precise Billing, Smart Future.",ind_freelance:"Freelance",ind_construction:"Construction",ind_retail:"Retail",ind_consulting:"Consulting",ind_design:"Creative Design"},"zh-TW":{home:"",make:"",makeInvoice:"",makeReceipt:"",templates:"",records:"",profile:"",heroTitle:" ",heroSub:"SmartBill Pro  AI ",createEmpty:"",exportPdf:" PDF",generating:"...",save:"",saveToRecords:"",items:"",summary:"",tax:"",total:"",login:"",register:"",welcomeBack:"",welcomeSub:"",joinPro:"",facebookLogin:" Facebook ",orEmail:"",email:"",password:"",forgotPassword:"",submitLogin:"",submitRegister:"",noAccount:"",hasAccount:"",aiAssistant:"AI ",aiAssistantDesc:" Gemini ",aiPlaceholder:"'52...'",generateItems:"",thinking:"...",selectTemplate:"",layoutSettings:"",swapLayout:"",flipHeader:"",invoiceMode:"",receiptMode:"",invNo:"",recNo:"",currency:"",billFrom:" ()",billTo:" ()",logoUp:" Logo",namePlaceholder:"/",addrPlaceholder:"",clientName:"",clientAddr:"",itemDesc:"",quantity:"",rate:"",amount:"",addItems:"+ ",taxRate:" (%)",signature:"",signPlaceholder:"",signClear:"",payable:"",notes:"",notesPlaceholder:"",history:"",manageRecords:"",totalCount:" {count} ",emptyTitle:"",emptySub:"",goToHome:"",amountTotal:"",footerDesc:"SmartBill Pro  AI ",productFeatures:"",support:"/",aboutUs:"",helpCenter:"",privacy:"",terms:"",contactUs:"",supportEmail:"",serviceTime:"",monToFri:"",pacificTime:" 9:00 -  5:00 ()",systemOk:"",copyright:"\xa9 {year} SMARTBILL PRO. .",ind_freelance:"",ind_construction:"",ind_retail:"",ind_consulting:"",ind_design:""},fr:{home:"Accueil",make:"Cr\xe9er",makeInvoice:"Cr\xe9er facture",makeReceipt:"Cr\xe9er re\xe7u",templates:"Mod\xe8les",records:"Archives",profile:"Profil",heroTitle:"Factures Professionnelles",heroSub:"SmartBill Pro est la plateforme de facturation de premier plan con\xe7ue pour les entrepreneurs et freelances modernes.",createEmpty:"Cr\xe9er vide",exportPdf:"Exporter PDF",generating:"G\xe9n\xe9ration...",save:"Enregistrer",saveToRecords:"Enregistrer",items:"Articles",summary:"R\xe9sum\xe9",tax:"Taxe",total:"Total",login:"Connexion",register:"S'inscrire",welcomeBack:"Bienvenue",email:"Email",password:"Mot de passe",helpCenter:"Centre d'aide"},de:{home:"Start",make:"Erstellen",makeInvoice:"Rechnung erstellen",makeReceipt:"Beleg erstellen",templates:"Vorlagen",records:"Berichte",profile:"Profil",heroTitle:"Profi-Rechnungen",heroSub:"SmartBill Pro ist die f\xfchrende Abrechnungsplattform f\xfcr moderne Unternehmer und Freiberufler.",createEmpty:"Neu erstellen",exportPdf:"PDF exportieren",generating:"Erstellen...",save:"Speichern",saveToRecords:"Speichern",items:"Positionen",summary:"Zusammenfassung",tax:"Steuer",total:"Gesamt",login:"Anmelden",register:"Registrieren",welcomeBack:"Willkommen zur\xfcck",email:"Email",password:"Passwort",helpCenter:"Hilfe-Center"},ja:{home:"",make:"",makeInvoice:"",makeReceipt:"",templates:"",records:"",profile:"",heroTitle:"",heroSub:"SmartBill Pro",createEmpty:"",exportPdf:"PDF",generating:"...",save:"",saveToRecords:"",items:"",summary:"",tax:"",total:"",login:"",register:"",welcomeBack:"",email:"",password:"Passwort",helpCenter:""}},g=({onPrint:a,isExporting:b,activeView:c,setView:g,lang:h,setLang:i})=>{let[j,k]=(0,e.useState)(!1),l=f[h],m=[{id:"home",label:l.home,icon:"fas fa-home"},{id:"records",label:l.records,icon:"fas fa-file-invoice"},{id:"profile",label:l.profile,icon:"fas fa-user"}],n=[{id:"zh-TW",label:""},{id:"en",label:"English"},{id:"fr",label:"Fran\xe7ais"},{id:"de",label:"Deutsch"},{id:"ja",label:""}],o=n.find(a=>a.id===h)?.label||"Language";return(0,d.jsx)("header",{className:"bg-white/95 backdrop-blur-2xl border-b border-slate-100 sticky top-0 z-[100] no-print shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07)]",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 lg:px-10 h-20 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group select-none",onClick:()=>g("home"),children:[(0,d.jsx)("div",{className:"bg-blue-600 w-10 h-10 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-100 transition-all group-hover:rotate-6 group-hover:scale-105",children:(0,d.jsx)("i",{className:"fas fa-file-invoice text-lg"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-xl font-black bg-gradient-to-br from-slate-900 via-slate-800 to-slate-600 bg-clip-text text-transparent leading-none tracking-tight",children:"SmartBill"}),(0,d.jsx)("span",{className:"text-[10px] font-black text-blue-600 uppercase tracking-[0.2em] leading-none mt-1.5",children:"PRO EDITION"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 sm:gap-6",children:[(0,d.jsx)("nav",{className:"hidden md:flex items-center gap-1.5 bg-slate-50 p-1.5 rounded-[1.25rem] border border-slate-100",children:m.map(a=>(0,d.jsxs)("button",{onClick:()=>g(a.id),className:`px-5 py-2.5 rounded-xl text-xs font-black transition-all flex items-center gap-2.5 uppercase tracking-wider ${c===a.id?"bg-white text-blue-600 shadow-sm border border-slate-100":"text-slate-400 hover:text-slate-800 hover:bg-slate-100"}`,children:[(0,d.jsx)("i",{className:`${a.icon} text-[10px] ${c===a.id?"opacity-100":"opacity-60"}`}),a.label]},a.id))}),(0,d.jsx)("div",{className:"hidden lg:block w-px h-6 bg-slate-200"}),(0,d.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>k(!j),className:`h-11 px-4 flex items-center gap-3 rounded-2xl border transition-all shadow-sm group ${j?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:border-slate-300 hover:bg-slate-50"}`,children:[(0,d.jsx)("i",{className:`fas fa-globe text-sm transition-transform ${j?"rotate-12":"group-hover:rotate-12"}`}),(0,d.jsx)("span",{className:"text-[11px] font-black whitespace-nowrap uppercase tracking-tight hidden sm:inline",children:o}),(0,d.jsx)("i",{className:`fas fa-chevron-down text-[9px] opacity-40 transition-transform duration-300 ${j?"rotate-180":""}`})]}),j&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>k(!1)}),(0,d.jsxs)("div",{className:"absolute right-0 mt-4 w-60 bg-white rounded-[1.5rem] shadow-[0_20px_50px_-12px_rgba(0,0,0,0.15)] border border-slate-100 z-20 py-2.5 overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,d.jsx)("div",{className:"px-5 py-2.5 text-[10px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-50 mb-1.5",children:"Select Language"}),(0,d.jsx)("div",{className:"max-h-[300px] overflow-y-auto scrollbar-hide",children:n.map(a=>(0,d.jsxs)("button",{onClick:()=>{i(a.id),k(!1)},className:`w-full px-5 py-3.5 text-left text-sm font-bold flex items-center justify-between transition-colors ${h===a.id?"bg-blue-50 text-blue-600":"text-slate-600 hover:bg-slate-50"}`,children:[a.label,h===a.id&&(0,d.jsx)("i",{className:"fas fa-check-circle text-blue-500"})]},a.id))})]})]})]}),"editor"===c&&(0,d.jsxs)("button",{onClick:a,disabled:b,className:`bg-blue-600 hover:bg-blue-700 text-white h-11 px-6 rounded-2xl font-black shadow-lg shadow-blue-100 flex items-center gap-2.5 transition-all active:scale-95 text-xs uppercase tracking-widest ${b?"opacity-70 cursor-wait":""}`,children:[b?(0,d.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,d.jsx)("i",{className:"fas fa-file-export"}),(0,d.jsx)("span",{children:b?l.generating:l.exportPdf})]})]})]})]})})},h=({invoice:a,onChange:b,lang:c})=>{let g=(0,e.useRef)(null),h=(0,e.useRef)(null),[i,j]=(0,e.useState)(!1),k=f[c]||f.en;(0,e.useEffect)(()=>{if(h.current){let a=h.current.getContext("2d");a&&(a.strokeStyle="#0f172a",a.lineWidth=2,a.lineCap="round")}},[]);let l=a=>{j(!0),n(a)},m=()=>{j(!1);let c=h.current;c&&b({sender:{...a.sender,signature:c.toDataURL()}})},n=a=>{let b,c;if(!i||!h.current)return;let d=h.current,e=d.getContext("2d");if(!e)return;let f=d.getBoundingClientRect();"touches"in a?(b=a.touches[0].clientX-f.left,c=a.touches[0].clientY-f.top):(b=a.clientX-f.left,c=a.clientY-f.top),e.lineTo(b,c),e.stroke(),e.beginPath(),e.moveTo(b,c)},o=(c,d)=>{b({items:a.items.map(a=>a.id===c?{...a,...d}:a)})};return(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6 space-y-6",children:[(0,d.jsx)("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:["invoice","receipt"].map(c=>(0,d.jsx)("button",{onClick:()=>b({type:c}),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${a.type===c?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"invoice"===c?k.invoiceMode:k.receiptMode},c))}),(0,d.jsxs)("section",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"invoice"===a.type?k.invNo:k.recNo}),(0,d.jsx)("input",{type:"text",value:a.invoiceNumber,onChange:a=>b({invoiceNumber:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:k.currency}),(0,d.jsxs)("select",{value:a.currency,onChange:a=>b({currency:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg",children:[(0,d.jsx)("option",{value:"CNY",children:"CNY (\xa5)"}),(0,d.jsx)("option",{value:"USD",children:"USD ($)"}),(0,d.jsx)("option",{value:"EUR",children:"EUR ()"}),(0,d.jsx)("option",{value:"JPY",children:"JPY (\xa5)"})]})]})]}),(0,d.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4 border-t border-slate-100",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:k.billFrom}),(0,d.jsx)("input",{type:"file",ref:g,onChange:c=>{let d=c.target.files?.[0];if(d){let c=new FileReader;c.onloadend=()=>{b({sender:{...a.sender,logo:c.result}})},c.readAsDataURL(d)}},accept:"image/*",className:"hidden",id:"logo-up"}),(0,d.jsx)("label",{htmlFor:"logo-up",className:"text-xs text-blue-600 font-medium cursor-pointer",children:k.logoUp})]}),(0,d.jsx)("input",{placeholder:k.namePlaceholder,value:a.sender.name,onChange:c=>b({sender:{...a.sender,name:c.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg"}),(0,d.jsx)("textarea",{placeholder:k.addrPlaceholder,value:a.sender.address,onChange:c=>b({sender:{...a.sender,address:c.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg h-20 text-sm resize-none"})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:k.billTo}),(0,d.jsx)("input",{placeholder:k.clientName,value:a.client.name,onChange:c=>b({client:{...a.client,name:c.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg"}),(0,d.jsx)("textarea",{placeholder:k.clientAddr,value:a.client.address,onChange:c=>b({client:{...a.client,address:c.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg h-20 text-sm resize-none"})]})]}),(0,d.jsxs)("section",{className:"space-y-4 pt-4 border-t border-slate-100",children:[(0,d.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:k.items}),(0,d.jsx)("div",{className:"space-y-3",children:a.items.map(c=>(0,d.jsxs)("div",{className:"flex flex-col gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[(0,d.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,d.jsx)("input",{placeholder:k.itemDesc,className:"flex-1 bg-transparent font-medium",value:c.description,onChange:a=>o(c.id,{description:a.target.value})}),(0,d.jsx)("button",{onClick:()=>{var d;return d=c.id,void b({items:a.items.filter(a=>a.id!==d)})},className:"text-slate-300 hover:text-red-500",children:(0,d.jsx)("i",{className:"fas fa-trash-alt"})})]}),(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-slate-400",children:k.quantity}),(0,d.jsx)("input",{type:"number",className:"w-full bg-white border border-slate-200 px-3 py-1 rounded-lg text-sm",value:c.quantity,onChange:a=>o(c.id,{quantity:Number(a.target.value)})})]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-slate-400",children:k.rate}),(0,d.jsx)("input",{type:"number",className:"w-full bg-white border border-slate-200 px-3 py-1 rounded-lg text-sm",value:c.rate,onChange:a=>o(c.id,{rate:Number(a.target.value)})})]}),(0,d.jsxs)("div",{className:"flex-1 text-right",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-slate-400",children:k.amount}),(0,d.jsx)("div",{className:"font-bold py-1",children:(c.quantity*c.rate).toFixed(2)})]})]})]},c.id))}),(0,d.jsx)("button",{onClick:()=>{let c={id:`item-${Date.now()}`,description:"",quantity:1,rate:0};b({items:[...a.items,c]})},className:"w-full py-2 border-2 border-dashed border-slate-200 rounded-xl text-slate-400 hover:border-blue-400 hover:text-blue-500 transition-all font-bold text-sm",children:k.addItems})]}),(0,d.jsxs)("section",{className:"pt-4 border-t border-slate-100 space-y-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"text-sm font-semibold text-slate-700",children:k.taxRate}),(0,d.jsx)("input",{type:"number",className:"w-20 px-3 py-1 bg-white border border-slate-200 rounded-lg text-right text-sm",value:a.taxRate,onChange:a=>b({taxRate:Number(a.target.value)})})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:k.signature}),(0,d.jsx)("button",{onClick:()=>{let c=h.current;if(c){let d=c.getContext("2d");d?.clearRect(0,0,c.width,c.height),b({sender:{...a.sender,signature:void 0}})}},className:"text-[10px] font-bold text-blue-600 uppercase hover:underline",children:k.signClear})]}),(0,d.jsxs)("div",{className:"bg-slate-50 border-2 border-dashed border-slate-200 rounded-2xl overflow-hidden relative",children:[(0,d.jsx)("canvas",{ref:h,width:500,height:150,onMouseDown:l,onMouseMove:n,onMouseUp:m,onMouseLeave:m,onTouchStart:l,onTouchMove:n,onTouchEnd:m,className:"w-full h-[120px] cursor-crosshair touch-none"}),!a.sender.signature&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-slate-300 text-xs font-medium",children:k.signPlaceholder})]})]}),(0,d.jsxs)("div",{className:"bg-blue-600 p-4 rounded-xl text-white flex justify-between items-center",children:[(0,d.jsx)("span",{className:"font-bold uppercase text-xs",children:k.payable}),(0,d.jsx)("span",{className:"text-2xl font-black",children:new Intl.NumberFormat(c,{style:"currency",currency:a.currency}).format(a.items.reduce((a,b)=>a+b.quantity*b.rate,0)*(1+a.taxRate/100))})]})]})]})},i=({invoice:a,template:b,isHeaderReversed:c=!1,isForPdf:e=!1,lang:g})=>{let h=f[g]||f.en,i=a.items.reduce((a,b)=>a+b.quantity*b.rate,0),j=i*(a.taxRate/100),k=new Intl.NumberFormat(g,{style:"currency",currency:a.currency}),l=(()=>{switch(b){case"minimalist":return{header:"border-b-4 border-slate-900 px-12 pb-10 pt-10",tableHeader:"bg-slate-50 text-slate-900 border-b border-slate-200",accentColor:"slate-900",signatureBorder:"border-slate-900"};case"modern":return{header:"bg-indigo-600 text-white px-12 py-10 rounded-t-xl",tableHeader:"bg-indigo-50 text-indigo-700",accentColor:"indigo-600",signatureBorder:"border-indigo-600"};default:return{header:"bg-slate-800 text-white px-12 py-10",tableHeader:"bg-slate-100 text-slate-700",accentColor:"blue-600",signatureBorder:"border-slate-300"}}})(),m="invoice"===a.type?h.invoiceMode.split(" ")[0].toUpperCase():h.receiptMode.split(" ")[0].toUpperCase();return(0,d.jsxs)("div",{className:`w-[210mm] ${e?"min-h-[296mm]":"min-h-[297mm]"} bg-white mx-auto text-slate-800 flex flex-col overflow-hidden`,children:[(0,d.jsx)("div",{className:l.header,children:(0,d.jsxs)("div",{className:`flex justify-between items-start ${c?"flex-row-reverse":""}`,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-4xl font-black mb-1",children:m}),(0,d.jsxs)("p",{className:"opacity-80",children:["#",a.invoiceNumber]})]}),(0,d.jsxs)("div",{className:`flex flex-col ${c?"items-start text-left":"items-end text-right"}`,children:[a.sender.logo&&(0,d.jsx)("img",{src:a.sender.logo,alt:"Logo",className:"max-h-16 mb-4 object-contain"}),(0,d.jsx)("h2",{className:"text-xl font-bold",children:a.sender.name||h.namePlaceholder}),(0,d.jsx)("p",{className:"text-sm opacity-80 whitespace-pre-wrap",children:a.sender.address})]})]})}),(0,d.jsxs)("div",{className:"px-12 py-10 flex-1 flex flex-col",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-12 mb-10",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:h.billTo}),(0,d.jsxs)("div",{className:"border-l-4 border-slate-200 pl-4",children:[(0,d.jsx)("p",{className:"font-bold text-lg",children:a.client.name||h.clientName}),(0,d.jsx)("p",{className:"text-sm text-slate-500 mt-1 whitespace-pre-wrap",children:a.client.address})]})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-slate-400 mb-1",children:"ja"===g?"":"en"===g?"Date":""}),(0,d.jsx)("p",{className:"font-medium mb-4",children:a.date}),"invoice"===a.type&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"text-xs font-bold text-slate-400 mb-1",children:"ja"===g?"":"en"===g?"Due Date":""}),(0,d.jsx)("p",{className:`font-bold text-${l.accentColor}`,children:a.dueDate})]})]})]}),(0,d.jsxs)("table",{className:"w-full text-left mb-8",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:`${l.tableHeader} text-xs font-bold uppercase`,children:[(0,d.jsx)("th",{className:"px-6 py-4",children:h.itemDesc}),(0,d.jsx)("th",{className:"px-6 py-4 text-center",children:h.quantity}),(0,d.jsx)("th",{className:"px-6 py-4 text-center",children:h.rate}),(0,d.jsx)("th",{className:"px-6 py-4 text-right",children:h.amount})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-slate-100",children:a.items.map(a=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"px-6 py-4 font-medium",children:a.description||"..."}),(0,d.jsx)("td",{className:"px-6 py-4 text-center",children:a.quantity}),(0,d.jsx)("td",{className:"px-6 py-4 text-center",children:k.format(a.rate)}),(0,d.jsx)("td",{className:"px-6 py-4 text-right font-bold",children:k.format(a.quantity*a.rate)})]},a.id))})]}),(0,d.jsxs)("div",{className:"flex justify-between pt-6 border-t border-slate-100 mt-auto",children:[(0,d.jsxs)("div",{className:"flex flex-col items-start",children:[a.sender.signature&&(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsx)("img",{src:a.sender.signature,alt:"Signature",className:"h-16 object-contain"})}),(0,d.jsxs)("div",{className:`border-t ${l.signatureBorder} pt-2 min-w-[180px]`,children:[(0,d.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Authorized Signature"}),(0,d.jsx)("p",{className:"text-sm font-bold text-slate-900 mt-1",children:a.sender.name})]})]}),(0,d.jsxs)("div",{className:"w-64 space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between text-slate-500",children:[(0,d.jsx)("span",{children:"zh-TW"===g?"":"Subtotal"}),(0,d.jsx)("span",{children:k.format(i)})]}),(0,d.jsxs)("div",{className:"flex justify-between text-slate-500",children:[(0,d.jsxs)("span",{children:[h.taxRate," (",a.taxRate,"%)"]}),(0,d.jsx)("span",{children:k.format(j)})]}),(0,d.jsxs)("div",{className:"flex justify-between text-xl font-black text-slate-900 pt-2 border-t border-slate-200",children:[(0,d.jsx)("span",{children:h.total}),(0,d.jsx)("span",{children:k.format(i+j)})]})]})]}),a.notes&&(0,d.jsxs)("div",{className:"mt-8 pt-4",children:[(0,d.jsx)("h3",{className:"text-xs font-bold text-slate-400 mb-1",children:h.notes}),(0,d.jsx)("p",{className:"text-xs text-slate-500 italic whitespace-pre-wrap",children:a.notes})]})]}),(0,d.jsx)("div",{className:"p-8 border-t border-slate-50 text-center text-[10px] text-slate-300 uppercase tracking-widest",children:"Powered by SmartBill Pro"})]})},j=({template:a,setTemplate:b,onSmartFill:c,isAiLoading:g,isHeaderReversed:h,setIsHeaderReversed:i,onSave:j,lang:k})=>{let[l,m]=(0,e.useState)(""),n=f[k]||f.en;return(0,d.jsxs)("div",{className:"flex flex-col gap-6",children:[j&&(0,d.jsxs)("button",{onClick:j,className:"w-full py-4 bg-slate-900 text-white font-black uppercase tracking-widest rounded-xl hover:bg-slate-800 transition-all shadow-lg active:scale-95 flex items-center justify-center gap-3",children:[(0,d.jsx)("i",{className:"fas fa-save"})," ",n.saveToRecords]}),(0,d.jsxs)("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-xl p-6 text-white shadow-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,d.jsx)("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:(0,d.jsx)("i",{className:"fas fa-magic"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold",children:n.aiAssistant}),(0,d.jsx)("p",{className:"text-xs opacity-80",children:n.aiAssistantDesc})]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("textarea",{className:"w-full bg-white/10 border border-white/20 rounded-lg p-3 text-sm placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 resize-none h-20",placeholder:n.aiPlaceholder,value:l,onChange:a=>m(a.target.value)}),(0,d.jsxs)("button",{disabled:g,onClick:()=>{l.trim()&&(c(l),m(""))},className:`mt-2 w-full py-2 bg-white text-blue-600 font-bold rounded-lg text-sm hover:bg-slate-50 transition-all flex items-center justify-center gap-2 ${g?"opacity-50 cursor-not-allowed":""}`,children:[g?(0,d.jsx)("i",{className:"fas fa-spinner fa-spin"}):(0,d.jsx)("i",{className:"fas fa-bolt"}),g?n.thinking:n.generateItems]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,d.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,d.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 mb-4",children:n.selectTemplate}),(0,d.jsx)("div",{className:"flex flex-wrap gap-3",children:[{id:"professional",label:"Professional",color:"bg-slate-800"},{id:"modern",label:"Modern Indigo",color:"bg-indigo-600"},{id:"minimalist",label:"Minimalist",color:"bg-slate-900"}].map(c=>(0,d.jsxs)("button",{onClick:()=>b(c.id),className:`flex-1 min-w-[120px] p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${a===c.id?"border-blue-500 bg-blue-50 shadow-inner":"border-slate-100 bg-slate-50"}`,children:[(0,d.jsx)("div",{className:`w-10 h-10 ${c.color} rounded-lg shadow-md`}),(0,d.jsx)("span",{className:`text-xs font-bold ${a===c.id?"text-blue-700":"text-slate-500"}`,children:c.label})]},c.id))})]}),(0,d.jsxs)("div",{className:"p-6 bg-slate-50/50 space-y-4",children:[(0,d.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400",children:n.layoutSettings}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-200 rounded-xl",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-slate-700",children:n.flipHeader}),(0,d.jsx)("button",{onClick:()=>i(!h),className:`w-12 h-6 rounded-full transition-colors relative ${h?"bg-blue-600":"bg-slate-200"}`,children:(0,d.jsx)("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${h?"translate-x-7":"translate-x-1"}`})})]})]})]})]})},k=[{id:"freelance",color:"bg-emerald-500",icon:"fa-user-ninja",imageIds:["1499750310117-59e852c6f3ac","1498050108023-c5249f4df085","1519389950473-47ba0277781c","1522273400938-f27c90c40a72","1484867114623-ff5ef4c21801","1497030767101-fa0972d21231"]},{id:"construction",color:"bg-orange-500",icon:"fa-hard-hat",imageIds:["1503387762-592deb58ef4e","1541888941259-79273a460011","1504307651254-3b5b198c67d8","1504917595217-d4dc5f649e63","1581094771181-437754374a81","1523413551-7890664e585f"]},{id:"retail",color:"bg-pink-500",icon:"fa-shopping-bag",imageIds:["1441986300917-64674bd600d8","1472851294608-062f824d28c5","1556742044-3c52d6e88c62","1556740738-b6a63e27c4df","1567401893414-76b7b1e5a7a5","1441986233159-45d45ca44571"]},{id:"consulting",color:"bg-blue-500",icon:"fa-briefcase",imageIds:["1552664730-d307ca884978","1431540015161-0bf868adb9e8","1521737604893-d14cc237f11d","1517048676734-d0129213ef5c","1542744094-246d7ac42a7a","1600881333744-4405814239b0"]},{id:"design",color:"bg-purple-500",icon:"fa-paint-brush",imageIds:["1558655146-d2ba2343260e","1586717791821-3f44a563df92","1550684848-fac1c5b4e853","1522549735008-8df926c04431","1618005182381-e23e03f191b4","1581299894628-3ad044748d1c"]}],l=({src:a,alt:b,icon:c,color:f})=>{let[g,h]=(0,e.useState)("loading"),i=(0,e.useRef)(null);return(0,e.useEffect)(()=>{i.current&&i.current.complete&&h("loaded")},[]),(0,d.jsxs)("div",{className:"absolute inset-0 bg-slate-100 overflow-hidden",children:[("loading"===g||"error"===g)&&(0,d.jsxs)("div",{className:`absolute inset-0 flex flex-col items-center justify-center ${"error"===g?"bg-slate-200":"animate-pulse bg-slate-100"}`,children:[(0,d.jsx)("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${f} text-white text-2xl mb-4 shadow-lg opacity-30`,children:(0,d.jsx)("i",{className:`fas ${c}`})}),(0,d.jsx)("span",{className:"text-[9px] font-black uppercase tracking-[0.3em] text-slate-400",children:"error"===g?"Image Lost":"Loading..."})]}),(0,d.jsx)("img",{ref:i,src:a,alt:b,onLoad:()=>h("loaded"),onError:()=>h("error"),className:`w-full h-full object-cover transition-opacity duration-700 ${"loaded"===g?"opacity-100":"opacity-0"}`})]})},m=({onSelectTemplate:a,onCreateEmpty:b,lang:c})=>{let g=f[c]||f.en,h=(0,e.useMemo)(()=>{let a={freelance:g.ind_freelance,construction:g.ind_construction,retail:g.ind_retail,consulting:g.ind_consulting,design:g.ind_design};return k.map(b=>({...b,name:a[b.id]||b.id,templates:Array.from({length:6}).map((c,d)=>{let e=b.imageIds[d],f=`https://images.unsplash.com/photo-${e}?auto=format&fit=crop&w=800&q=80`;return{id:`${b.id}-${d}`,category:a[b.id]||b.id,title:`${a[b.id]||b.id} #${d+1}`,previewColor:b.color,backgroundImage:f,defaultData:{items:[{id:`tpl-${b.id}-${d}`,description:`${a[b.id]} Service Package`,quantity:1,rate:450+120*d}]}}})}))},[g]);return(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 lg:px-10 py-12 space-y-16 overflow-hidden",children:[(0,d.jsxs)("section",{className:"text-center space-y-8 py-16 relative",children:[(0,d.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-blue-50 text-blue-600 rounded-full text-[10px] font-black uppercase tracking-widest mb-4",children:[(0,d.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full animate-pulse"}),"Professional Invoice Generator"]}),(0,d.jsxs)("h1",{className:"text-5xl sm:text-7xl font-black text-slate-900 tracking-tight leading-[1.05]",children:[g.heroTitle.split(" ")[0]," ",(0,d.jsx)("span",{className:"text-blue-600",children:g.heroTitle.split(" ").slice(1).join(" ")})]}),(0,d.jsx)("p",{className:"text-slate-500 max-w-2xl mx-auto text-xl font-medium px-4 leading-relaxed",children:g.heroSub}),(0,d.jsx)("div",{className:"flex justify-center pt-8",children:(0,d.jsxs)("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-10 py-5 rounded-[2rem] font-black shadow-2xl shadow-blue-100 flex items-center gap-3 transition-all active:scale-95 text-lg group",children:[(0,d.jsx)("i",{className:"fas fa-plus-circle group-hover:rotate-90 transition-transform"})," ",g.createEmpty]})})]}),h.map(b=>(0,d.jsxs)("section",{className:"space-y-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,d.jsx)("div",{className:`${b.color} w-11 h-11 rounded-[1.25rem] flex items-center justify-center text-white shadow-xl`,children:(0,d.jsx)("i",{className:`fas ${b.icon} text-lg`})}),(0,d.jsx)("h2",{className:"text-2xl font-black text-slate-900 tracking-tighter",children:b.name})]}),(0,d.jsx)("div",{className:"flex overflow-x-auto gap-8 pb-10 scrollbar-hide snap-x",children:b.templates.map(c=>(0,d.jsxs)("div",{onClick:()=>a(c.defaultData),className:"flex-shrink-0 w-72 h-[420px] bg-white rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-2xl hover:border-blue-100 transition-all cursor-pointer group relative overflow-hidden snap-start",children:[(0,d.jsx)("div",{className:"h-[60%] w-full relative",children:(0,d.jsx)(l,{src:c.backgroundImage,alt:c.title,icon:b.icon,color:b.color})}),(0,d.jsxs)("div",{className:"p-8 flex flex-col justify-between h-[40%] bg-white relative z-10 border-t border-slate-50",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:`text-[10px] font-black ${b.color.replace("bg-","text-")} uppercase tracking-widest mb-2 block`,children:b.name}),(0,d.jsx)("h3",{className:"font-black text-slate-900 text-xl group-hover:text-blue-600 transition-colors line-clamp-2 leading-tight",children:c.title})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,d.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest group-hover:text-blue-600 transition-colors",children:"USE TEMPLATE"}),(0,d.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-all shadow-sm",children:(0,d.jsx)("i",{className:"fas fa-arrow-right text-xs"})})]})]})]},c.id))})]},b.id))]})},n=({records:a,onEdit:b,onDelete:c,onExport:e,lang:g})=>{let h=f[g]||f.en;return 0===a.length?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center py-40 text-center",children:[(0,d.jsx)("div",{className:"bg-slate-100 w-28 h-28 rounded-[2rem] flex items-center justify-center text-slate-300 text-5xl mb-8 shadow-inner rotate-3",children:(0,d.jsx)("i",{className:"fas fa-folder-open"})}),(0,d.jsx)("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:h.emptyTitle}),(0,d.jsx)("p",{className:"text-slate-500 mt-3 text-lg font-medium",children:h.emptySub}),(0,d.jsx)("button",{className:"mt-10 bg-blue-600 text-white px-8 py-4 rounded-2xl font-black shadow-xl shadow-blue-100 hover:bg-blue-700 transition-all active:scale-95",onClick:()=>window.location.hash="",children:h.goToHome})]}):(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 lg:px-10 py-16",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between mb-12 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"inline-block px-3 py-1 bg-slate-100 text-slate-500 rounded-lg text-[10px] font-black uppercase tracking-widest mb-4",children:"Billing History"}),(0,d.jsx)("h1",{className:"text-4xl font-black text-slate-900 uppercase tracking-tighter leading-none",children:h.history}),(0,d.jsx)("p",{className:"text-slate-400 font-medium mt-3 text-lg",children:h.manageRecords})]}),(0,d.jsx)("div",{className:"bg-blue-50 border border-blue-100 px-6 py-3 rounded-2xl",children:(0,d.jsx)("span",{className:"text-blue-600 text-lg font-black",children:h.totalCount.replace("{count}",a.length.toString())})})]}),(0,d.jsx)("div",{className:"grid gap-6",children:a.map(a=>(0,d.jsxs)("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-200 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-8 hover:shadow-2xl hover:border-blue-100 transition-all group",children:[(0,d.jsxs)("div",{className:"flex items-center gap-6 w-full lg:w-auto",children:[(0,d.jsx)("div",{className:"bg-slate-50 w-16 h-16 rounded-[1.5rem] flex items-center justify-center text-slate-400 text-2xl group-hover:bg-blue-600 group-hover:text-white group-hover:rotate-6 transition-all shadow-sm",children:(0,d.jsx)("i",{className:"fas fa-file-invoice"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-1.5",children:[(0,d.jsx)("h3",{className:"font-black text-slate-900 text-xl tracking-tight",children:a.invoiceNumber}),(0,d.jsx)("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-widest ${"invoice"===a.type?"bg-indigo-50 text-indigo-600":"bg-emerald-50 text-emerald-600"}`,children:a.type})]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-slate-500 font-medium",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2",children:[(0,d.jsx)("i",{className:"fas fa-user text-blue-400"})," ",a.client.name||"Untitled Client"]}),(0,d.jsxs)("span",{className:"flex items-center gap-2",children:[(0,d.jsx)("i",{className:"fas fa-calendar-alt text-blue-400"})," ",a.date]})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-8 w-full lg:w-auto justify-between lg:justify-end pt-6 lg:pt-0 border-t lg:border-0 border-slate-100",children:[(0,d.jsxs)("div",{className:"text-left lg:text-right",children:[(0,d.jsx)("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-[0.2em] mb-1 block",children:h.amountTotal}),(0,d.jsx)("p",{className:"text-2xl font-black text-slate-900 tracking-tight",children:new Intl.NumberFormat(g,{style:"currency",currency:a.currency}).format(a.items.reduce((a,b)=>a+b.quantity*b.rate,0)*(1+a.taxRate/100))})]}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)("button",{onClick:()=>b(a),className:"w-12 h-12 bg-slate-50 hover:bg-blue-600 hover:text-white text-slate-500 rounded-2xl flex items-center justify-center transition-all shadow-sm active:scale-90",title:"Edit",children:(0,d.jsx)("i",{className:"fas fa-edit text-sm"})}),(0,d.jsx)("button",{onClick:()=>e(a),className:"w-12 h-12 bg-blue-50 hover:bg-blue-600 hover:text-white text-blue-600 rounded-2xl flex items-center justify-center transition-all shadow-sm active:scale-90",title:"Download PDF",children:(0,d.jsx)("i",{className:"fas fa-download text-sm"})}),(0,d.jsx)("button",{onClick:()=>c(a.id),className:"w-12 h-12 bg-red-50 hover:bg-red-600 hover:text-white text-red-500 rounded-2xl flex items-center justify-center transition-all shadow-sm active:scale-90",title:"Delete",children:(0,d.jsx)("i",{className:"fas fa-trash-alt text-sm"})})]})]})]},a.id))})]})},o=({recordsCount:a,user:b,onLogout:c,lang:e})=>{let g=f[e]||f.en;return(0,d.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-8 sm:py-12 space-y-8 mb-10",children:[(0,d.jsxs)("div",{className:"bg-white rounded-[2rem] p-8 sm:p-10 border border-slate-200 text-center shadow-2xl relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-600 to-indigo-600"}),(0,d.jsx)("div",{className:"relative inline-block mb-6",children:(0,d.jsx)("div",{className:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-full flex items-center justify-center text-white text-4xl sm:text-5xl font-black uppercase",children:b.name.slice(0,2)})}),(0,d.jsx)("h2",{className:"text-2xl sm:text-3xl font-black text-slate-900",children:b.name}),(0,d.jsx)("p",{className:"text-slate-400 font-bold text-sm mt-1",children:b.email}),(0,d.jsx)("div",{className:"mt-4",children:(0,d.jsx)("span",{className:"text-blue-600 font-bold text-[10px] uppercase tracking-[0.2em] bg-blue-50 inline-block px-3 py-1 rounded-full border border-blue-100",children:g.proMember||"PRO MEMBER"})}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-8",children:[(0,d.jsxs)("div",{className:"bg-slate-50 p-4 rounded-3xl text-center border border-slate-100",children:[(0,d.jsx)("span",{className:"block text-2xl font-black text-blue-600",children:a}),(0,d.jsx)("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-[0.2em] mt-1 block",children:g.records})]}),(0,d.jsxs)("div",{className:"bg-slate-50 p-4 rounded-3xl text-center border border-slate-100",children:[(0,d.jsx)("span",{className:"block text-2xl font-black text-indigo-600",children:"PRO"}),(0,d.jsx)("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-[0.2em] mt-1 block",children:g.accountLevel||"LEVEL"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.3em] px-4",children:g.layoutSettings}),(0,d.jsxs)("div",{className:"bg-white rounded-[1.5rem] border border-slate-200 overflow-hidden",children:[(0,d.jsxs)("button",{className:"w-full flex items-center justify-between p-5 hover:bg-slate-50 border-b border-slate-100 group text-left",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 text-slate-700 font-bold",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:(0,d.jsx)("i",{className:"fas fa-building text-slate-400"})}),g.businessSettings||"Business Profile"]}),(0,d.jsx)("i",{className:"fas fa-chevron-right text-slate-300"})]}),(0,d.jsx)("button",{onClick:()=>{window.confirm(g.logoutConfirm||"Confirm logout?")&&c()},className:"w-full flex items-center justify-between p-5 hover:bg-red-50 text-red-600 font-black group text-left",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-red-100/50 rounded-xl flex items-center justify-center",children:(0,d.jsx)("i",{className:"fas fa-sign-out-alt"})}),""===g.submitLogin?"":"Sign Out"]})})]})]})]})},p=({activeView:a,setView:b,lang:c})=>{let e=f[c]||f.en,g=[{id:"home",label:e.home,icon:"fa-home",activeIcon:"fa-home"},{id:"editor",label:e.make,icon:"fa-plus-circle",activeIcon:"fa-plus-circle"},{id:"records",label:e.records,icon:"fa-file-invoice",activeIcon:"fa-file-invoice"},{id:"about",label:e.aboutUs,icon:"fa-info-circle",activeIcon:"fa-info-circle"},{id:"profile",label:e.profile,icon:"fa-user",activeIcon:"fa-user"}];return(0,d.jsx)("div",{className:"fixed bottom-6 left-0 right-0 z-[100] px-4 sm:hidden pointer-events-none",children:(0,d.jsx)("nav",{className:"max-w-lg mx-auto h-16 bg-slate-900/95 backdrop-blur-xl border border-white/10 shadow-[0_20px_50px_rgba(0,0,0,0.3)] rounded-[2rem] flex items-center justify-around px-1 pointer-events-auto",children:g.map(c=>{let e=a===c.id;return(0,d.jsx)("button",{onClick:()=>b(c.id),className:"relative flex flex-col items-center justify-center w-full h-full transition-all duration-300",children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,d.jsx)("i",{className:`fas ${e?c.activeIcon:c.icon} text-lg transition-all duration-300 ${e?"text-blue-500 scale-110":"text-slate-500"}`}),(0,d.jsx)("span",{className:`text-[8px] font-black tracking-tighter uppercase transition-colors duration-300 ${e?"text-white":"text-slate-500"}`,children:c.label}),e&&(0,d.jsx)("div",{className:"absolute -bottom-1 w-1 h-1 bg-blue-500 rounded-full"})]})},c.id)})})})},q=({onLogin:a,lang:b})=>{let[c,g]=(0,e.useState)("login"),[h,i]=(0,e.useState)(""),[j,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(!1),n=f[b]||f.en;return(0,d.jsxs)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-100/50 blur-[120px] rounded-full"}),(0,d.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-100/50 blur-[120px] rounded-full"}),(0,d.jsx)("div",{className:"w-full max-w-md bg-white rounded-[2.5rem] shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] border border-slate-100 overflow-hidden relative z-10",children:(0,d.jsxs)("div",{className:"p-8 sm:p-12",children:[(0,d.jsxs)("div",{className:"text-center mb-10",children:[(0,d.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-[1.5rem] text-white text-3xl shadow-xl shadow-blue-100 mb-4",children:(0,d.jsx)("i",{className:"fas fa-file-invoice"})}),(0,d.jsxs)("h1",{className:"text-3xl font-black text-slate-900 tracking-tighter uppercase",children:["SmartBill ",(0,d.jsx)("span",{className:"text-blue-600",children:"Pro"})]}),(0,d.jsx)("p",{className:"text-slate-400 font-medium text-sm mt-2",children:"login"===c?n.welcomeSub:n.joinPro})]}),(0,d.jsxs)("form",{onSubmit:b=>{b.preventDefault(),m(!0),setTimeout(()=>{a({id:"u-"+Date.now(),email:h||"user@example.com",name:h.split("@")[0]||"Smart User",provider:"email"}),m(!1)},1200)},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest ml-1",children:n.email}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("i",{className:"fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),(0,d.jsx)("input",{type:"email",required:!0,placeholder:"name@company.com",className:"w-full h-14 pl-12 pr-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all outline-none",value:h,onChange:a=>i(a.target.value)})]})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest ml-1",children:n.password}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("i",{className:"fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),(0,d.jsx)("input",{type:"password",required:!0,placeholder:"",className:"w-full h-14 pl-12 pr-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all outline-none",value:j,onChange:a=>k(a.target.value)})]})]}),"login"===c&&(0,d.jsx)("div",{className:"text-right",children:(0,d.jsx)("button",{type:"button",className:"text-xs font-bold text-blue-600 hover:underline",children:n.forgotPassword})}),(0,d.jsx)("button",{type:"submit",disabled:l,className:"w-full h-14 bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-black uppercase tracking-[0.2em] shadow-xl shadow-blue-100 transition-all active:scale-95 flex items-center justify-center gap-2 mt-4",children:l?(0,d.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):"login"===c?n.submitLogin:n.submitRegister})]}),(0,d.jsxs)("p",{className:"text-center mt-8 text-slate-500 text-sm font-medium",children:["login"===c?n.noAccount:n.hasAccount,(0,d.jsx)("button",{onClick:()=>g("login"===c?"register":"login"),className:"text-blue-600 font-bold ml-1 hover:underline",children:"login"===c?n.register:n.login})]})]})})]})},r=({lang:a,onBack:b})=>{f[a]||f.en;let[c,g]=(0,e.useState)({}),h=a=>{g(b=>({...b,[a]:!0}))},i=a=>{a.currentTarget.style.display="none",a.currentTarget.parentElement?.classList.add("bg-opacity-100")},j=[{title:"zh-TW"===a?"":"Western Markets",focus:"zh-TW"===a?"":"Aesthetics & Global Standards",content:"zh-TW"===a?" VAT ":"Optimized for Western freelancers with clean, bold styles that meet all professional expectations for VAT and tax compliance.",icon:"fa-globe-americas",gradient:"from-blue-600 to-indigo-700",image:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?auto=format&fit=crop&w=1000&q=80"},{title:"zh-TW"===a?"":"Taiwan Market",focus:"zh-TW"===a?"":"Integrity & Local Etiquette",content:"zh-TW"===a?"":"Crafted for Taiwan SMEs. Supports precise Traditional Chinese typography with layouts that reflect local business etiquette.",icon:"fa-landmark",gradient:"from-emerald-600 to-teal-700",image:"https://images.unsplash.com/photo-1556742044-3c52d6e88c62?auto=format&fit=crop&w=1000&q=80"},{title:"zh-TW"===a?"":"Southeast Asia",focus:"zh-TW"===a?"":"Agility & Digital-First",content:"zh-TW"===a?"":"Powering digital transformation in SE Asia. Flexible currency support and mobile-first operations make your business seamless.",icon:"fa-rocket",gradient:"from-orange-500 to-red-600",image:"https://images.unsplash.com/photo-1556745753-b2904692b3cd?auto=format&fit=crop&w=1000&q=80"}];return(0,d.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[(0,d.jsxs)("nav",{className:"sticky top-0 z-[60] bg-white/80 backdrop-blur-xl border-b border-slate-200 px-6 py-4 flex items-center justify-between no-print shadow-sm",children:[(0,d.jsx)("button",{onClick:b,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 text-slate-600 hover:bg-slate-200 transition-all active:scale-90",children:(0,d.jsx)("i",{className:"fas fa-arrow-left"})}),(0,d.jsx)("span",{className:"text-xs font-black text-slate-900 uppercase tracking-[0.3em]",children:"SmartBill Pro / Global Vision"}),(0,d.jsx)("div",{className:"w-10"})]}),(0,d.jsxs)("section",{className:"relative py-16 sm:py-24 px-6 bg-white overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-blue-50/50 skew-x-[-15deg] translate-x-1/4 -z-10"}),(0,d.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col lg:flex-row items-center gap-16",children:[(0,d.jsxs)("div",{className:"flex-1 space-y-8 text-center lg:text-left",children:[(0,d.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-blue-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest shadow-xl shadow-blue-200",children:[(0,d.jsx)("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"Regional Excellence"]}),(0,d.jsxs)("h1",{className:"text-5xl md:text-8xl font-black text-slate-900 leading-[0.85] tracking-tighter uppercase",children:["SmartBill ",(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"text-blue-600",children:"Pro"})]}),(0,d.jsx)("p",{className:"text-xl text-slate-500 font-medium leading-relaxed max-w-lg mx-auto lg:mx-0",children:"zh-TW"===a?"":"Deeply rooted in global markets, we provide the most professional billing solutions tailored to local business cultures across regions."}),(0,d.jsxs)("div",{className:"flex flex-wrap justify-center lg:justify-start gap-8",children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-4xl font-black text-slate-900",children:"1.2M+"}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Invoices Processed"})]}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-4xl font-black text-slate-900",children:"150+"}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Countries Supported"})]})]})]}),(0,d.jsxs)("div",{className:"flex-1 w-full grid grid-cols-1 sm:grid-cols-2 gap-4 relative",children:[(0,d.jsxs)("div",{className:"h-64 sm:h-[480px] rounded-[2.5rem] overflow-hidden shadow-2xl relative group sm:col-span-1 bg-slate-100",children:[!c[0]&&(0,d.jsx)("div",{className:"absolute inset-0 bg-slate-200 animate-pulse"}),(0,d.jsx)("img",{src:j[0].image,onLoad:()=>h(0),onError:i,className:`w-full h-full object-cover grayscale-[10%] group-hover:grayscale-0 transition-all duration-700 group-hover:scale-105 ${c[0]?"opacity-100":"opacity-0"}`,alt:"Western Customer Collaboration"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950/80 via-transparent to-transparent"}),(0,d.jsxs)("div",{className:"absolute bottom-8 left-8 text-white",children:[(0,d.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest opacity-70 mb-1",children:"Western Market"}),(0,d.jsx)("h4",{className:"text-xl font-bold",children:"Standardized & Professional"})]})]}),(0,d.jsxs)("div",{className:"grid grid-rows-2 gap-4 h-64 sm:h-[480px]",children:[(0,d.jsxs)("div",{className:"rounded-[2.2rem] overflow-hidden shadow-xl relative group bg-emerald-50",children:[!c[1]&&(0,d.jsx)("div",{className:"absolute inset-0 bg-emerald-100 animate-pulse"}),(0,d.jsx)("img",{src:j[1].image,onLoad:()=>h(1),onError:i,className:`w-full h-full object-cover grayscale-[10%] group-hover:grayscale-0 transition-all duration-700 group-hover:scale-105 ${c[1]?"opacity-100":"opacity-0"}`,alt:"Business collaboration in Taiwan"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-950/80 via-transparent to-transparent"}),(0,d.jsxs)("div",{className:"absolute bottom-6 left-6 text-white",children:[(0,d.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest opacity-70 mb-1",children:"Taiwan Market"}),(0,d.jsx)("h4",{className:"text-base font-bold",children:"Refined Local Integrity"})]})]}),(0,d.jsxs)("div",{className:"rounded-[2.2rem] overflow-hidden shadow-xl relative group bg-orange-50",children:[!c[2]&&(0,d.jsx)("div",{className:"absolute inset-0 bg-orange-100 animate-pulse"}),(0,d.jsx)("img",{src:j[2].image,onLoad:()=>h(2),onError:i,className:`w-full h-full object-cover grayscale-[10%] group-hover:grayscale-0 transition-all duration-700 group-hover:scale-105 ${c[2]?"opacity-100":"opacity-0"}`,alt:"Digital billing in SE Asia"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-orange-950/80 via-transparent to-transparent"}),(0,d.jsxs)("div",{className:"absolute bottom-6 left-6 text-white",children:[(0,d.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest opacity-70 mb-1",children:"SE Asia Market"}),(0,d.jsx)("h4",{className:"text-base font-bold",children:"Fast Digital Agility"})]})]})]}),(0,d.jsxs)("div",{className:"absolute -top-4 -right-4 bg-white p-4 rounded-2xl shadow-xl border border-slate-100 z-20 hidden md:flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-100",children:(0,d.jsx)("i",{className:"fas fa-users-cog"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Built for"}),(0,d.jsx)("span",{className:"text-xs font-bold text-slate-900",children:"Collaboration"})]})]})]})]})]}),(0,d.jsx)("section",{className:"py-24 px-6 bg-slate-50 relative",children:(0,d.jsx)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-10",children:j.map((a,b)=>(0,d.jsxs)("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 border border-slate-100 relative overflow-hidden group",children:[(0,d.jsx)("div",{className:`absolute top-0 left-0 w-2 h-full bg-gradient-to-b ${a.gradient} opacity-0 group-hover:opacity-100 transition-opacity`}),(0,d.jsx)("div",{className:`w-14 h-14 bg-gradient-to-br ${a.gradient} rounded-2xl flex items-center justify-center text-white text-2xl mb-8 shadow-lg`,children:(0,d.jsx)("i",{className:`fas ${a.icon}`})}),(0,d.jsx)("h3",{className:"text-xs font-black text-blue-600 uppercase tracking-[0.2em] mb-3",children:a.focus}),(0,d.jsx)("h4",{className:"text-2xl font-black text-slate-900 mb-6",children:a.title}),(0,d.jsx)("p",{className:"text-slate-500 leading-relaxed font-medium",children:a.content})]},b))})}),(0,d.jsxs)("section",{className:"py-24 px-6 bg-slate-900 text-white text-center relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 pointer-events-none"}),(0,d.jsxs)("div",{className:"max-w-4xl mx-auto space-y-12 relative z-10",children:[(0,d.jsxs)("div",{className:"inline-flex items-center gap-3 px-4 py-2 bg-white/10 rounded-full text-blue-400 text-xs font-black uppercase tracking-widest backdrop-blur-md",children:[(0,d.jsx)("i",{className:"fas fa-microchip"})," Global Encryption Standard"]}),(0,d.jsx)("h2",{className:"text-3xl md:text-5xl font-black uppercase tracking-tight leading-none",children:"zh-TW"===a?"":"Intelligence Driven, Security Without Borders"}),(0,d.jsx)("p",{className:"text-slate-400 text-lg leading-relaxed font-medium",children:"zh-TW"===a?"SmartBill Pro ":"Whether in a Taipei studio or a London office, SmartBill Pro provides the same high-level privacy and AI technology. Data security is the core value of our promise."}),(0,d.jsxs)("div",{className:"flex flex-wrap justify-center gap-12 pt-8 opacity-30",children:[(0,d.jsx)("i",{className:"fab fa-apple text-5xl hover:opacity-100 transition-opacity cursor-pointer"}),(0,d.jsx)("i",{className:"fab fa-google text-5xl hover:opacity-100 transition-opacity cursor-pointer"}),(0,d.jsx)("i",{className:"fab fa-stripe text-5xl hover:opacity-100 transition-opacity cursor-pointer"}),(0,d.jsx)("i",{className:"fab fa-paypal text-5xl hover:opacity-100 transition-opacity cursor-pointer"})]})]})]}),(0,d.jsxs)("footer",{className:"py-20 px-6 text-center bg-white border-t border-slate-100",children:[(0,d.jsx)("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-[0.4em] mb-10",children:"Crafted for Modern Entrepreneurs"}),(0,d.jsx)("button",{onClick:b,className:"bg-blue-600 text-white px-12 py-5 rounded-2xl font-black shadow-2xl shadow-blue-100 hover:bg-blue-700 transition-all active:scale-95 uppercase tracking-widest text-sm",children:"zh-TW"===a?"":"Launch Your Professional Billing"})]})]})},s=({lang:a,onBack:b})=>{let[c,g]=(0,e.useState)(0),[h,i]=(0,e.useState)({}),[j,k]=(0,e.useState)({}),l=f[a]||f.en,m=({id:a,src:b,alt:c,icon:e,gradient:f})=>{let g=h[a],l=j[a];return(0,d.jsxs)("div",{className:"flex-1 relative group",children:[(0,d.jsx)("div",{className:`absolute -inset-4 ${f.replace("from-","bg-").split(" ")[0]}/20 rounded-[3rem] blur-2xl group-hover:blur-3xl transition-all`}),(0,d.jsxs)("div",{className:"relative rounded-[2.5rem] shadow-2xl border-[12px] border-white w-full h-[350px] overflow-hidden bg-slate-50 flex items-center justify-center",children:[!g&&!l&&(0,d.jsx)("div",{className:"absolute inset-0 bg-slate-100 animate-pulse flex items-center justify-center",children:(0,d.jsx)("i",{className:"fas fa-circle-notch fa-spin text-slate-300 text-3xl"})}),l?(0,d.jsxs)("div",{className:`absolute inset-0 bg-gradient-to-br ${f} flex flex-col items-center justify-center text-white p-10 text-center`,children:[(0,d.jsx)("i",{className:`fas ${e} text-6xl mb-6 opacity-40`}),(0,d.jsx)("p",{className:"font-black uppercase tracking-widest text-sm mb-1",children:c}),(0,d.jsx)("div",{className:"h-px w-12 bg-white/30 my-2"}),(0,d.jsx)("p",{className:"text-[10px] opacity-60 uppercase tracking-tighter",children:"SmartBill Pro Illustration"})]}):(0,d.jsx)("img",{src:b,alt:c,onLoad:()=>{i(b=>({...b,[a]:!0}))},onError:()=>{k(b=>({...b,[a]:!0}))},className:`w-full h-full object-cover transition-opacity duration-1000 ${g?"opacity-100":"opacity-0"}`})]})]})};return(0,d.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-20",children:[(0,d.jsxs)("nav",{className:"sticky top-0 z-[100] bg-white/80 backdrop-blur-xl border-b border-slate-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[(0,d.jsx)("button",{onClick:b,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 text-slate-600 hover:bg-slate-200 transition-all active:scale-90",children:(0,d.jsx)("i",{className:"fas fa-arrow-left"})}),(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("span",{className:"text-[10px] font-black text-blue-600 uppercase tracking-widest mb-0.5",children:"Customer Support"}),(0,d.jsx)("span",{className:"text-sm font-black text-slate-900 uppercase tracking-widest",children:l.helpCenter})]}),(0,d.jsx)("div",{className:"w-10"})]}),(0,d.jsxs)("section",{className:"bg-white pt-16 pb-32 px-6 text-center border-b border-slate-100 relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-50/50 via-transparent to-transparent -z-10"}),(0,d.jsxs)("div",{className:"max-w-3xl mx-auto space-y-8 relative z-10",children:[(0,d.jsx)("div",{className:"inline-flex p-4 bg-blue-600 text-white rounded-[1.5rem] shadow-2xl shadow-blue-100 mb-2 rotate-3",children:(0,d.jsx)("i",{className:"fas fa-life-ring text-3xl"})}),(0,d.jsx)("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:"zh-TW"===a?"":"How can we help?"}),(0,d.jsx)("p",{className:"text-slate-500 text-lg font-medium max-w-xl mx-auto",children:"zh-TW"===a?" AI  PDF ":"From AI filling to pro PDF export, find all tutorials and answers here."}),(0,d.jsxs)("div",{className:"max-w-md mx-auto relative pt-4 z-20",children:[(0,d.jsx)("input",{type:"text",placeholder:"zh-TW"===a?"...":"Search for questions...",className:"w-full h-14 pl-14 pr-6 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-blue-500 transition-all outline-none font-medium shadow-[0_8px_30px_rgb(0,0,0,0.04)]"}),(0,d.jsx)("i",{className:"fas fa-search absolute left-5 top-[calc(50%+8px)] -translate-y-1/2 text-slate-400"})]})]})]}),(0,d.jsx)("div",{className:"max-w-6xl mx-auto px-6 -mt-16 grid grid-cols-1 md:grid-cols-4 gap-6 mb-20 relative z-30",children:[{icon:"fa-play",title:"zh-TW"===a?"":"Quick Start",color:"bg-emerald-500"},{icon:"fa-brain",title:"zh-TW"===a?"AI ":"AI Tricks",color:"bg-blue-600"},{icon:"fa-palette",title:"zh-TW"===a?"":"Customizing",color:"bg-indigo-600"},{icon:"fa-file-pdf",title:"zh-TW"===a?"":"Exports",color:"bg-purple-600"}].map((a,b)=>(0,d.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-[0_20px_50px_-12px_rgba(0,0,0,0.08)] border border-slate-100 flex flex-col items-center text-center group hover:-translate-y-2 transition-all cursor-pointer",children:[(0,d.jsx)("div",{className:`${a.color} w-14 h-14 rounded-2xl flex items-center justify-center text-white text-xl mb-4 shadow-lg group-hover:rotate-12 transition-transform`,children:(0,d.jsx)("i",{className:`fas ${a.icon}`})}),(0,d.jsx)("h3",{className:"font-black text-slate-900 mb-1",children:a.title}),(0,d.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Learn More"})]},b))}),(0,d.jsxs)("section",{className:"max-w-5xl mx-auto px-6 space-y-32",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-16",children:[(0,d.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-900 text-white flex items-center justify-center font-black text-xl",children:"1"}),(0,d.jsx)("h2",{className:"text-3xl font-black text-slate-900",children:"zh-TW"===a?"":"Enter Basic Business Info"}),(0,d.jsx)("p",{className:"text-slate-500 font-medium leading-relaxed",children:"zh-TW"===a?" Logo":'In the editor, start by filling in your company name and address. Click "Upload Logo" to add your branding. Then enter the client details.'}),(0,d.jsxs)("div",{className:"pt-4 flex gap-4",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2 text-xs font-black text-slate-400",children:[(0,d.jsx)("i",{className:"fas fa-check-circle text-emerald-500"}),"  PNG/JPG"]}),(0,d.jsxs)("span",{className:"flex items-center gap-2 text-xs font-black text-slate-400",children:[(0,d.jsx)("i",{className:"fas fa-check-circle text-emerald-500"})," "]})]})]}),(0,d.jsx)(m,{id:"step1",src:"https://images.unsplash.com/photo-1497215728101-856f4ea42174?auto=format&fit=crop&w=800&q=80",alt:"Business Workspace",icon:"fa-briefcase",gradient:"from-slate-700 to-slate-900"})]}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row-reverse items-center gap-16",children:[(0,d.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-600 text-white flex items-center justify-center font-black text-xl",children:"2"}),(0,d.jsx)("h2",{className:"text-3xl font-black text-slate-900",children:"zh-TW"===a?" AI ":"Generate with AI Assistant"}),(0,d.jsx)("p",{className:"text-slate-500 font-medium leading-relaxed",children:"zh-TW"===a?" AI ":"Hate manual typing? Describe your work in the sidebar. Our powerful AI extracts rates, quantities, and descriptions into your form instantly."}),(0,d.jsxs)("div",{className:"bg-blue-50 p-6 rounded-3xl border border-blue-100",children:[(0,d.jsx)("p",{className:"text-xs font-black text-blue-600 uppercase tracking-widest mb-2",children:"Try This Prompt"}),(0,d.jsx)("p",{className:"text-sm font-medium italic text-slate-600",children:"42000500"})]})]}),(0,d.jsx)(m,{id:"step2",src:"https://images.unsplash.com/photo-1620712943543-bcc4688e7485?auto=format&fit=crop&w=800&q=80",alt:"AI Neural Tech",icon:"fa-brain",gradient:"from-blue-500 to-indigo-700"})]}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-16",children:[(0,d.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-full bg-emerald-500 text-white flex items-center justify-center font-black text-xl",children:"3"}),(0,d.jsx)("h2",{className:"text-3xl font-black text-slate-900",children:"zh-TW"===a?"":"Preview, Sign & Export"}),(0,d.jsx)("p",{className:"text-slate-500 font-medium leading-relaxed",children:"zh-TW"===a?" PDF":'Live preview your invoice. Use our electronic signature pad to handwrite your sign. Click "Export PDF" for a high-def business document.'}),(0,d.jsx)("div",{className:"pt-2",children:(0,d.jsx)("button",{onClick:b,className:"bg-slate-900 text-white px-8 py-3 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-black transition-all",children:"zh-TW"===a?"":"Try Now"})})]}),(0,d.jsx)(m,{id:"step3",src:"https://images.unsplash.com/photo-1450101499163-c8848c66ca85?auto=format&fit=crop&w=800&q=80",alt:"Successful Export",icon:"fa-file-pdf",gradient:"from-emerald-400 to-teal-600"})]})]}),(0,d.jsxs)("section",{className:"max-w-4xl mx-auto px-6 mt-40",children:[(0,d.jsxs)("div",{className:"text-center mb-16",children:[(0,d.jsx)("h2",{className:"text-4xl font-black text-slate-900 uppercase tracking-tighter mb-4",children:"zh-TW"===a?" FAQ":"General FAQ"}),(0,d.jsx)("p",{className:"text-slate-400 font-medium",children:""})]}),(0,d.jsx)("div",{className:"space-y-4",children:[{q:"zh-TW"===a?"":"Is my data secure?",a:"zh-TW"===a?"SmartBill Pro ":"Absolutely. SmartBill Pro prioritizes local storage. Your invoice data stays in your browser and sensitive info is not uploaded to our servers unless you manually save it."},{q:"zh-TW"===a?" AI ":"How to use AI for faster billing?",a:"zh-TW"===a?"AI 3Logo500AI ":'Find "AI Smart Fill" in the sidebar. Just type: "I designed 3 logos for my client at $500 each," and AI will automatically create the line items and totals.'},{q:"zh-TW"===a?"PDF ":"What if PDF format is incorrect?",a:"zh-TW"===a?" Chrome  Safari ":"For best results, use Chrome or Safari. Ensure the preview looks correct before exporting."},{q:"zh-TW"===a?"":"Can I customize invoice numbers?",a:"zh-TW"===a?"":"Yes. In the first row of the form, you can modify the number."}].map((a,b)=>(0,d.jsxs)("div",{className:"bg-white rounded-[2rem] border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[(0,d.jsxs)("button",{onClick:()=>g(c===b?null:b),className:"w-full px-8 py-7 flex items-center justify-between text-left hover:bg-slate-50 transition-colors",children:[(0,d.jsx)("span",{className:"font-black text-slate-800 text-lg pr-8",children:a.q}),(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${c===b?"bg-blue-600 text-white rotate-180":"bg-slate-100 text-slate-400"}`,children:(0,d.jsx)("i",{className:"fas fa-chevron-down text-xs"})})]}),c===b&&(0,d.jsxs)("div",{className:"px-8 pb-8 text-slate-500 font-medium leading-relaxed animate-in slide-in-from-top-2 duration-300",children:[(0,d.jsx)("div",{className:"h-px bg-slate-100 mb-6 w-full"}),a.a]})]},b))})]})]})},t=({lang:a,setView:b,onNewDoc:c})=>{let e=f[a]||f.en,g=new Date().getFullYear();return(0,d.jsx)("footer",{className:"bg-white border-t border-slate-200 pt-16 pb-12 mt-auto no-print relative z-10",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 lg:px-10",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-12 mb-16",children:[(0,d.jsxs)("div",{className:"md:col-span-4 space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"bg-blue-600 w-10 h-10 rounded-xl flex items-center justify-center text-white shadow-xl shadow-blue-100",children:(0,d.jsx)("i",{className:"fas fa-file-invoice text-lg"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-2xl font-black text-slate-900 tracking-tighter leading-none",children:"SmartBill"}),(0,d.jsx)("span",{className:"text-xs font-black text-blue-600 uppercase tracking-[0.2em] mt-1",children:"Professional Pro"})]})]}),(0,d.jsx)("p",{className:"text-slate-500 text-sm leading-relaxed max-w-sm font-medium",children:e.footerDesc})]}),(0,d.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,d.jsx)("h4",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-400",children:e.productFeatures}),(0,d.jsxs)("ul",{className:"space-y-4 text-sm font-bold text-slate-600",children:[(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:()=>b("home"),className:"hover:text-blue-600 transition-colors",children:e.home})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:()=>c("invoice"),className:"hover:text-blue-600 transition-colors",children:e.makeInvoice})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:()=>c("receipt"),className:"hover:text-blue-600 transition-colors",children:e.makeReceipt})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:()=>b("home"),className:"hover:text-blue-600 transition-colors",children:e.templates})}),(0,d.jsx)("li",{children:(0,d.jsxs)("button",{onClick:()=>b("editor"),className:"text-blue-600/60 hover:text-blue-600 transition-colors flex items-center gap-2",children:[(0,d.jsx)("i",{className:"fas fa-bolt text-[10px]"})," ",e.aiAssistant]})})]})]}),(0,d.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,d.jsx)("h4",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-400",children:e.support}),(0,d.jsxs)("ul",{className:"space-y-4 text-sm font-bold text-slate-600",children:[(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:()=>b("about"),className:"hover:text-blue-600 transition-colors",children:e.aboutUs})}),(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:()=>b("help"),className:"hover:text-blue-600 transition-colors",children:e.helpCenter})}),(0,d.jsx)("li",{children:(0,d.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:e.privacy})})]})]}),(0,d.jsxs)("div",{className:"md:col-span-4 space-y-6",children:[(0,d.jsx)("h4",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-400",children:e.contactUs}),(0,d.jsxs)("div",{className:"bg-slate-50 rounded-3xl p-6 border border-slate-100 space-y-5",children:[(0,d.jsxs)("div",{className:"flex items-start gap-4",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center text-blue-600",children:(0,d.jsx)("i",{className:"fas fa-envelope"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:e.supportEmail}),(0,d.jsx)("p",{className:"text-sm font-black text-slate-900",children:"smartbill@gamil.com"})]})]}),(0,d.jsxs)("div",{className:"flex items-start gap-4",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center text-emerald-600",children:(0,d.jsx)("i",{className:"fas fa-clock"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:e.serviceTime}),(0,d.jsx)("p",{className:"text-sm font-black text-slate-900",children:e.monToFri}),(0,d.jsx)("p",{className:"text-xs font-medium text-slate-500 mt-1",children:e.pacificTime})]})]})]})]})]}),(0,d.jsxs)("div",{className:"pt-8 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,d.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-[0.4em]",children:e.copyright.replace("{year}",g.toString())}),(0,d.jsx)("div",{className:"flex items-center gap-6",children:(0,d.jsxs)("span",{className:"flex items-center gap-2 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[(0,d.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.systemOk]})})]})]})})};var u=c(44745);let v=(0,u.createServerReference)("4067fceebfd7e2b123ff36154a916c24034c634741",u.callServer,void 0,u.findSourceMapURL,"smartGenerateLineItems"),w={id:"",type:"invoice",invoiceNumber:"INV-001",date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+12096e5).toISOString().split("T")[0],sender:{name:"",email:"",address:""},client:{name:"",email:"",address:""},items:[{id:"item-1",description:"",quantity:1,rate:0}],taxRate:0,currency:"CNY",notes:"",status:"Draft"},x=()=>{let[a,b]=(0,e.useState)(!1),[c,k]=(0,e.useState)(null),[l,u]=(0,e.useState)("home"),[x,y]=(0,e.useState)("home"),[z,A]=(0,e.useState)("zh-TW"),[B,C]=(0,e.useState)(w),[D,E]=(0,e.useState)([]);(0,e.useEffect)(()=>{let a=localStorage.getItem("sb_user_session");if(a)try{k(JSON.parse(a))}catch{}let c=localStorage.getItem("invoice_records_v2");if(c)try{E(JSON.parse(c))}catch{}b(!0)},[]);let[F,G]=(0,e.useState)("professional"),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),N=(0,e.useRef)(null);(0,e.useEffect)(()=>{a&&(c?localStorage.setItem("sb_user_session",JSON.stringify(c)):localStorage.removeItem("sb_user_session"))},[c,a]),(0,e.useEffect)(()=>{a&&localStorage.setItem("invoice_records_v2",JSON.stringify(D))},[D,a]);let O=a=>{k(a),u("home")},P=a=>{y(l),u(a),window.scrollTo({top:0,behavior:"smooth"})},Q=()=>{localStorage.removeItem("sb_user_session"),k(null),P("home"),window.scrollTo(0,0)},R=a=>{C(b=>({...b,...a}))},S=a=>{let b=Date.now().toString();C({...w,...a,id:b,invoiceNumber:`${a?.type==="receipt"?"REC":"INV"}-${(D.length+1).toString().padStart(3,"0")}`}),u("editor"),window.scrollTo({top:0,behavior:"smooth"})},T=()=>{E(a=>a.find(a=>a.id===B.id)?a.map(a=>a.id===B.id?B:a):[B,...a]),alert("")},U=async a=>{I(!0);let b=await v(a);if(b){let a=b.map((a,b)=>({...a,id:`ai-item-${Date.now()}-${b}`}));C(b=>({...b,items:[...b.items,...a]}))}I(!1)},V=async()=>{if(!N.current||J)return;K(!0);let a={margin:0,filename:`${"invoice"===B.type?"Invoice":"Receipt"}_${B.invoiceNumber}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};try{await html2pdf().set(a).from(N.current).save()}catch(a){console.error("PDF Generation failed",a),window.print()}finally{K(!1)}};return(0,d.jsxs)("div",{className:"min-h-screen flex flex-col pb-24 sm:pb-0 bg-slate-50",children:[(0,d.jsx)(g,{activeView:l,setView:u,onPrint:V,isExporting:J,lang:z,setLang:A}),(0,d.jsx)("main",{className:"flex-1 pt-16",children:(()=>{switch(l){case"home":return(0,d.jsx)(m,{onSelectTemplate:S,onCreateEmpty:()=>S(),lang:z});case"records":if(!c)return(0,d.jsx)(q,{onLogin:O,lang:z});return(0,d.jsx)(n,{records:D,lang:z,onEdit:a=>{C(a),u("editor")},onDelete:a=>E(b=>b.filter(b=>b.id!==a)),onExport:a=>{C(a),setTimeout(V,200)}});case"profile":if(!c)return(0,d.jsx)(q,{onLogin:O,lang:z});return(0,d.jsx)(o,{recordsCount:D.length,user:c,onLogout:Q,lang:z});case"about":return(0,d.jsx)(r,{lang:z,onBack:()=>u(x)});case"help":return(0,d.jsx)(s,{lang:z,onBack:()=>u(x)});case"editor":return(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8 lg:flex gap-8",children:[(0,d.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-6",children:[(0,d.jsx)(j,{template:F,setTemplate:G,onSmartFill:U,isAiLoading:H,isHeaderReversed:L,setIsHeaderReversed:M,onSave:T,lang:z}),(0,d.jsx)(h,{invoice:B,onChange:R,lang:z}),(0,d.jsx)("div",{className:"sm:hidden mt-10 mb-16 px-2",children:(0,d.jsxs)("button",{onClick:V,disabled:J,className:"w-full py-5 bg-blue-600 text-white font-black rounded-2xl shadow-[0_20px_40px_-15px_rgba(37,99,235,0.4)] flex items-center justify-center gap-3 transition-all active:scale-95 active:shadow-inner",children:[J?(0,d.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,d.jsx)("i",{className:"fas fa-cloud-download-alt text-xl"}),(0,d.jsx)("span",{className:"text-lg",children:J?f[z].generating:f[z].exportPdf})]})})]}),(0,d.jsx)("div",{className:"lg:w-1/2 lg:sticky lg:top-24 self-start",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden border border-slate-200",children:[(0,d.jsxs)("div",{className:"bg-slate-800 text-white px-4 py-3 flex justify-between items-center",children:[(0,d.jsxs)("span",{className:"text-sm font-bold",children:[(0,d.jsx)("i",{className:"fas fa-eye mr-2"})," "]}),(0,d.jsx)("button",{onClick:T,className:"bg-blue-600 px-3 py-1 rounded text-xs font-bold",children:f[z].save})]}),(0,d.jsx)("div",{className:"p-2 sm:p-8 bg-slate-100 min-h-[450px] sm:min-h-[500px] flex justify-center items-start overflow-x-hidden overflow-y-auto",children:(0,d.jsx)("div",{className:"transform origin-top transition-transform duration-500 scale-[0.38] xs:scale-[0.45] sm:scale-[0.7] md:scale-[0.8] lg:scale-[0.6] xl:scale-[0.85] flex-shrink-0",children:(0,d.jsx)(i,{invoice:B,template:F,isHeaderReversed:L,lang:z})})})]})})]})}})()}),(0,d.jsx)(t,{lang:z,setView:P,onNewDoc:a=>S({type:a})}),(0,d.jsx)("div",{className:"fixed top-0 left-0 opacity-0 pointer-events-none z-[-1]",children:(0,d.jsx)("div",{ref:N,style:{width:"210mm"},children:(0,d.jsx)(i,{invoice:B,template:F,isHeaderReversed:L,isForPdf:!0,lang:z})})}),(0,d.jsx)(p,{activeView:l,setView:u,lang:z})]})}},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},79950:a=>{"use strict";let b=Symbol("kDone"),c=Symbol("kRun");class d{constructor(a){this[b]=()=>{this.pending--,this[c]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[c]()}[c](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[b])}}}a.exports=d},81101:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosError=b.GAXIOS_ERROR_SYMBOL=void 0,b.defaultErrorRedactor=function a(b){let c="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function d(a){a&&a.forEach((b,d)=>{(/^authentication$/i.test(d)||/^authorization$/i.test(d)||/secret/i.test(d))&&a.set(d,c)})}function e(a,b){if("object"==typeof a&&null!==a&&"string"==typeof a[b]){let d=a[b];(/grant_type=/i.test(d)||/assertion=/i.test(d)||/secret/i.test(d))&&(a[b]=c)}}function f(a){a&&"object"==typeof a&&(a instanceof FormData||a instanceof URLSearchParams||"forEach"in a&&"set"in a?a.forEach((b,d)=>{(["grant_type","assertion"].includes(d)||/secret/.test(d))&&a.set(d,c)}):("grant_type"in a&&(a.grant_type=c),"assertion"in a&&(a.assertion=c),"client_secret"in a&&(a.client_secret=c)))}return b.config&&(d(b.config.headers),e(b.config,"data"),f(b.config.data),e(b.config,"body"),f(b.config.body),b.config.url.searchParams.has("token")&&b.config.url.searchParams.set("token",c),b.config.url.searchParams.has("client_secret")&&b.config.url.searchParams.set("client_secret",c)),b.response&&(a({config:b.response.config}),d(b.response.headers),b.response.bodyUsed&&(e(b.response,"data"),f(b.response.data))),b};let e=d(c(87531)),f=d(c(16176)).default.pkg;b.GAXIOS_ERROR_SYMBOL=Symbol.for(`${f.name}-gaxios-error`);class g extends Error{config;response;code;status;error;[b.GAXIOS_ERROR_SYMBOL]=f.version;static[Symbol.hasInstance](a){return!!a&&"object"==typeof a&&b.GAXIOS_ERROR_SYMBOL in a&&a[b.GAXIOS_ERROR_SYMBOL]===f.version||Function.prototype[Symbol.hasInstance].call(g,a)}constructor(a,b,c,d){if(super(a,{cause:d}),this.config=b,this.response=c,this.error=d instanceof Error?d:void 0,this.config=(0,e.default)(!0,{},b),this.response&&(this.response.config=(0,e.default)(!0,{},this.response.config)),this.response){try{this.response.data=function(a,b){switch(a){case"stream":default:return b;case"json":return JSON.parse(JSON.stringify(b));case"arraybuffer":return JSON.parse(Buffer.from(b).toString("utf8"));case"blob":return JSON.parse(b.text())}}(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}d instanceof DOMException?this.code=d.name:d&&"object"==typeof d&&"code"in d&&("string"==typeof d.code||"number"==typeof d.code)&&(this.code=d.code)}static extractAPIErrorFromResponse(a,b="The request failed"){let c=b;if("string"==typeof a.data&&(c=a.data),a.data&&"object"==typeof a.data&&"error"in a.data&&a.data.error&&!a.ok){if("string"==typeof a.data.error)return{message:a.data.error,code:a.status,status:a.statusText};if("object"==typeof a.data.error){c="message"in a.data.error&&"string"==typeof a.data.error.message?a.data.error.message:c;let b="status"in a.data.error&&"string"==typeof a.data.error.status?a.data.error.status:a.statusText,d="code"in a.data.error&&"number"==typeof a.data.error.code?a.data.error.code:a.status;if("errors"in a.data.error&&Array.isArray(a.data.error.errors)){let e=[];for(let b of a.data.error.errors)"object"==typeof b&&"message"in b&&"string"==typeof b.message&&e.push(b.message);return Object.assign({message:e.join("\n")||c,code:d,status:b},a.data.error)}return Object.assign({message:c,code:d,status:b},a.data.error)}}return{message:c,code:a.status,status:a.statusText}}}b.GaxiosError=g},81147:(a,b,c)=>{var d=c(79428).Buffer;a.exports=function(a){return"string"==typeof a?a:"number"==typeof a||d.isBuffer(a)?a.toString():JSON.stringify(a)}},81312:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleToken=void 0;var d=i(c(29021)),e=c(32842),f=i(c(49913)),g=i(c(33873)),h=c(28354);function i(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(i=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=j(a)&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(var h in a)"default"!==h&&({}).hasOwnProperty.call(a,h)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,h))&&(f.get||f.set)?e(g,h,f):g[h]=a[h]);return g})(a,b)}function j(a){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function k(a,b){if(b.has(a))throw TypeError("Cannot initialize the same private elements twice on an object")}function l(a,b,c){return a.set(m(a,b),c),c}function m(a,b,c){if("function"==typeof a?a===b:a.has(b))return arguments.length<3?b:c;throw TypeError("Private element is not present on this object")}function n(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,v(d.key),d)}}function o(a,b,c){return b&&n(a.prototype,b),c&&n(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function p(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function q(a){var b="function"==typeof Map?new Map:void 0;return(q=function(a){if(null===a||!function(a){try{return -1!==Function.toString.call(a).indexOf("[native code]")}catch(b){return"function"==typeof a}}(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return function(a,b,c){if(r())return Reflect.construct.apply(null,arguments);var d=[null];d.push.apply(d,b);var e=new(a.bind.apply(a,d));return c&&s(e,c.prototype),e}(a,arguments,t(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),s(c,a)})(a)}function r(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(r=function(){return!!a})()}function s(a,b){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function t(a){return(t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function u(a,b,c){return(b=v(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function v(a){var b=function(a,b){if("object"!=j(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=j(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==j(b)?b:b+""}function w(){var a,b,c="function"==typeof Symbol?Symbol:{},d=c.iterator||"@@iterator",e=c.toStringTag||"@@toStringTag";function f(c,d,e,f){var i=Object.create((d&&d.prototype instanceof h?d:h).prototype);return x(i,"_invoke",function(c,d,e){var f,h,i,j=0,k=e||[],l=!1,m={p:0,n:0,v:a,a:n,f:n.bind(a,4),d:function(b,c){return f=b,h=0,i=a,m.n=c,g}};function n(c,d){for(h=c,i=d,b=0;!l&&j&&!e&&b<k.length;b++){var e,f=k[b],n=m.p,o=f[2];c>3?(e=o===d)&&(i=f[(h=f[4])?5:(h=3,3)],f[4]=f[5]=a):f[0]<=n&&((e=c<2&&n<f[1])?(h=0,m.v=d,m.n=f[1]):n<o&&(e=c<3||f[0]>d||d>o)&&(f[4]=c,f[5]=d,m.n=o,h=0))}if(e||c>1)return g;throw l=!0,d}return function(e,k,o){if(j>1)throw TypeError("Generator is already running");for(l&&1===k&&n(k,o),h=k,i=o;(b=h<2?a:i)||!l;){f||(h?h<3?(h>1&&(m.n=-1),n(h,i)):m.n=i:m.v=i);try{if(j=2,f){if(h||(e="next"),b=f[e]){if(!(b=b.call(f,i)))throw TypeError("iterator result is not an object");if(!b.done)return b;i=b.value,h<2&&(h=0)}else 1===h&&(b=f.return)&&b.call(f),h<2&&(i=TypeError("The iterator does not provide a '"+e+"' method"),h=1);f=a}else if((b=(l=m.n<0)?i:c.call(d,m))!==g)break}catch(b){f=a,h=1,i=b}finally{j=1}}return{value:b,done:l}}}(c,e,f),!0),i}var g={};function h(){}function i(){}function j(){}b=Object.getPrototypeOf;var k=j.prototype=h.prototype=Object.create([][d]?b(b([][d]())):(x(b={},d,function(){return this}),b));function l(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,j):(a.__proto__=j,x(a,e,"GeneratorFunction")),a.prototype=Object.create(k),a}return i.prototype=j,x(k,"constructor",j),x(j,"constructor",i),i.displayName="GeneratorFunction",x(j,e,"GeneratorFunction"),x(k),x(k,e,"Generator"),x(k,d,function(){return this}),x(k,"toString",function(){return"[object Generator]"}),(w=function(){return{w:f,m:l}})()}function x(a,b,c,d){var e=Object.defineProperty;try{e({},"",{})}catch(a){e=0}(x=function(a,b,c,d){if(b)e?e(a,b,{value:c,enumerable:!d,configurable:!d,writable:!d}):a[b]=c;else{var f=function(b,c){x(a,b,function(a){return this._invoke(b,c,a)})};f("next",0),f("throw",1),f("return",2)}})(a,b,c,d)}function y(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function z(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){y(f,d,e,g,h,"next",a)}function h(a){y(f,d,e,g,h,"throw",a)}g(void 0)})}}var A=d.readFile?(0,h.promisify)(d.readFile):z(w().m(function a(){return w().w(function(a){for(;;)switch(a.n){case 0:throw new C("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return a.a(2)}},a)})),B="https://oauth2.googleapis.com/token",C=function(a){function b(a,c){var d,e,f;return p(this,b),e=b,f=[a],e=t(e),u(d=function(a,b){if(b&&("object"==j(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");var c=a;if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(this,r()?Reflect.construct(e,f||[],t(this).constructor):e.apply(this,f)),"code",void 0),d.code=c,d}if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");return b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),a&&s(b,a),o(b)}(q(Error)),D=new WeakMap,E=new WeakSet;function F(a){return G.apply(this,arguments)}function G(){return(G=z(w().m(function a(b){return w().w(function(a){for(;;)switch(a.n){case 0:if(!D.get(m(D,this))||b.forceRefresh){a.n=1;break}return a.a(2,D.get(m(D,this)));case 1:return a.p=1,a.n=2,l(D,this,m(E,this,H).call(this,b));case 2:return a.a(2,a.v);case 3:return a.p=3,l(D,this,void 0),a.f(3);case 4:return a.a(2)}},a,this,[[1,,3,4]])}))).apply(this,arguments)}function H(a){return I.apply(this,arguments)}function I(){return(I=z(w().m(function a(b){var c;return w().w(function(a){for(;;)switch(a.n){case 0:if(!1!==this.isTokenExpiring()||!1!==b.forceRefresh){a.n=1;break}return a.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){a.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){a.n=4;break}return a.n=3,this.getCredentials(this.keyFile);case 3:c=a.v,this.key=c.privateKey,this.iss=c.clientEmail||this.iss,c.clientEmail||m(E,this,J).call(this);case 4:return a.a(2,m(E,this,N).call(this))}},a,this)}))).apply(this,arguments)}function J(){if(!this.iss)throw new C("email is required.","MISSING_CREDENTIALS")}function K(){return L.apply(this,arguments)}function L(){return(L=z(w().m(function a(){var b;return w().w(function(a){for(;;)switch(a.n){case 0:if(this.accessToken){a.n=1;break}throw Error("No token to revoke.");case 1:return b="https://oauth2.googleapis.com/revoke?token="+this.accessToken,a.n=2,this.transporter.request({url:b,retry:!0});case 2:m(E,this,M).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return a.a(2)}},a,this)}))).apply(this,arguments)}function M(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=a.keyFile,this.key=a.key,this.rawToken=void 0,this.iss=a.email||a.iss,this.sub=a.sub,this.additionalClaims=a.additionalClaims,"object"===j(a.scope)?this.scope=a.scope.join(" "):this.scope=a.scope,this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,a.transporter&&(this.transporter=a.transporter)}function N(){return O.apply(this,arguments)}function O(){return(O=z(w().m(function a(){var b,c,d,e,g,h,i,j,k,l;return w().w(function(a){for(;;)switch(a.n){case 0:return b=Math.floor(new Date().getTime()/1e3),c=this.additionalClaims||{},d=Object.assign({iss:this.iss,scope:this.scope,aud:B,exp:b+3600,iat:b,sub:this.sub},c),e=f.sign({header:{alg:"RS256"},payload:d,secret:this.key}),a.p=1,a.n=2,this.transporter.request({method:"POST",url:B,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:e}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return g=a.v,this.rawToken=g.data,this.expiresAt=null===g.data.expires_in||void 0===g.data.expires_in?void 0:(b+g.data.expires_in)*1e3,a.a(2,this.rawToken);case 3:throw a.p=3,l=a.v,this.rawToken=void 0,this.tokenExpires=void 0,(j=l.response&&null!=(h=l.response)&&h.data?null==(i=l.response)?void 0:i.data:{}).error&&(k=j.error_description?": ".concat(j.error_description):"",l.message="".concat(j.error).concat(k)),l;case 4:return a.a(2)}},a,this,[[1,3]])}))).apply(this,arguments)}b.GoogleToken=function(){var a;return o(function a(b){p(this,a),k(this,E),E.add(this),u(this,"expiresAt",void 0),u(this,"key",void 0),u(this,"keyFile",void 0),u(this,"iss",void 0),u(this,"sub",void 0),u(this,"scope",void 0),u(this,"rawToken",void 0),u(this,"tokenExpires",void 0),u(this,"email",void 0),u(this,"additionalClaims",void 0),u(this,"eagerRefreshThresholdMillis",void 0),u(this,"transporter",{request:function(a){return(0,e.request)(a)}}),k(this,D),D.set(this,void 0),m(E,this,M).call(this,b)},[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var a=new Date().getTime();return!this.rawToken||!this.expiresAt||a>=this.expiresAt}},{key:"isTokenExpiring",value:function(){var a,b=new Date().getTime(),c=null!=(a=this.eagerRefreshThresholdMillis)?a:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=b+c}},{key:"getToken",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===j(a)&&(b=a,a=void 0),b=Object.assign({forceRefresh:!1},b),a){var c=a;m(E,this,F).call(this,b).then(function(a){return c(null,a)},a);return}return m(E,this,F).call(this,b)}},{key:"getCredentials",value:(a=z(w().m(function a(b){var c,d,e,f,h;return w().w(function(a){for(;;)switch(a.n){case 0:a.n=".json"===(h=g.extname(b))?1:".der"===h||".crt"===h||".pem"===h?4:".p12"===h||".pfx"===h?6:7;break;case 1:return a.n=2,A(b,"utf8");case 2:if(d=(c=JSON.parse(a.v)).private_key,e=c.client_email,!(!d||!e)){a.n=3;break}throw new C("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return a.a(2,{privateKey:d,clientEmail:e});case 4:return a.n=5,A(b,"utf8");case 5:return f=a.v,a.a(2,{privateKey:f});case 6:throw new C("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new C("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return a.a(2)}},a)})),function(b){return a.apply(this,arguments)})},{key:"revokeToken",value:function(a){return a?void m(E,this,K).call(this).then(function(){return a()},a):m(E,this,K).call(this)}}])}()},81630:a=>{"use strict";a.exports=require("http")},81733:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthClient=b.ExecutableError=void 0;let d=c(86),e=c(85343),f=c(10368);var g=c(10368);Object.defineProperty(b,"ExecutableError",{enumerable:!0,get:function(){return g.ExecutableError}});class h extends d.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(a){if(super(a),!a.credential_source.executable||(this.command=a.credential_source.executable.command,!this.command))throw Error('No valid Pluggable Auth "credential_source" provided.');if(void 0===a.credential_source.executable.timeout_millis)this.timeoutMillis=3e4;else if(this.timeoutMillis=a.credential_source.executable.timeout_millis,this.timeoutMillis<5e3||this.timeoutMillis>12e4)throw Error("Timeout must be between 5000120000 milliseconds.");this.outputFile=a.credential_source.executable.output_file,this.handler=new f.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){let a;if("1"!==process.env.GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES)throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");if(this.outputFile&&(a=await this.handler.retrieveCachedResponse()),!a){let b=new Map;b.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),b.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),b.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&b.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let c=this.getServiceAccountEmail();c&&b.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",c),a=await this.handler.retrieveResponseFromExecutable(b)}if(a.version>1)throw Error("Version of executable is not currently supported, maximum supported version is 1.");if(!a.success)throw new f.ExecutableError(a.errorMessage,a.errorCode);if(this.outputFile&&!a.expirationTime)throw new e.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(a.isExpired())throw Error("Executable response is expired.");return a.subjectToken}}b.PluggableAuthClient=h},82490:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{DynamicServerError:function(){return d},isDynamicServerError:function(){return e}});let c="DYNAMIC_SERVER_USAGE";class d extends Error{constructor(a){super("Dynamic server usage: "+a),this.description=a,this.digest=c}}function e(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===c}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},83427:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"InvariantError",{enumerable:!0,get:function(){return c}});class c extends Error{constructor(a,b){super("Invariant: "+(a.endsWith(".")?a:a+".")+" This is a bug in Next.js.",b),this.name="InvariantError"}}},83751:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>h});var d=c(73675),e=c(12605),f=c.n(e),g=c(79252);c(48199);let h={title:"SmartBill Pro | Free Professional Invoice Maker",description:"Create professional invoices for free with SmartBill Pro."};function i({children:a}){return(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsx)("head",{children:(0,d.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"})}),(0,d.jsxs)("body",{className:f().className,children:[a,(0,d.jsx)(g.default,{src:"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",strategy:"beforeInteractive"})]})]})}},83997:a=>{"use strict";a.exports=require("tty")},85343:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InvalidSubjectTokenError=b.InvalidMessageFieldError=b.InvalidCodeFieldError=b.InvalidTokenTypeFieldError=b.InvalidExpirationTimeFieldError=b.InvalidSuccessFieldError=b.InvalidVersionFieldError=b.ExecutableResponseError=b.ExecutableResponse=void 0;let c="urn:ietf:params:oauth:token-type:saml2",d="urn:ietf:params:oauth:token-type:id_token",e="urn:ietf:params:oauth:token-type:jwt";class f{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(a){if(!a.version)throw new h("Executable response must contain a 'version' field.");if(void 0===a.success)throw new i("Executable response must contain a 'success' field.");if(this.version=a.version,this.success=a.success,this.success){if(this.expirationTime=a.expiration_time,this.tokenType=a.token_type,this.tokenType!==c&&this.tokenType!==d&&this.tokenType!==e)throw new k(`Executable response must contain a 'token_type' field when successful and it must be one of ${d}, ${e}, or ${c}.`);if(this.tokenType===c){if(!a.saml_response)throw new n(`Executable response must contain a 'saml_response' field when token_type=${c}.`);this.subjectToken=a.saml_response}else{if(!a.id_token)throw new n(`Executable response must contain a 'id_token' field when token_type=${d} or ${e}.`);this.subjectToken=a.id_token}}else{if(!a.code)throw new l("Executable response must contain a 'code' field when unsuccessful.");if(!a.message)throw new m("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=a.code,this.errorMessage=a.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return void 0!==this.expirationTime&&this.expirationTime<Math.round(Date.now()/1e3)}}b.ExecutableResponse=f;class g extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableResponseError=g;class h extends g{}b.InvalidVersionFieldError=h;class i extends g{}b.InvalidSuccessFieldError=i;class j extends g{}b.InvalidExpirationTimeFieldError=j;class k extends g{}b.InvalidTokenTypeFieldError=k;class l extends g{}b.InvalidCodeFieldError=l;class m extends g{}b.InvalidMessageFieldError=m;class n extends g{}b.InvalidSubjectTokenError=n},85731:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosInterceptorManager=void 0;class c extends Set{}b.GaxiosInterceptorManager=c},85908:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{BubbledError:function(){return m},SpanKind:function(){return k},SpanStatusCode:function(){return j},getTracer:function(){return u},isBubbledError:function(){return n}});let e=c(38270),f=c(97661);try{d=c(43532)}catch(a){d=c(43532)}let{context:g,propagation:h,trace:i,SpanStatusCode:j,SpanKind:k,ROOT_CONTEXT:l}=d;class m extends Error{constructor(a,b){super(),this.bubble=a,this.result=b}}function n(a){return"object"==typeof a&&null!==a&&a instanceof m}let o=(a,b)=>{n(b)&&b.bubble?a.setAttribute("next.bubble",!0):(b&&(a.recordException(b),a.setAttribute("error.type",b.name)),a.setStatus({code:j.ERROR,message:null==b?void 0:b.message})),a.end()},p=new Map,q=d.createContextKey("next.rootSpanId"),r=0,s={set(a,b,c){a.push({key:b,value:c})}};class t{getTracerInstance(){return i.getTracer("next.js","0.0.1")}getContext(){return g}getTracePropagationData(){let a=g.active(),b=[];return h.inject(a,b,s),b}getActiveScopeSpan(){return i.getSpan(null==g?void 0:g.active())}withPropagatedContext(a,b,c){let d=g.active();if(i.getSpanContext(d))return b();let e=h.extract(d,a,c);return g.with(e,b)}trace(...a){var b;let[c,d,h]=a,{fn:j,options:k}="function"==typeof d?{fn:d,options:{}}:{fn:h,options:{...d}},m=k.spanName??c;if(!e.NextVanillaSpanAllowlist.includes(c)&&"1"!==process.env.NEXT_OTEL_VERBOSE||k.hideSpan)return j();let n=this.getSpanContext((null==k?void 0:k.parentSpan)??this.getActiveScopeSpan()),s=!1;n?(null==(b=i.getSpanContext(n))?void 0:b.isRemote)&&(s=!0):(n=(null==g?void 0:g.active())??l,s=!0);let t=r++;return k.attributes={"next.span_name":m,"next.span_type":c,...k.attributes},g.with(n.setValue(q,t),()=>this.getTracerInstance().startActiveSpan(m,k,a=>{let b="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,d=()=>{p.delete(t),b&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&e.LogSpanAllowList.includes(c||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(c.split(".").pop()||"").replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}`,{start:b,end:performance.now()})};s&&p.set(t,new Map(Object.entries(k.attributes??{})));try{if(j.length>1)return j(a,b=>o(a,b));let b=j(a);if((0,f.isThenable)(b))return b.then(b=>(a.end(),b)).catch(b=>{throw o(a,b),b}).finally(d);return a.end(),d(),b}catch(b){throw o(a,b),d(),b}}))}wrap(...a){let b=this,[c,d,f]=3===a.length?a:[a[0],{},a[1]];return e.NextVanillaSpanAllowlist.includes(c)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let a=d;"function"==typeof a&&"function"==typeof f&&(a=a.apply(this,arguments));let e=arguments.length-1,h=arguments[e];if("function"!=typeof h)return b.trace(c,a,()=>f.apply(this,arguments));{let d=b.getContext().bind(g.active(),h);return b.trace(c,a,(a,b)=>(arguments[e]=function(a){return null==b||b(a),d.apply(this,arguments)},f.apply(this,arguments)))}}:f}startSpan(...a){let[b,c]=a,d=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(b,c,d)}getSpanContext(a){return a?i.setSpan(g.active(),a):void 0}getRootSpanAttributes(){let a=g.active().getValue(q);return p.get(a)}setRootSpanAttribute(a,b){let c=g.active().getValue(q),d=p.get(c);d&&d.set(a,b)}}let u=(()=>{let a=new t;return()=>a})()},86357:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountClient=void 0;let d=c(86),e=c(24272),f=c(56573),g=c(81733);class h{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(a){return a&&a.type===d.EXTERNAL_ACCOUNT_TYPE?a.credential_source?.environment_id?new f.AwsClient(a):a.credential_source?.executable?new g.PluggableAuthClient(a):new e.IdentityPoolClient(a):null}}b.ExternalAccountClient=h},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},86655:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UrlSubjectTokenSupplier=void 0;let d=c(37254);class e{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(a){this.url=a.url,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName,this.headers=a.headers,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getSubjectToken(a){let b,c={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};if(d.AuthClient.setMethodName(c,"getSubjectToken"),"text"===this.formatType?b=(await a.transporter.request(c)).data:"json"===this.formatType&&this.subjectTokenFieldName&&(b=(await a.transporter.request(c)).data[this.subjectTokenFieldName]),!b)throw Error("Unable to parse the subject_token from the credential_source URL");return b}}b.UrlSubjectTokenSupplier=e},87531:a=>{"use strict";var b=Object.prototype.hasOwnProperty,c=Object.prototype.toString,d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===c.call(a)},g=function(a){if(!a||"[object Object]"!==c.call(a))return!1;var d,e=b.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&b.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!e&&!f)return!1;for(d in a);return void 0===d||b.call(a,d)},h=function(a,b){d&&"__proto__"===b.name?d(a,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):a[b.name]=b.newValue},i=function(a,c){if("__proto__"===c){if(!b.call(a,c))return;else if(e)return e(a,c).value}return a[c]};a.exports=function a(){var b,c,d,e,j,k,l=arguments[0],m=1,n=arguments.length,o=!1;for("boolean"==typeof l&&(o=l,l=arguments[1]||{},m=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});m<n;++m)if(b=arguments[m],null!=b)for(c in b)d=i(l,c),l!==(e=i(b,c))&&(o&&e&&(g(e)||(j=f(e)))?(j?(j=!1,k=d&&f(d)?d:[]):k=d&&g(d)?d:{},h(l,{name:c,newValue:a(o,k,e)})):void 0!==e&&h(l,{name:c,newValue:e}));return l}},87894:(a,b,c)=>{"use strict";let d,e=c(74075),f=c(39561),g=c(79950),{kStatusCode:h}=c(63685),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");class p{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",s),this._inflate.on("data",r)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",q)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}function q(a){this[n].push(a),this[l]+=a.length}function r(a){if(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)return void this[n].push(a);this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",r),this.reset()}function s(a){if(this[k]._inflate=null,this[o])return void this[m](this[o]);a[h]=1007,this[m](a)}a.exports=p},88085:(a,b,c)=>{var d=c(21712).Buffer,e=c(46160),f=c(57967),g=c(27910),h=c(81147),i=c(28354),j=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function k(a){var b=a.split(".",1)[0],c=d.from(b,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(c))return c;try{return JSON.parse(c)}catch(a){return}}function l(a){return a.split(".")[2]}function m(a){return j.test(a)&&!!k(a)}function n(a,b,c){if(!b){var d=Error("Missing algorithm parameter for jws.verify");throw d.code="MISSING_ALGORITHM",d}var e=l(a=h(a)),g=a.split(".",2).join(".");return f(b).verify(g,e,c)}function o(a,b){if(b=b||{},!m(a=h(a)))return null;var c,e,f=k(a);if(!f)return null;var g=(c=c||"utf8",e=a.split(".")[1],d.from(e,"base64").toString(c));return("JWT"===f.typ||b.json)&&(g=JSON.parse(g,b.encoding)),{header:f,payload:g,signature:l(a)}}function p(a){var b=(a=a||{}).secret;if(b=null==(b=null==b?a.publicKey:b)?a.key:b,!0===/^hs/i.test(a.algorithm)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=c,this.signature=new e(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}i.inherits(p,g),p.prototype.verify=function(){try{var a=n(this.signature.buffer,this.algorithm,this.key.buffer),b=o(this.signature.buffer,this.encoding);return this.emit("done",a,b),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},p.decode=o,p.isValid=m,p.verify=n,a.exports=p},88260:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1109,23)),Promise.resolve().then(c.t.bind(c,63052,23)),Promise.resolve().then(c.t.bind(c,45858,23)),Promise.resolve().then(c.t.bind(c,66965,23)),Promise.resolve().then(c.t.bind(c,85169,23)),Promise.resolve().then(c.t.bind(c,59401,23)),Promise.resolve().then(c.t.bind(c,74963,23)),Promise.resolve().then(c.t.bind(c,64796,23)),Promise.resolve().then(c.bind(c,53233))},90001:(a,b,c)=>{"use strict";let{Writable:d}=c(27910),e=c(87894),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=c(63685),{concat:j,toArrayBuffer:k,unmask:l}=c(39561),{isValidStatusCode:m,isValidUTF8:n}=c(15959),o=Buffer[Symbol.species];class p extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0);return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);if(c>2097151)return void a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a)}haveLength(a){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return void a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}a.exports=p},90133:(a,b,c)=>{"use strict";let{tokenChars:d}=c(15959);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}a.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},91645:a=>{"use strict";a.exports=require("net")},92958:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,33109,23))},93121:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{arrayBufferToString:function(){return h},decrypt:function(){return k},encrypt:function(){return j},getActionEncryptionKey:function(){return p},getClientReferenceManifestForRsc:function(){return o},getServerModuleMap:function(){return n},setReferenceManifestsSingleton:function(){return m},stringToUint8Array:function(){return i}});let e=c(83427),f=c(97753),g=c(29294);function h(a){let b=new Uint8Array(a),c=b.byteLength;if(c<65535)return String.fromCharCode.apply(null,b);let d="";for(let a=0;a<c;a++)d+=String.fromCharCode(b[a]);return d}function i(a){let b=a.length,c=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function j(a,b,c){return crypto.subtle.encrypt({name:"AES-GCM",iv:b},a,c)}function k(a,b,c){return crypto.subtle.decrypt({name:"AES-GCM",iv:b},a,c)}let l=Symbol.for("next.server.action-manifests");function m({page:a,clientReferenceManifest:b,serverActionsManifest:c,serverModuleMap:d}){var e;let g=null==(e=globalThis[l])?void 0:e.clientReferenceManifestsPerPage;globalThis[l]={clientReferenceManifestsPerPage:{...g,[(0,f.normalizeAppPath)(a)]:b},serverActionsManifest:c,serverModuleMap:d}}function n(){let a=globalThis[l];if(!a)throw Object.defineProperty(new e.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return a.serverModuleMap}function o(){let a=globalThis[l];if(!a)throw Object.defineProperty(new e.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:b}=a,c=g.workAsyncStorage.getStore();if(!c){var d=b;let a=Object.values(d),c={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let b of a)c.clientModules={...c.clientModules,...b.clientModules},c.edgeRscModuleMapping={...c.edgeRscModuleMapping,...b.edgeRscModuleMapping},c.rscModuleMapping={...c.rscModuleMapping,...b.rscModuleMapping};return c}let f=b[c.route];if(!f)throw Object.defineProperty(new e.InvariantError(`Missing Client Reference Manifest for ${c.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return f}async function p(){if(d)return d;let a=globalThis[l];if(!a)throw Object.defineProperty(new e.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let b=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||a.serverActionsManifest.encryptionKey;if(void 0===b)throw Object.defineProperty(new e.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return d=await crypto.subtle.importKey("raw",i(atob(b)),"AES-GCM",!0,["encrypt","decrypt"])}},94165:(a,b,c)=>{var d=c(21712).Buffer,e=c(46160),f=c(57967),g=c(27910),h=c(81147),i=c(28354);function j(a,b){return d.from(a,b).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(a){var b,c,d,e=a.header,g=a.payload,k=a.secret||a.privateKey,l=a.encoding,m=f(e.alg),n=(b=(b=l)||"utf8",c=j(h(e),"binary"),d=j(h(g),b),i.format("%s.%s",c,d)),o=m.sign(n,k);return i.format("%s.%s",n,o)}function l(a){var b=a.secret;if(b=null==(b=null==b?a.privateKey:b)?a.key:b,!0===/^hs/i.test(a.header.alg)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=c,this.payload=new e(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}i.inherits(l,g),l.prototype.sign=function(){try{var a=k({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",a),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},l.sign=k,a.exports=l},94735:a=>{"use strict";a.exports=require("events")},96340:()=>{},96481:(a,b,c)=>{"use strict";Object.defineProperty(b,"A",{enumerable:!0,get:function(){return d.registerServerReference}});let d=c(29364)},97661:(a,b)=>{"use strict";function c(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isThenable",{enumerable:!0,get:function(){return c}})},97753:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{normalizeAppPath:function(){return f},normalizeRscURL:function(){return g}});let d=c(38974),e=c(18994);function f(a){return(0,d.ensureLeadingSlash)(a.split("/").reduce((a,b,c,d)=>!b||(0,e.isGroupSegment)(b)||"@"===b[0]||("page"===b||"route"===b)&&c===d.length-1?a:a+"/"+b,""))}function g(a){return a.replace(/\.rsc($|\?)/,"$1")}},98682:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{DOC_PREFETCH_RANGE_HEADER_VALUE:function(){return d},doesExportedHtmlMatchBuildId:function(){return g},insertBuildIdComment:function(){return f}});let c="<!DOCTYPE html>",d="bytes=0-63";function e(a){return a.slice(0,24).replace(/-/g,"_")}function f(a,b){return b.includes("--\x3e")||!a.startsWith(c)?a:a.replace(c,c+"\x3c!--"+e(b)+"--\x3e")}function g(a,b){return a.startsWith(c+"\x3c!--"+e(b)+"--\x3e")}},99243:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OAuthClientAuthHandler=void 0,b.getErrorFromOAuthErrorResponse=function(a,b){let c=a.error,d=a.error_description,e=a.error_uri,f=`Error code ${c}`;void 0!==d&&(f+=`: ${d}`),void 0!==e&&(f+=` - ${e}`);let g=Error(f);if(b){let a=Object.keys(b);b.stack&&a.push("stack"),a.forEach(a=>{"message"!==a&&Object.defineProperty(g,a,{value:b[a],writable:!1,enumerable:!0})})}return g};let d=c(32842),e=c(78053),f=["PUT","POST","PATCH"];class g{#D=(0,e.createCrypto)();#E;transporter;constructor(a){a&&"clientId"in a?(this.#E=a,this.transporter=new d.Gaxios):(this.#E=a?.clientAuthentication,this.transporter=a?.transporter||new d.Gaxios)}applyClientAuthenticationOptions(a,b){a.headers=d.Gaxios.mergeHeaders(a.headers),this.injectAuthenticatedHeaders(a,b),b||this.injectAuthenticatedRequestBody(a)}injectAuthenticatedHeaders(a,b){if(b)a.headers=d.Gaxios.mergeHeaders(a.headers,{authorization:`Bearer ${b}`});else if(this.#E?.confidentialClientType==="basic"){a.headers=d.Gaxios.mergeHeaders(a.headers);let b=this.#E.clientId,c=this.#E.clientSecret||"",e=this.#D.encodeBase64StringUtf8(`${b}:${c}`);d.Gaxios.mergeHeaders(a.headers,{authorization:`Basic ${e}`})}}injectAuthenticatedRequestBody(a){if(this.#E?.confidentialClientType==="request-body"){let b=(a.method||"GET").toUpperCase();if(!f.includes(b))throw Error(`${b} HTTP method does not support ${this.#E.confidentialClientType} client authentication`);let c=new Headers(a.headers).get("content-type");if(c?.startsWith("application/x-www-form-urlencoded")||a.data instanceof URLSearchParams){let b=new URLSearchParams(a.data??"");b.append("client_id",this.#E.clientId),b.append("client_secret",this.#E.clientSecret||""),a.data=b}else if(c?.startsWith("application/json"))a.data=a.data||{},Object.assign(a.data,{client_id:this.#E.clientId,client_secret:this.#E.clientSecret||""});else throw Error(`${c} content-types are not supported with ${this.#E.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.OAuthClientAuthHandler=g},99786:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{METADATA_BOUNDARY_NAME:function(){return c},OUTLET_BOUNDARY_NAME:function(){return e},ROOT_LAYOUT_BOUNDARY_NAME:function(){return f},VIEWPORT_BOUNDARY_NAME:function(){return d}});let c="__next_metadata_boundary__",d="__next_viewport_boundary__",e="__next_outlet_boundary__",f="__next_root_layout_boundary__"}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[305,255],()=>b(b.s=20430));module.exports=c})();