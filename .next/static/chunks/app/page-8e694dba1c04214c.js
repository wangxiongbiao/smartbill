(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1172:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return r.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}});let a=s(9683),l=s(3979),r=s(6831)},3646:(e,t,s)=>{Promise.resolve().then(s.bind(s,8363))},8363:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var a=s(7069),l=s(8521);let r={en:{home:"Home",make:"Create",records:"Records",profile:"Profile",heroTitle:"Professional Invoices",heroSub:"Easy to use. Simplified invoicing for every business.",createEmpty:"Create Blank",exportPdf:"Export PDF",generating:"Generating...",save:"Save",items:"Line Items",summary:"Summary",tax:"Tax",total:"Total"},"zh-TW":{home:"首頁",make:"製作",records:"記錄",profile:"我的",heroTitle:"專業發票 觸手可及",heroSub:"簡單易用。為每項業務簡化開票流程。",createEmpty:"創建空白發票",exportPdf:"導出 PDF",generating:"生成中...",save:"保存",items:"明細清單",summary:"總計摘要",tax:"稅率",total:"應付總額"},fr:{home:"Accueil",make:"Cr\xe9er",records:"Archives",profile:"Profil",heroTitle:"Factures Professionnelles",heroSub:"Facile \xe0 utiliser. Simplifiez votre facturation.",createEmpty:"Cr\xe9er vide",exportPdf:"Exporter PDF",generating:"G\xe9n\xe9ration...",save:"Enregistrer",items:"Articles",summary:"R\xe9sum\xe9",tax:"Taxe",total:"Total"},de:{home:"Start",make:"Erstellen",records:"Berichte",profile:"Profil",heroTitle:"Profi-Rechnungen",heroSub:"Einfach zu bedienen. Rechnungsstellung leicht gemacht.",createEmpty:"Neu erstellen",exportPdf:"PDF exportieren",generating:"Erstellen...",save:"Speichern",items:"Positionen",summary:"Zusammenfassung",tax:"Steuer",total:"Gesamt"},ja:{home:"ホーム",make:"作成",records:"履歴",profile:"マイページ",heroTitle:"プロフェッショナルな請求書",heroSub:"使いやすさを追求。あらゆるビジネスの請求を簡素化。",createEmpty:"新規作成",exportPdf:"PDF出力",generating:"生成中...",save:"保存",items:"明細",summary:"概要",tax:"税率",total:"合計金額"}},i=e=>{let{onPrint:t,isExporting:s,activeView:i,setView:n,lang:c,setLang:o}=e,[d,x]=(0,l.useState)(!1),m=r[c],h=[{id:"home",label:m.home,icon:"fas fa-home"},{id:"records",label:m.records,icon:"fas fa-history"},{id:"profile",label:m.profile,icon:"fas fa-user"}];return(0,a.jsx)("header",{className:"bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50 no-print shadow-sm",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer flex-shrink-0",onClick:()=>n("home"),children:[(0,a.jsx)("div",{className:"bg-blue-600 w-8 h-8 sm:w-9 sm:h-9 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-100",children:(0,a.jsx)("i",{className:"fas fa-file-invoice text-sm sm:text-base"})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-baseline sm:gap-1",children:[(0,a.jsx)("span",{className:"text-base sm:text-xl font-black bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent leading-none",children:"SmartBill"}),(0,a.jsx)("span",{className:"text-[10px] sm:text-sm font-black text-blue-600 uppercase tracking-wider leading-none",children:"Pro"})]})]}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center gap-1",children:[h.map(e=>(0,a.jsxs)("button",{onClick:()=>n(e.id),className:"px-4 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ".concat(i===e.id?"bg-blue-50 text-blue-600":"text-slate-500 hover:bg-slate-50 hover:text-slate-800"),children:[(0,a.jsx)("i",{className:e.icon}),e.label]},e.id)),(0,a.jsx)("div",{className:"w-px h-6 bg-slate-200 mx-2"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>x(!d),className:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-600 transition-all border border-slate-200 shadow-sm",title:"Change Language",children:(0,a.jsx)("i",{className:"fas fa-globe text-base"})}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>x(!1)}),(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-2xl shadow-2xl border border-slate-200 z-20 py-2 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[{id:"zh-TW",label:"繁體中文"},{id:"en",label:"English"},{id:"fr",label:"Fran\xe7ais"},{id:"de",label:"Deutsch"},{id:"ja",label:"日本語"}].map(e=>(0,a.jsxs)("button",{onClick:()=>{o(e.id),x(!1)},className:"w-full px-5 py-3 text-left text-sm font-bold flex items-center justify-between transition-colors ".concat(c===e.id?"bg-blue-50 text-blue-600":"text-slate-600 hover:bg-slate-50"),children:[e.label,c===e.id&&(0,a.jsx)("i",{className:"fas fa-check text-xs"})]},e.id))})]})]}),"editor"===i&&(0,a.jsxs)("button",{onClick:t,disabled:s,className:"hidden sm:flex bg-blue-600 hover:bg-blue-700 text-white px-3 sm:px-5 py-2 rounded-xl font-black shadow-lg shadow-blue-100 items-center gap-2 transition-all active:scale-95 text-xs sm:text-sm ".concat(s?"opacity-70 cursor-wait":""),children:[s?(0,a.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,a.jsx)("i",{className:"fas fa-cloud-download-alt"}),(0,a.jsx)("span",{className:"hidden xs:inline",children:s?m.generating:m.exportPdf})]})]})]})})},n=e=>{let{invoice:t,onChange:s}=e,r=(0,l.useRef)(null),i=(0,l.useRef)(null),[n,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(i.current){let e=i.current.getContext("2d");e&&(e.strokeStyle="#0f172a",e.lineWidth=2,e.lineCap="round")}},[]);let o=e=>{c(!0),x(e)},d=()=>{c(!1);let e=i.current;e&&s({sender:{...t.sender,signature:e.toDataURL()}})},x=e=>{let t,s;if(!n||!i.current)return;let a=i.current,l=a.getContext("2d");if(!l)return;let r=a.getBoundingClientRect();"touches"in e?(t=e.touches[0].clientX-r.left,s=e.touches[0].clientY-r.top):(t=e.clientX-r.left,s=e.clientY-r.top),l.lineTo(t,s),l.stroke(),l.beginPath(),l.moveTo(t,s)},m=(e,a)=>{s({items:t.items.map(t=>t.id===e?{...t,...a}:t)})};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6 space-y-6 sm:space-y-8",children:[(0,a.jsx)("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:["invoice","receipt"].map(e=>(0,a.jsx)("button",{onClick:()=>s({type:e}),className:"flex-1 py-2 text-sm font-bold rounded-lg transition-all ".concat(t.type===e?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"),children:"invoice"===e?"发票模式":"收据模式"},e))}),(0,a.jsxs)("section",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"invoice"===t.type?"发票编号":"收据编号"}),(0,a.jsx)("input",{type:"text",value:t.invoiceNumber,onChange:e=>s({invoiceNumber:e.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"货币单位"}),(0,a.jsxs)("select",{value:t.currency,onChange:e=>s({currency:e.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg",children:[(0,a.jsx)("option",{value:"CNY",children:"人民币 (\xa5)"}),(0,a.jsx)("option",{value:"USD",children:"美元 ($)"}),(0,a.jsx)("option",{value:"EUR",children:"欧元 (€)"})]})]})]}),(0,a.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8 py-4 border-t border-slate-100",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"来自 (您的信息)"}),(0,a.jsx)("input",{type:"file",ref:r,onChange:e=>{var a;let l=null==(a=e.target.files)?void 0:a[0];if(l){let e=new FileReader;e.onloadend=()=>{s({sender:{...t.sender,logo:e.result}})},e.readAsDataURL(l)}},accept:"image/*",className:"hidden",id:"logo-up"}),(0,a.jsx)("label",{htmlFor:"logo-up",className:"text-xs text-blue-600 font-medium cursor-pointer",children:"上传 Logo"})]}),(0,a.jsx)("input",{placeholder:"企业/个人名称",value:t.sender.name,onChange:e=>s({sender:{...t.sender,name:e.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg"}),(0,a.jsx)("textarea",{placeholder:"地址及联络方式",value:t.sender.address,onChange:e=>s({sender:{...t.sender,address:e.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg h-20 text-sm resize-none"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"发送至 (客户信息)"}),(0,a.jsx)("input",{placeholder:"客户名称",value:t.client.name,onChange:e=>s({client:{...t.client,name:e.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg"}),(0,a.jsx)("textarea",{placeholder:"客户收件地址",value:t.client.address,onChange:e=>s({client:{...t.client,address:e.target.value}}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg h-20 text-sm resize-none"})]})]}),(0,a.jsxs)("section",{className:"space-y-4 pt-4 border-t border-slate-100",children:[(0,a.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"明细清单"}),(0,a.jsx)("div",{className:"space-y-3",children:t.items.map(e=>(0,a.jsxs)("div",{className:"flex flex-col gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,a.jsx)("input",{placeholder:"项目描述",className:"flex-1 bg-transparent font-medium",value:e.description,onChange:t=>m(e.id,{description:t.target.value})}),(0,a.jsx)("button",{onClick:()=>{var a;return a=e.id,void s({items:t.items.filter(e=>e.id!==a)})},className:"text-slate-300 hover:text-red-500",children:(0,a.jsx)("i",{className:"fas fa-trash-alt"})})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400",children:"数量"}),(0,a.jsx)("input",{type:"number",className:"w-full bg-white border border-slate-200 px-3 py-1 rounded-lg text-sm",value:e.quantity,onChange:t=>m(e.id,{quantity:Number(t.target.value)})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400",children:"单价"}),(0,a.jsx)("input",{type:"number",className:"w-full bg-white border border-slate-200 px-3 py-1 rounded-lg text-sm",value:e.rate,onChange:t=>m(e.id,{rate:Number(t.target.value)})})]}),(0,a.jsxs)("div",{className:"flex-1 text-right",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-400",children:"金额"}),(0,a.jsx)("div",{className:"font-bold py-1",children:(e.quantity*e.rate).toFixed(2)})]})]})]},e.id))}),(0,a.jsx)("button",{onClick:()=>{let e={id:"item-".concat(Date.now()),description:"",quantity:1,rate:0};s({items:[...t.items,e]})},className:"w-full py-2 border-2 border-dashed border-slate-200 rounded-xl text-slate-400 hover:border-blue-400 hover:text-blue-500 transition-all font-bold text-sm",children:"+ 添加项目"})]}),(0,a.jsxs)("section",{className:"pt-4 border-t border-slate-100 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-700",children:"税率 (%)"}),(0,a.jsx)("input",{type:"number",className:"w-20 px-3 py-1 bg-white border border-slate-200 rounded-lg text-right text-sm",value:t.taxRate,onChange:e=>s({taxRate:Number(e.target.value)})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"电子签名"}),(0,a.jsx)("button",{onClick:()=>{let e=i.current;if(e){let a=e.getContext("2d");null==a||a.clearRect(0,0,e.width,e.height),s({sender:{...t.sender,signature:void 0}})}},className:"text-[10px] font-bold text-blue-600 uppercase hover:underline",children:"清除重新签署"})]}),(0,a.jsxs)("div",{className:"bg-slate-50 border-2 border-dashed border-slate-200 rounded-2xl overflow-hidden relative group",children:[(0,a.jsx)("canvas",{ref:i,width:500,height:150,onMouseDown:o,onMouseMove:x,onMouseUp:d,onMouseLeave:d,onTouchStart:o,onTouchMove:x,onTouchEnd:d,className:"w-full h-[120px] cursor-crosshair touch-none"}),!t.sender.signature&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-slate-300 text-xs font-medium",children:"在此区域手写您的签名"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-600 p-4 rounded-xl text-white flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-bold uppercase text-xs",children:"应付总额"}),(0,a.jsx)("span",{className:"text-2xl font-black",children:new Intl.NumberFormat("zh-CN",{style:"currency",currency:t.currency}).format(t.items.reduce((e,t)=>e+t.quantity*t.rate,0)*(1+t.taxRate/100))})]})]})]})},c=e=>{let{invoice:t,template:s,isHeaderReversed:l=!1,isForPdf:r=!1}=e,i=t.items.reduce((e,t)=>e+t.quantity*t.rate,0),n=i*(t.taxRate/100),c=new Intl.NumberFormat("zh-CN",{style:"currency",currency:t.currency}),o=(()=>{switch(s){case"minimalist":return{header:"border-b-4 border-slate-900 px-12 pb-10 pt-10",tableHeader:"bg-slate-50 text-slate-900 border-b border-slate-200",accentColor:"slate-900",signatureBorder:"border-slate-900"};case"modern":return{header:"bg-indigo-600 text-white px-12 py-10 rounded-t-xl",tableHeader:"bg-indigo-50 text-indigo-700",accentColor:"indigo-600",signatureBorder:"border-indigo-600"};default:return{header:"bg-slate-800 text-white px-12 py-10",tableHeader:"bg-slate-100 text-slate-700",accentColor:"blue-600",signatureBorder:"border-slate-300"}}})(),d="invoice"===t.type?"发票 (INVOICE)":"收据 (RECEIPT)";return(0,a.jsxs)("div",{className:"w-[210mm] ".concat(r?"min-h-[296mm]":"min-h-[297mm]"," bg-white mx-auto text-slate-800 flex flex-col overflow-hidden"),children:[(0,a.jsx)("div",{className:o.header,children:(0,a.jsxs)("div",{className:"flex justify-between items-start ".concat(l?"flex-row-reverse":""),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-black mb-1",children:d}),(0,a.jsxs)("p",{className:"opacity-80",children:["单号：#",t.invoiceNumber]})]}),(0,a.jsxs)("div",{className:"flex flex-col ".concat(l?"items-start text-left":"items-end text-right"),children:[t.sender.logo&&(0,a.jsx)("img",{src:t.sender.logo,alt:"Logo",className:"max-h-16 mb-4 object-contain"}),(0,a.jsx)("h2",{className:"text-xl font-bold",children:t.sender.name||"您的企业名称"}),(0,a.jsx)("p",{className:"text-sm opacity-80 whitespace-pre-wrap",children:t.sender.address})]})]})}),(0,a.jsxs)("div",{className:"px-12 py-10 flex-1 flex flex-col",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-12 mb-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"客户信息"}),(0,a.jsxs)("div",{className:"border-l-4 border-slate-200 pl-4",children:[(0,a.jsx)("p",{className:"font-bold text-lg",children:t.client.name||"客户名称"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-1 whitespace-pre-wrap",children:t.client.address||"客户地址"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 mb-1",children:"开具日期"}),(0,a.jsx)("p",{className:"font-medium mb-4",children:t.date}),"invoice"===t.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 mb-1",children:"截止日期"}),(0,a.jsx)("p",{className:"font-bold text-".concat(o.accentColor),children:t.dueDate})]})]})]}),(0,a.jsxs)("table",{className:"w-full text-left mb-8",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"".concat(o.tableHeader," text-xs font-bold uppercase"),children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"项目描述"}),(0,a.jsx)("th",{className:"px-6 py-4 text-center",children:"数量"}),(0,a.jsx)("th",{className:"px-6 py-4 text-center",children:"单价"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"金额"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:t.items.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium",children:e.description||"业务内容"}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:e.quantity}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:c.format(e.rate)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right font-bold",children:c.format(e.quantity*e.rate)})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-6 border-t border-slate-100",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[t.sender.signature&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("img",{src:t.sender.signature,alt:"Signature",className:"h-16 object-contain"})}),(0,a.jsxs)("div",{className:"border-t ".concat(o.signatureBorder," pt-2 min-w-[180px]"),children:[(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Authorized Signature"}),(0,a.jsx)("p",{className:"text-sm font-bold text-slate-900 mt-1",children:t.sender.name})]})]}),(0,a.jsxs)("div",{className:"w-64 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-slate-500",children:[(0,a.jsx)("span",{children:"小计"}),(0,a.jsx)("span",{children:c.format(i)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-slate-500",children:[(0,a.jsxs)("span",{children:["税额 (",t.taxRate,"%)"]}),(0,a.jsx)("span",{children:c.format(n)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xl font-black text-slate-900 pt-2 border-t border-slate-200",children:[(0,a.jsx)("span",{children:"总计"}),(0,a.jsx)("span",{children:c.format(i+n)})]})]})]}),t.notes&&(0,a.jsxs)("div",{className:"mt-auto pt-10",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-slate-400 mb-1",children:"备注说明"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 italic whitespace-pre-wrap",children:t.notes})]})]}),(0,a.jsx)("div",{className:"p-8 border-t border-slate-50 text-center text-[10px] text-slate-300 uppercase tracking-widest",children:"Powered by SmartBill Pro"})]})},o=e=>{let{template:t,setTemplate:s,onSmartFill:r,isAiLoading:i,isAppReversed:n,setIsAppReversed:c,isHeaderReversed:o,setIsHeaderReversed:d,onSave:x}=e,[m,h]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[x&&(0,a.jsxs)("button",{onClick:x,className:"w-full py-4 bg-slate-900 text-white font-black uppercase tracking-widest rounded-xl hover:bg-slate-800 transition-all shadow-lg active:scale-95 flex items-center justify-center gap-3",children:[(0,a.jsx)("i",{className:"fas fa-save"})," Save to Records"]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-xl p-6 text-white shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:(0,a.jsx)("i",{className:"fas fa-magic"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold",children:"AI Smart Fill"}),(0,a.jsx)("p",{className:"text-xs opacity-80",children:"Describe your work, let Gemini draft the items."})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{className:"w-full bg-white/10 border border-white/20 rounded-lg p-3 text-sm placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-white/30 resize-none h-20",placeholder:"e.g., 'I did 5 hours of website coding and 2 logo designs for $50 each...'",value:m,onChange:e=>h(e.target.value)}),(0,a.jsxs)("button",{disabled:i,onClick:()=>{m.trim()&&(r(m),h(""))},className:"mt-2 w-full py-2 bg-white text-blue-600 font-bold rounded-lg text-sm hover:bg-slate-50 transition-all flex items-center justify-center gap-2 ".concat(i?"opacity-50 cursor-not-allowed":""),children:[i?(0,a.jsx)("i",{className:"fas fa-spinner fa-spin"}):(0,a.jsx)("i",{className:"fas fa-bolt"}),i?"Thinking...":"Generate Items"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-100",children:[(0,a.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 mb-4",children:"Select Template"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:[{id:"professional",label:"Professional",color:"bg-slate-800"},{id:"modern",label:"Modern Indigo",color:"bg-indigo-600"},{id:"minimalist",label:"Minimalist",color:"bg-slate-900"}].map(e=>(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"flex-1 min-w-[120px] p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ".concat(t===e.id?"border-blue-500 bg-blue-50 shadow-inner":"border-slate-100 hover:border-slate-200 bg-slate-50"),children:[(0,a.jsx)("div",{className:"w-10 h-10 ".concat(e.color," rounded-lg shadow-md")}),(0,a.jsx)("span",{className:"text-xs font-bold ".concat(t===e.id?"text-blue-700":"text-slate-500"),children:e.label})]},e.id))})]}),(0,a.jsxs)("div",{className:"p-6 bg-slate-50/50 space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400",children:"Layout Settings"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("i",{className:"fas fa-columns text-slate-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Swap App Layout"})]}),(0,a.jsx)("button",{onClick:()=>c(!n),className:"w-12 h-6 rounded-full transition-colors relative ".concat(n?"bg-blue-600":"bg-slate-200"),children:(0,a.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(n?"translate-x-7":"translate-x-1")})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("i",{className:"fas fa-heading text-slate-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Flip Invoice Header"})]}),(0,a.jsx)("button",{onClick:()=>d(!o),className:"w-12 h-6 rounded-full transition-colors relative ".concat(o?"bg-blue-600":"bg-slate-200"),children:(0,a.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(o?"translate-x-7":"translate-x-1")})})]})]})]})]})},d=[{name:"自由职业",nameKey:"freelance",color:"bg-emerald-500",icon:"fa-user-ninja",imageIds:["1497215728101-856f4ea42174","1519389950473-47ba0277781c","1522202176988-66273c2fd55f","1486312338219-ce68d2c6f3ad","1517245386807-bb43f82c33c4","1515378960530-7c0da6231fb1","1499750310107-5fef28a66643","1504384308090-c894fdcc538d"]},{name:"建筑装修",nameKey:"construction",color:"bg-orange-500",icon:"fa-hard-hat",imageIds:["1504307651254-3b5b198c67d8","1541888941259-79273a460011","1503387762-592deb58ef4e","1581094794329-c8112a89af12","1534237748181-6d473797656d","1504917595217-d4dc5dba99bd","1590001158193-e2c2a5aabc5f","1517646272422-50d48ff70c7c"]},{name:"零售贸易",nameKey:"retail",color:"bg-pink-500",icon:"fa-shopping-bag",imageIds:["1441986300917-64674bd600d8","1472851294608-062f824d28c5","1528698827591-e19ccd7bc23d","1556742044-3c52d6e88c62","1567401893414-76b7b1e5a7a5","1495474472287-4d71bcdd2085","1533900298318-6b8da08a523e","1491333078588-55b67d3c77fe"]},{name:"咨询服务",nameKey:"consulting",color:"bg-blue-500",icon:"fa-briefcase",imageIds:["1521737604893-d14cc237f11d","1521791136364-798a7ad0d224","1552664730-d307ca884978","1542744173-8e7e53415bb0","1557804506-669a67965ba0","1522071823990-95529124430e","1515378717757-69591459a047","1573497019940-1c28c88b4f3e"]},{name:"创意设计",nameKey:"design",color:"bg-purple-500",icon:"fa-paint-brush",imageIds:["1558655146-d2ba2343260e","1586717791821-3f44a563df92","1550684848-fac1c5b4e853","1513542789411-b6a5d4f31634","1561070791-2526d30994b5","1633356122544-f134324a6cee","1502462041147-321704628bfd","1572044162444-ad60f128b582"]}],x=e=>{let{onSelectTemplate:t,onCreateEmpty:s,lang:l}=e,i=r[l];return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-16 overflow-hidden",children:[(0,a.jsxs)("section",{className:"text-center space-y-6 py-12 lg:py-20 relative",children:[(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[400px] bg-blue-100/30 blur-[120px] rounded-full -z-10"}),(0,a.jsxs)("h1",{className:"text-4xl sm:text-7xl font-black text-slate-900 tracking-tight leading-[1.1]",children:[i.heroTitle.split(" ")[0]," ",(0,a.jsx)("span",{className:"text-blue-600",children:i.heroTitle.split(" ").slice(1).join(" ")})]}),(0,a.jsx)("p",{className:"text-slate-500 max-w-2xl mx-auto text-lg sm:text-xl font-medium px-4",children:i.heroSub}),(0,a.jsx)("div",{className:"flex justify-center pt-8",children:(0,a.jsxs)("button",{onClick:s,className:"bg-slate-900 hover:bg-black text-white px-8 sm:px-10 py-3.5 sm:py-4 rounded-2xl font-black shadow-2xl flex items-center justify-center gap-3 transition-all active:scale-95 text-base sm:text-lg group mx-auto",children:[(0,a.jsx)("i",{className:"fas fa-plus-circle group-hover:rotate-90 transition-transform duration-300"})," ",i.createEmpty]})})]}),d.map(e=>(0,a.jsxs)("section",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"flex items-end justify-between px-2",children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"".concat(e.color," w-10 h-10 sm:w-12 sm:h-12 rounded-2xl flex items-center justify-center text-white shadow-xl"),children:(0,a.jsx)("i",{className:"fas ".concat(e.icon," text-base sm:text-lg")})}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-black text-slate-900 tracking-tighter",children:e.name})]})})}),(0,a.jsx)("div",{className:"flex overflow-x-auto gap-6 pb-6 px-2 scrollbar-hide snap-x",children:((e,t)=>{let s=d.find(t=>t.name===e);return Array.from({length:10}).map((t,a)=>{let l=s.imageIds[a%s.imageIds.length];return{id:"".concat(e,"-").concat(a),category:e,title:"".concat(e," #").concat(a+1),previewColor:s.color,backgroundImage:"https://images.unsplash.com/photo-".concat(l,"?auto=format&fit=crop&w=800&q=80"),defaultData:{notes:"Generated via SmartBill Pro Template.",items:[{id:"tpl-item-".concat(a),description:"".concat(e," Service Package"),quantity:1,rate:450+180*a}]}}})})(e.name,0).map(s=>(0,a.jsxs)("div",{onClick:()=>t(s.defaultData),className:"flex-shrink-0 w-64 sm:w-72 h-[350px] sm:h-[400px] bg-white rounded-[2rem] border border-slate-200 shadow-sm hover:shadow-xl transition-all duration-500 cursor-pointer group relative overflow-hidden snap-start",children:[(0,a.jsxs)("div",{className:"h-1/2 sm:h-3/5 w-full relative overflow-hidden ".concat(s.previewColor," bg-opacity-20 flex items-center justify-center"),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-slate-200 animate-pulse group-data-[loaded=true]:hidden"}),(0,a.jsx)("img",{src:s.backgroundImage,alt:s.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-0",onLoad:e=>{e.currentTarget.style.opacity="1"},onError:e=>{e.currentTarget.style.display="none"}}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white via-white/10 to-transparent"}),(0,a.jsx)("i",{className:"fas ".concat(e.icon," text-4xl text-white opacity-40 absolute z-0")})]}),(0,a.jsxs)("div",{className:"p-6 sm:p-8 flex flex-col justify-between h-1/2 sm:h-2/5 bg-white relative z-10",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"font-black text-slate-900 text-base sm:text-lg mb-2 group-hover:text-blue-600 transition-colors line-clamp-2",children:s.title})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"READY"}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 opacity-0 group-hover:opacity-100 transition-all -translate-x-2 group-hover:translate-x-0",children:(0,a.jsx)("i",{className:"fas fa-arrow-right text-xs"})})]})]})]},s.id))})]},e.name))]})},m=e=>{let{records:t,onEdit:s,onDelete:l,onExport:r}=e;return 0===t.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 text-center",children:[(0,a.jsx)("div",{className:"bg-slate-100 w-24 h-24 rounded-full flex items-center justify-center text-slate-300 text-4xl mb-6 shadow-inner",children:(0,a.jsx)("i",{className:"fas fa-folder-open"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"暂无记录"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2",children:"开始制作发票，记录将显示在这里。"}),(0,a.jsx)("button",{className:"mt-6 text-blue-600 font-bold hover:underline",children:"去首页看看模版"})]}):(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-12",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter",children:"历史记录"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"管理您已生成的发票和账单"})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("span",{className:"bg-blue-600 text-white px-5 py-2 rounded-xl text-sm font-black shadow-lg shadow-blue-100",children:["共 ",t.length," 份"]})})]}),(0,a.jsx)("div",{className:"grid gap-5",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-3xl p-6 border border-slate-200 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-5 hover:shadow-xl hover:border-blue-100 transition-all group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-5 w-full sm:w-auto",children:[(0,a.jsx)("div",{className:"bg-slate-50 w-14 h-14 rounded-2xl flex items-center justify-center text-slate-400 text-2xl group-hover:bg-blue-50 group-hover:text-blue-500 transition-colors",children:(0,a.jsx)("i",{className:"fas fa-file-invoice"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-black text-slate-900 text-lg",children:e.invoiceNumber}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-slate-500 mt-1",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("i",{className:"fas fa-user text-[10px]"})," ",e.client.name||"未命名客户"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("i",{className:"fas fa-calendar-alt text-[10px]"})," ",e.date]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto justify-between sm:justify-end pt-4 sm:pt-0 border-t sm:border-0 border-slate-100",children:[(0,a.jsxs)("div",{className:"text-right mr-6",children:[(0,a.jsx)("p",{className:"text-xl font-black text-slate-900 tracking-tight",children:new Intl.NumberFormat("en-US",{style:"currency",currency:e.currency}).format(e.items.reduce((e,t)=>e+t.quantity*t.rate,0)*(1+e.taxRate/100))}),(0,a.jsx)("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-widest",children:"账单总额"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>s(e),className:"w-10 h-10 bg-slate-50 hover:bg-blue-600 hover:text-white text-slate-500 rounded-xl transition-all flex items-center justify-center",title:"编辑",children:(0,a.jsx)("i",{className:"fas fa-edit text-sm"})}),(0,a.jsx)("button",{onClick:()=>r(e),className:"w-10 h-10 bg-blue-50 hover:bg-blue-600 hover:text-white text-blue-600 rounded-xl transition-all flex items-center justify-center",title:"下载 PDF",children:(0,a.jsx)("i",{className:"fas fa-download text-sm"})}),(0,a.jsx)("button",{onClick:()=>l(e.id),className:"w-10 h-10 bg-red-50 hover:bg-red-600 hover:text-white text-red-500 rounded-xl transition-all flex items-center justify-center",title:"删除",children:(0,a.jsx)("i",{className:"fas fa-trash-alt text-sm"})})]})]})]},e.id))})]})},h=e=>{let{recordsCount:t,user:s,onLogout:l}=e;return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-8 sm:py-12 space-y-8 sm:space-y-10 mb-10",children:[(0,a.jsxs)("div",{className:"bg-white rounded-[2rem] p-8 sm:p-10 border border-slate-200 text-center shadow-2xl shadow-slate-200/50 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-600 to-indigo-600"}),(0,a.jsxs)("div",{className:"relative inline-block mb-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 sm:w-28 sm:h-28 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-full flex items-center justify-center text-white text-4xl sm:text-5xl font-black shadow-xl shadow-blue-100 uppercase",children:s.name.slice(0,2)}),"facebook"===s.provider&&(0,a.jsx)("div",{className:"absolute bottom-1 right-1 w-8 h-8 bg-[#1877F2] border-4 border-white rounded-full flex items-center justify-center text-white text-[10px]",children:(0,a.jsx)("i",{className:"fab fa-facebook"})})]}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-black text-slate-900",children:s.name}),(0,a.jsx)("p",{className:"text-slate-400 font-bold text-sm mt-1",children:s.email}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("span",{className:"text-blue-600 font-bold text-[10px] uppercase tracking-[0.2em] bg-blue-50 inline-block px-3 py-1 rounded-full border border-blue-100",children:"facebook"===s.provider?"FACEBOOK 已授权":"专业版会员"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 sm:gap-6 mt-8 sm:mt-10",children:[(0,a.jsxs)("div",{className:"bg-slate-50 p-4 sm:p-6 rounded-3xl text-center border border-slate-100",children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-black text-blue-600",children:t}),(0,a.jsx)("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-[0.2em] mt-1 block",children:"发票总数"})]}),(0,a.jsxs)("div",{className:"bg-slate-50 p-4 sm:p-6 rounded-3xl text-center border border-slate-100",children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-black text-indigo-600",children:"Pro"}),(0,a.jsx)("span",{className:"text-[10px] uppercase font-black text-slate-400 tracking-[0.2em] mt-1 block",children:"账户等级"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.3em] px-4",children:"偏好设置"}),(0,a.jsxs)("div",{className:"bg-white rounded-[1.5rem] border border-slate-200 overflow-hidden shadow-sm",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-5 sm:p-6 hover:bg-slate-50 transition-colors border-b border-slate-100 group text-left",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-slate-700 font-bold",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("i",{className:"fas fa-building text-slate-400"})}),"企业资料设置"]}),(0,a.jsx)("i",{className:"fas fa-chevron-right text-slate-300"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-5 sm:p-6 hover:bg-slate-50 transition-colors border-b border-slate-100 group text-left",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 text-slate-700 font-bold",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("i",{className:"fas fa-bell text-slate-400"})}),"通知与提醒"]}),(0,a.jsx)("i",{className:"fas fa-chevron-right text-slate-300"})]}),(0,a.jsxs)("button",{onClick:()=>{window.confirm("您确定要退出当前账号吗？所有未保存的草稿可能会丢失。")&&l()},className:"w-full flex items-center justify-between p-5 sm:p-6 hover:bg-red-50 transition-colors text-red-600 font-black group text-left",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100/50 rounded-xl flex items-center justify-center",children:(0,a.jsx)("i",{className:"fas fa-sign-out-alt"})}),"退出当前账号"]}),(0,a.jsx)("span",{className:"text-xs opacity-50 font-medium",children:"Log out"})]})]})]}),(0,a.jsx)("div",{className:"text-center pt-4 opacity-30",children:(0,a.jsx)("p",{className:"text-[10px] text-slate-900 font-bold uppercase tracking-[0.4em]",children:"SmartBill Pro v2.5.0"})})]})},u=e=>{let{activeView:t,setView:s,lang:l}=e,i=r[l],n=[{id:"home",label:i.home,icon:"fa-home",activeIcon:"fa-home"},{id:"editor",label:i.make,icon:"fa-plus-circle",activeIcon:"fa-plus-circle"},{id:"records",label:i.records,icon:"fa-file-invoice",activeIcon:"fa-file-invoice"},{id:"profile",label:i.profile,icon:"fa-user",activeIcon:"fa-user"}];return(0,a.jsx)("div",{className:"fixed bottom-6 left-0 right-0 z-[100] px-6 sm:hidden pointer-events-none",children:(0,a.jsx)("nav",{className:"max-w-md mx-auto h-16 bg-slate-900/95 backdrop-blur-xl border border-white/10 shadow-[0_20px_50px_rgba(0,0,0,0.3)] rounded-[2rem] flex items-center justify-around px-2 pointer-events-auto",children:n.map(e=>{let l=t===e.id;return(0,a.jsx)("button",{onClick:()=>s(e.id),className:"relative flex flex-col items-center justify-center w-16 h-full transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("i",{className:"fas ".concat(l?e.activeIcon:e.icon," text-xl transition-all duration-300 ").concat(l?"text-blue-500 scale-110":"text-slate-500")}),(0,a.jsx)("span",{className:"text-[9px] font-black tracking-widest uppercase transition-colors duration-300 ".concat(l?"text-white":"text-slate-500"),children:e.label}),l&&(0,a.jsx)("div",{className:"absolute -bottom-1 w-1 h-1 bg-blue-500 rounded-full"})]})},e.id)})})})},f=e=>{let{onLogin:t}=e,[s,r]=(0,l.useState)("login"),[i,n]=(0,l.useState)(""),[c,o]=(0,l.useState)(""),[d,x]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-100/50 blur-[120px] rounded-full"}),(0,a.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-100/50 blur-[120px] rounded-full"}),(0,a.jsx)("div",{className:"w-full max-w-md bg-white rounded-[2.5rem] shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] border border-slate-100 overflow-hidden relative z-10 transition-all duration-500",children:(0,a.jsxs)("div",{className:"p-8 sm:p-12",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-[1.5rem] text-white text-3xl shadow-xl shadow-blue-100 mb-4",children:(0,a.jsx)("i",{className:"fas fa-file-invoice"})}),(0,a.jsxs)("h1",{className:"text-3xl font-black text-slate-900 tracking-tighter uppercase",children:["SmartBill ",(0,a.jsx)("span",{className:"text-blue-600",children:"Pro"})]}),(0,a.jsx)("p",{className:"text-slate-400 font-medium text-sm mt-2",children:"login"===s?"欢迎回来，请登录您的账户":"开启您的专业开票之旅"})]}),(0,a.jsxs)("button",{onClick:()=>{x(!0),setTimeout(()=>{t({id:"fb-"+Date.now(),email:"fb_user@facebook.com",name:"Facebook User",provider:"facebook"}),x(!1)},1500)},className:"w-full h-14 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-2xl font-bold flex items-center justify-center gap-3 transition-all active:scale-95 shadow-lg shadow-blue-100 mb-6",children:[(0,a.jsx)("i",{className:"fab fa-facebook text-xl"}),(0,a.jsxs)("span",{children:["通过 Facebook ","login"===s?"登录":"注册"]})]}),(0,a.jsxs)("div",{className:"relative flex items-center gap-4 mb-6 text-slate-300",children:[(0,a.jsx)("div",{className:"flex-1 h-px bg-slate-100"}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"或使用邮箱"}),(0,a.jsx)("div",{className:"flex-1 h-px bg-slate-100"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x(!0),setTimeout(()=>{t({id:"u-"+Date.now(),email:i||"user@example.com",name:i.split("@")[0]||"Smart User",provider:"email"}),x(!1)},1200)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest ml-1",children:"邮箱地址"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),(0,a.jsx)("input",{type:"email",required:!0,placeholder:"name@company.com",className:"w-full h-14 pl-12 pr-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all outline-none font-medium",value:i,onChange:e=>n(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest ml-1",children:"安全密码"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),(0,a.jsx)("input",{type:"password",required:!0,placeholder:"••••••••",className:"w-full h-14 pl-12 pr-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all outline-none font-medium",value:c,onChange:e=>o(e.target.value)})]})]}),"login"===s&&(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("button",{type:"button",className:"text-xs font-bold text-blue-600 hover:underline",children:"忘记密码？"})}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"w-full h-14 bg-slate-900 hover:bg-black text-white rounded-2xl font-black uppercase tracking-[0.2em] shadow-2xl transition-all active:scale-95 flex items-center justify-center gap-2 mt-4",children:d?(0,a.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):"login"===s?"立即登录":"立即注册"})]}),(0,a.jsxs)("p",{className:"text-center mt-8 text-slate-500 text-sm font-medium",children:["login"===s?"还没有账户？":"已经有账户了？",(0,a.jsx)("button",{onClick:()=>r("login"===s?"register":"login"),className:"text-blue-600 font-bold ml-1 hover:underline",children:"login"===s?"现在注册":"返回登录"})]})]})})]})},b=()=>(0,a.jsx)("footer",{className:"bg-white border-t border-slate-200 pt-16 pb-12 mt-auto no-print relative z-10",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-12 mb-16",children:[(0,a.jsxs)("div",{className:"md:col-span-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-blue-600 w-10 h-10 rounded-xl flex items-center justify-center text-white shadow-xl shadow-blue-100",children:(0,a.jsx)("i",{className:"fas fa-file-invoice text-lg"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-2xl font-black text-slate-900 tracking-tighter leading-none",children:"SmartBill"}),(0,a.jsx)("span",{className:"text-xs font-black text-blue-600 uppercase tracking-[0.2em] mt-1",children:"Professional Pro"})]})]}),(0,a.jsx)("p",{className:"text-slate-500 text-sm leading-relaxed max-w-sm font-medium",children:"SmartBill Pro 是专为现代企业家和自由职业者打造的顶级开票平台。我们通过创新的 AI 技术和极简的设计，帮助全球用户提升计费效率，塑造专业品牌形象。"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("a",{href:"#",className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:bg-blue-50 hover:text-blue-600 transition-all",children:(0,a.jsx)("i",{className:"fab fa-twitter"})}),(0,a.jsx)("a",{href:"#",className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:bg-blue-50 hover:text-blue-600 transition-all",children:(0,a.jsx)("i",{className:"fab fa-facebook-f"})}),(0,a.jsx)("a",{href:"#",className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 hover:bg-blue-50 hover:text-blue-600 transition-all",children:(0,a.jsx)("i",{className:"fab fa-linkedin-in"})})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,a.jsx)("h4",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-400",children:"产品功能"}),(0,a.jsxs)("ul",{className:"space-y-4 text-sm font-bold text-slate-600",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"发票模板库"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"收据生成器"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"AI 智能填充"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"多语言支持"})})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,a.jsx)("h4",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-400",children:"公司/支持"}),(0,a.jsxs)("ul",{className:"space-y-4 text-sm font-bold text-slate-600",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"关于我们"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"帮助中心"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"隐私政策"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"服务条款"})})]})]}),(0,a.jsxs)("div",{className:"md:col-span-4 space-y-6",children:[(0,a.jsx)("h4",{className:"text-xs font-black uppercase tracking-[0.3em] text-slate-400",children:"联系我们"}),(0,a.jsxs)("div",{className:"bg-slate-50 rounded-3xl p-6 border border-slate-100 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center text-blue-600 flex-shrink-0",children:(0,a.jsx)("i",{className:"fas fa-envelope"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"官方支持邮箱"}),(0,a.jsx)("p",{className:"text-sm font-black text-slate-900 select-all",children:"smartbill@gamil.com"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center text-emerald-600 flex-shrink-0",children:(0,a.jsx)("i",{className:"fas fa-clock"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"服务时间"}),(0,a.jsx)("p",{className:"text-sm font-black text-slate-900",children:"周一至周五"}),(0,a.jsx)("p",{className:"text-xs font-medium text-slate-500 mt-1",children:"上午9:00 - 下午5:00 (太平洋时间)"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"pt-8 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,a.jsxs)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-[0.4em]",children:["\xa9 ",new Date().getFullYear()," SMARTBILL PRO. 精准计费，智领未来."]}),(0,a.jsx)("div",{className:"flex items-center gap-6",children:(0,a.jsxs)("span",{className:"flex items-center gap-2 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"系统运行正常"]})})]})]})});var p=s(1172);let g=(0,p.createServerReference)("40a89a6063468164def90f9dabe710d0cb2205108f",p.callServer,void 0,p.findSourceMapURL,"smartGenerateLineItems"),j={id:"",type:"invoice",invoiceNumber:"INV-001",date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+12096e5).toISOString().split("T")[0],sender:{name:"",email:"",address:""},client:{name:"",email:"",address:""},items:[{id:"item-1",description:"示例服务项目",quantity:1,rate:0}],taxRate:0,currency:"CNY",notes:"感谢您的支持！",status:"Draft"},v=()=>{let[e,t]=(0,l.useState)(!1),[s,d]=(0,l.useState)(null),[p,v]=(0,l.useState)("home"),[N,w]=(0,l.useState)("zh-TW"),[y,k]=(0,l.useState)(j),[S,C]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=localStorage.getItem("sb_user_session");if(e)try{d(JSON.parse(e))}catch(e){}let s=localStorage.getItem("invoice_records_v2");if(s)try{C(JSON.parse(s))}catch(e){}t(!0)},[]);let[I,P]=(0,l.useState)("professional"),[R,T]=(0,l.useState)(!1),[E,_]=(0,l.useState)(!1),[D,F]=(0,l.useState)(!1),[z,L]=(0,l.useState)(!1),A=(0,l.useRef)(null);(0,l.useEffect)(()=>{e&&(s?localStorage.setItem("sb_user_session",JSON.stringify(s)):localStorage.removeItem("sb_user_session"))},[s,e]),(0,l.useEffect)(()=>{e&&localStorage.setItem("invoice_records_v2",JSON.stringify(S))},[S,e]);let B=()=>{localStorage.removeItem("sb_user_session"),d(null),v("home"),window.scrollTo(0,0)},q=e=>{k(t=>({...t,...e}))},O=e=>{let t=Date.now().toString();k({...j,...e,id:t,invoiceNumber:"".concat((null==e?void 0:e.type)==="receipt"?"REC":"INV","-").concat((S.length+1).toString().padStart(3,"0"))}),v("editor"),window.scrollTo({top:0,behavior:"smooth"})},M=()=>{C(e=>e.find(e=>e.id===y.id)?e.map(e=>e.id===y.id?y:e):[y,...e]),alert("账单已成功保存！")},U=async e=>{T(!0);let t=await g(e);if(t){let e=t.map((e,t)=>({...e,id:"ai-item-".concat(Date.now(),"-").concat(t)}));k(t=>({...t,items:[...t.items,...e]}))}T(!1)},H=async()=>{if(!A.current||E)return;_(!0);let e={margin:0,filename:"".concat("invoice"===y.type?"Invoice":"Receipt","_").concat(y.invoiceNumber,".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};try{await html2pdf().set(e).from(A.current).save()}catch(e){console.error("PDF Generation failed",e),window.print()}finally{_(!1)}};return s?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col pb-24 sm:pb-0 bg-slate-50",children:[(0,a.jsx)(i,{activeView:p,setView:v,onPrint:H,isExporting:E,lang:N,setLang:w}),(0,a.jsx)("main",{className:"flex-1",children:(()=>{switch(p){case"home":return(0,a.jsx)(x,{onSelectTemplate:O,onCreateEmpty:()=>O(),lang:N});case"records":return(0,a.jsx)(m,{records:S,onEdit:e=>{k(e),v("editor")},onDelete:e=>C(t=>t.filter(t=>t.id!==e)),onExport:e=>{k(e),setTimeout(H,200)}});case"profile":return(0,a.jsx)(h,{recordsCount:S.length,user:s,onLogout:B});case"editor":return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 lg:flex gap-8 ".concat(D?"flex-row-reverse":""),children:[(0,a.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-6",children:[(0,a.jsx)(o,{template:I,setTemplate:P,onSmartFill:U,isAiLoading:R,isAppReversed:D,setIsAppReversed:F,isHeaderReversed:z,setIsHeaderReversed:L,onSave:M}),(0,a.jsx)(n,{invoice:y,onChange:q}),(0,a.jsx)("div",{className:"sm:hidden mt-10 mb-16 px-2",children:(0,a.jsxs)("button",{onClick:H,disabled:E,className:"w-full py-5 bg-blue-600 text-white font-black rounded-2xl shadow-[0_20px_40px_-15px_rgba(37,99,235,0.4)] flex items-center justify-center gap-3 transition-all active:scale-95 active:shadow-inner",children:[E?(0,a.jsx)("i",{className:"fas fa-circle-notch fa-spin"}):(0,a.jsx)("i",{className:"fas fa-cloud-download-alt text-xl"}),(0,a.jsx)("span",{className:"text-lg",children:E?r[N].generating:r[N].exportPdf})]})})]}),(0,a.jsx)("div",{className:"lg:w-1/2 lg:sticky lg:top-24 self-start",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden border border-slate-200",children:[(0,a.jsxs)("div",{className:"bg-slate-800 text-white px-4 py-3 flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm font-bold",children:[(0,a.jsx)("i",{className:"fas fa-eye mr-2"})," 实时预览"]}),(0,a.jsx)("button",{onClick:M,className:"bg-blue-600 px-3 py-1 rounded text-xs font-bold",children:r[N].save})]}),(0,a.jsx)("div",{className:"p-2 sm:p-8 bg-slate-100 min-h-[450px] sm:min-h-[500px] flex justify-center items-start overflow-x-hidden overflow-y-auto",children:(0,a.jsx)("div",{className:"transform origin-top transition-transform duration-500 scale-[0.38] xs:scale-[0.45] sm:scale-[0.7] md:scale-[0.8] lg:scale-[0.6] xl:scale-[0.85] flex-shrink-0",children:(0,a.jsx)(c,{invoice:y,template:I,isHeaderReversed:z})})})]})})]})}})()}),(0,a.jsx)(b,{}),(0,a.jsx)("div",{className:"fixed top-0 left-0 opacity-0 pointer-events-none z-[-1]",children:(0,a.jsx)("div",{ref:A,style:{width:"210mm"},children:(0,a.jsx)(c,{invoice:y,template:I,isHeaderReversed:z,isForPdf:!0})})}),(0,a.jsx)(u,{activeView:p,setView:v,lang:N})]}):(0,a.jsx)(f,{onLogin:e=>{d(e),v("home")}})}}},e=>{e.O(0,[385,401,358],()=>e(e.s=3646)),_N_E=e.O()}]);